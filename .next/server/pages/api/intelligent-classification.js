"use strict";(()=>{var e={};e.id=8932,e.ids=[8932],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3323:(e,a,r)=>{r.r(a),r.d(a,{config:()=>l,default:()=>d,routeModule:()=>u});var t={};r.r(t),r.d(t,{default:()=>handler});var s=r(1802),o=r(7153),n=r(6249),i=r(7309),c=r(9475);async function handler(e,a){if("POST"!==e.method)return a.status(405).json({error:"Method not allowed"});try{let{productDescription:r,businessType:t=null,userHSCode:s=null,userCorrection:o=!1}=e.body;if((0,c.PN)("Intelligent classification request",{product:r?.substring(0,50),businessType:t,hasUserHS:!!s,isCorrection:o}),o&&s){let t=await Object(function(){var e=Error("Cannot find module '../../lib/transparent-hs-classifier.js'");throw e.code="MODULE_NOT_FOUND",e}())(r,e.body.originalClassification,s,e.body.userIndustry);return a.json({success:!0,message:t.message,userImprovement:!0})}let n=Object(function(){var e=Error("Cannot find module '../../lib/transparent-hs-classifier.js'");throw e.code="MODULE_NOT_FOUND",e}())(r,t),d=Object(function(){var e=Error("Cannot find module '../../lib/transparent-hs-classifier.js'");throw e.code="MODULE_NOT_FOUND",e}())(n.industry),l=null;if("high"===n.confidence||s)try{let e=s||n.hsCode;l=await i.ZP.getTradeFlowsByHS(e)}catch(e){(0,c.H)("Failed to fetch specific trade data",{error:e.message})}let u={classification:{industry:n.industry,confidence:n.confidence,hsCode:n.hsCode,hsCodeRange:n.hsCodeRange,description:n.description,message:n.message,fallbackReason:n.fallbackReason,matchedKeywords:n.matchedKeywords},tradeIntelligence:l||d,userOptions:{canImprove:n.userCanImprove,hsCodeInput:!s,improvementMessage:"low"===n.confidence?"Know your exact HS code? Help us show you more precise data":"Want to see data for a specific HS code?",placeholder:"Enter 4-6 digit HS code (e.g., 8517, 847130)"},transparency:{dataSource:l?"specific":"fallback",accuracyNote:"high"===n.confidence?`High confidence match based on: ${n.matchedKeywords.slice(0,3).join(", ")}`:`Fallback classification - we found ${n.score} keyword matches`,improvementNote:"This platform learns from user corrections to improve accuracy",tradeDataNote:l?`Showing data for HS ${n.hsCode} from our trade database`:`Showing ${n.industry} industry overview with $${(d?.tradeValue/1e6)?.toFixed(1)}M+ trade value`}};(0,c.PN)("Classification completed",{industry:n.industry,confidence:n.confidence,dataSource:u.transparency.dataSource,userCanImprove:n.userCanImprove}),a.json(u)}catch(e){(0,c.H)("Intelligent classification error",{error:e.message,stack:e.stack}),a.status(500).json({error:"Classification failed",message:"Unable to classify product",fallback:{industry:"Electronics",message:"Showing electronics industry data as fallback",userCanImprove:!0}})}}!function(){var e=Error("Cannot find module '../../lib/transparent-hs-classifier.js'");throw e.code="MODULE_NOT_FOUND",e}();let d=(0,n.l)(t,"default"),l=(0,n.l)(t,"config"),u=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/intelligent-classification",pathname:"/api/intelligent-classification",bundlePath:"",filename:""},userland:t})}};var a=require("../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[4222,9475,7309],()=>__webpack_exec__(3323));module.exports=r})();