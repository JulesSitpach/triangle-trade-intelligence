"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/database-structure-test";
exports.ids = ["pages/api/database-structure-test"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdatabase-structure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdatabase-structure-test.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdatabase-structure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdatabase-structure-test.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_database_structure_test_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/database-structure-test.js */ \"(api)/./pages/api/database-structure-test.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_database_structure_test_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_database_structure_test_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/database-structure-test\",\n        pathname: \"/api/database-structure-test\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_database_structure_test_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmRhdGFiYXNlLXN0cnVjdHVyZS10ZXN0JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZkYXRhYmFzZS1zdHJ1Y3R1cmUtdGVzdC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNtRTtBQUNuRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsa0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGtFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaWFuZ2xlLWludGVsbGlnZW5jZS1wbGF0Zm9ybS8/NmZiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2RhdGFiYXNlLXN0cnVjdHVyZS10ZXN0LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZGF0YWJhc2Utc3RydWN0dXJlLXRlc3RcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kYXRhYmFzZS1zdHJ1Y3R1cmUtdGVzdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdatabase-structure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdatabase-structure-test.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/environment-validation.js":
/*!***************************************!*\
  !*** ./lib/environment-validation.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   getSecurityStatus: () => (/* binding */ getSecurityStatus),\n/* harmony export */   getSupabaseConfig: () => (/* binding */ getSupabaseConfig),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   safeLog: () => (/* binding */ safeLog),\n/* harmony export */   validateAPIKeysSecurity: () => (/* binding */ validateAPIKeysSecurity),\n/* harmony export */   validateEnvironment: () => (/* binding */ validateEnvironment),\n/* harmony export */   validateSecretSecurity: () => (/* binding */ validateSecretSecurity)\n/* harmony export */ });\n/**\n * Environment Variable Validation and Configuration\n * Centralized validation for production readiness\n */ // Required environment variables for production\n// Split by client/server because client can't see server-only vars\nconst CLIENT_REQUIRED_ENV_VARS = [\n    \"NEXT_PUBLIC_SUPABASE_URL\",\n    \"NEXT_PUBLIC_SUPABASE_ANON_KEY\"\n];\nconst SERVER_REQUIRED_ENV_VARS = [\n    \"NEXT_PUBLIC_SUPABASE_URL\",\n    \"NEXT_PUBLIC_SUPABASE_ANON_KEY\",\n    \"SUPABASE_SERVICE_ROLE_KEY\",\n    \"JWT_SECRET\",\n    \"NEXTAUTH_SECRET\"\n];\nconst SERVER_RECOMMENDED_ENV_VARS = [\n    \"ANTHROPIC_API_KEY\",\n    \"COMTRADE_API_KEY\",\n    \"SHIPPO_API_KEY\",\n    \"STRIPE_SECRET_KEY\"\n];\n// Optional environment variables with defaults\nconst OPTIONAL_ENV_VARS = {\n    NODE_ENV: \"development\",\n    NEXT_PUBLIC_APP_URL: \"http://localhost:3000\"\n};\n/**\n * Validate all required environment variables are present\n * @throws {Error} If any required variable is missing\n */ function validateEnvironment() {\n    // Skip validation entirely on client-side to avoid errors\n    if (false) {}\n    // Server-side validation\n    const missing = SERVER_REQUIRED_ENV_VARS.filter((key)=>!process.env[key]);\n    if (missing.length > 0) {\n        throw new Error(`Missing required server-side environment variables: ${missing.join(\", \")}`);\n    }\n    // Note: Using console.log here as this runs before logger is initialized\n    console.log(\"✅ All required environment variables are present\");\n}\n/**\n * Get environment variable with validation\n * @param {string} key - Environment variable key\n * @param {boolean} required - Whether the variable is required\n * @returns {string} Environment variable value\n */ function getEnvVar(key, required = true) {\n    const value = process.env[key];\n    if (required && !value) {\n        throw new Error(`Missing required environment variable: ${key}`);\n    }\n    return value || OPTIONAL_ENV_VARS[key];\n}\n/**\n * Check if running in production\n */ function isProduction() {\n    return \"development\" === \"production\";\n}\n/**\n * Check if running in development\n */ function isDevelopment() {\n    return \"development\" === \"development\";\n}\n/**\n * Safe logging that respects environment\n * Only logs in development unless force is true\n */ function safeLog(message, data = null, force = false) {\n    if (isDevelopment() || force) {\n        if (data) {\n            // Note: Using console.log here as this is used for bootstrap logging\n            console.log(message, data);\n        } else {\n            console.log(message);\n        }\n    }\n}\n/**\n * Get Supabase configuration based on environment\n */ function getSupabaseConfig() {\n    const url = getEnvVar(\"NEXT_PUBLIC_SUPABASE_URL\");\n    // Use service role key on server, anon key on client\n    const key =  false ? 0 : getEnvVar(\"SUPABASE_SERVICE_ROLE_KEY\", false) || getEnvVar(\"NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n    return {\n        url,\n        key\n    };\n}\n/**\n * Validate API keys are not exposed and check for security issues\n */ function validateAPIKeysSecurity() {\n    const sensitiveKeys = [\n        \"SUPABASE_SERVICE_ROLE_KEY\",\n        \"ANTHROPIC_API_KEY\",\n        \"STRIPE_SECRET_KEY\",\n        \"COMTRADE_API_KEY\",\n        \"SHIPPO_API_KEY\",\n        \"JWT_SECRET\",\n        \"NEXTAUTH_SECRET\",\n        \"ENTERPRISE_MASTER_KEY\"\n    ];\n    if (false) {}\n}\n/**\n * Check for dangerous default/template values\n */ function validateSecretSecurity() {\n    const dangerousPatterns = [\n        {\n            key: \"JWT_SECRET\",\n            patterns: [\n                \"your-super-secure\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"NEXTAUTH_SECRET\",\n            patterns: [\n                \"your-nextauth-secret\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"ENTERPRISE_MASTER_KEY\",\n            patterns: [\n                \"triangle-intelligence-enterprise\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"ANTHROPIC_API_KEY\",\n            patterns: [\n                \"your-key-here\",\n                \"REPLACE_WITH\"\n            ]\n        }\n    ];\n    const warnings = [];\n    dangerousPatterns.forEach(({ key, patterns })=>{\n        if (process.env[key]) {\n            patterns.forEach((pattern)=>{\n                if (process.env[key].includes(pattern)) {\n                    warnings.push(`${key} appears to use default/template value`);\n                }\n            });\n        }\n    });\n    // Check secret strength\n    if (process.env.JWT_SECRET && process.env.JWT_SECRET.length < 32) {\n        warnings.push(\"JWT_SECRET is too short (minimum 32 characters)\");\n    }\n    return warnings;\n}\n/**\n * Get comprehensive security status\n */ function getSecurityStatus() {\n    const warnings = validateSecretSecurity();\n    const requiredMissing = SERVER_REQUIRED_ENV_VARS.filter((key)=>!process.env[key]);\n    const recommendedMissing = SERVER_RECOMMENDED_ENV_VARS.filter((key)=>!process.env[key]);\n    return {\n        status: requiredMissing.length === 0 && warnings.length === 0 ? \"secure\" : \"needs_attention\",\n        requiredMissing,\n        recommendedMissing,\n        securityWarnings: warnings,\n        lastChecked: new Date().toISOString()\n    };\n}\n// Auto-validate on import in development (SERVER-SIDE ONLY)\nif (isDevelopment() && \"undefined\" === \"undefined\") {\n    try {\n        validateEnvironment();\n        validateAPIKeysSecurity();\n    } catch (error) {\n        // Note: Using console.error here as this is critical bootstrap error\n        console.error(\"❌ Environment validation failed:\", error.message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUIsU0FBU0UsT0FBTyxDQUFDQyxDQUFBQTtnQkFDZixJQUFJekIsUUFBUUMsR0FBRyxDQUFDRixJQUFJLENBQUMyQixRQUFRLENBQUNELFVBQVU7b0JBQ3RDRixTQUFTSSxJQUFJLENBQUMsQ0FBQyxFQUFFNUIsSUFBSSxzQ0FBc0MsQ0FBQztnQkFDOUQ7WUFDRjtRQUNGO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEIsSUFBSUMsUUFBUUMsR0FBRyxDQUFDMkIsVUFBVSxJQUFJNUIsUUFBUUMsR0FBRyxDQUFDMkIsVUFBVSxDQUFDMUIsTUFBTSxHQUFHLElBQUk7UUFDaEVxQixTQUFTSSxJQUFJLENBQUM7SUFDaEI7SUFFQSxPQUFPSjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTTTtJQUNkLE1BQU1OLFdBQVdIO0lBQ2pCLE1BQU1VLGtCQUFrQnpDLHlCQUF5QlMsTUFBTSxDQUFDQyxDQUFBQSxNQUFPLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0YsSUFBSTtJQUNoRixNQUFNZ0MscUJBQXFCekMsNEJBQTRCUSxNQUFNLENBQUNDLENBQUFBLE1BQU8sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDRixJQUFJO0lBRXRGLE9BQU87UUFDTGlDLFFBQVFGLGdCQUFnQjVCLE1BQU0sS0FBSyxLQUFLcUIsU0FBU3JCLE1BQU0sS0FBSyxJQUFJLFdBQVc7UUFDM0U0QjtRQUNBQztRQUNBRSxrQkFBa0JWO1FBQ2xCVyxhQUFhLElBQUlDLE9BQU9DLFdBQVc7SUFDckM7QUFDRjtBQUVBLDREQUE0RDtBQUM1RCxJQUFJM0IsbUJBQW1CLGdCQUFrQixhQUFhO0lBQ3BELElBQUk7UUFDRmY7UUFDQXNCO0lBQ0YsRUFBRSxPQUFPcUIsT0FBTztRQUNkLHFFQUFxRTtRQUNyRTFDLFFBQVEwQyxLQUFLLENBQUMsb0NBQW9DQSxNQUFNMUIsT0FBTztJQUNqRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vbGliL2Vudmlyb25tZW50LXZhbGlkYXRpb24uanM/OTk2YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudmlyb25tZW50IFZhcmlhYmxlIFZhbGlkYXRpb24gYW5kIENvbmZpZ3VyYXRpb25cbiAqIENlbnRyYWxpemVkIHZhbGlkYXRpb24gZm9yIHByb2R1Y3Rpb24gcmVhZGluZXNzXG4gKi9cblxuLy8gUmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBwcm9kdWN0aW9uXG4vLyBTcGxpdCBieSBjbGllbnQvc2VydmVyIGJlY2F1c2UgY2xpZW50IGNhbid0IHNlZSBzZXJ2ZXItb25seSB2YXJzXG5jb25zdCBDTElFTlRfUkVRVUlSRURfRU5WX1ZBUlMgPSBbXG4gICdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwnLFxuICAnTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknXG5dXG5cbmNvbnN0IFNFUlZFUl9SRVFVSVJFRF9FTlZfVkFSUyA9IFtcbiAgJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCcsXG4gICdORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWScsIFxuICAnU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWScsXG4gICdKV1RfU0VDUkVUJyxcbiAgJ05FWFRBVVRIX1NFQ1JFVCdcbl1cblxuY29uc3QgU0VSVkVSX1JFQ09NTUVOREVEX0VOVl9WQVJTID0gW1xuICAnQU5USFJPUElDX0FQSV9LRVknLFxuICAnQ09NVFJBREVfQVBJX0tFWScsIFxuICAnU0hJUFBPX0FQSV9LRVknLFxuICAnU1RSSVBFX1NFQ1JFVF9LRVknXG5dXG5cbi8vIE9wdGlvbmFsIGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGRlZmF1bHRzXG5jb25zdCBPUFRJT05BTF9FTlZfVkFSUyA9IHtcbiAgTk9ERV9FTlY6ICdkZXZlbG9wbWVudCcsXG4gIE5FWFRfUFVCTElDX0FQUF9VUkw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG59XG5cbi8qKlxuICogVmFsaWRhdGUgYWxsIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcHJlc2VudFxuICogQHRocm93cyB7RXJyb3J9IElmIGFueSByZXF1aXJlZCB2YXJpYWJsZSBpcyBtaXNzaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUVudmlyb25tZW50KCkge1xuICAvLyBTa2lwIHZhbGlkYXRpb24gZW50aXJlbHkgb24gY2xpZW50LXNpZGUgdG8gYXZvaWQgZXJyb3JzXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUubG9nKCfinIUgRW52aXJvbm1lbnQgdmFsaWRhdGlvbiBza2lwcGVkIG9uIGNsaWVudC1zaWRlJylcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gU2VydmVyLXNpZGUgdmFsaWRhdGlvblxuICBjb25zdCBtaXNzaW5nID0gU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTLmZpbHRlcihrZXkgPT4gIXByb2Nlc3MuZW52W2tleV0pXG4gIFxuICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIHNlcnZlci1zaWRlIGVudmlyb25tZW50IHZhcmlhYmxlczogJHttaXNzaW5nLmpvaW4oJywgJyl9YClcbiAgfVxuICBcbiAgLy8gTm90ZTogVXNpbmcgY29uc29sZS5sb2cgaGVyZSBhcyB0aGlzIHJ1bnMgYmVmb3JlIGxvZ2dlciBpcyBpbml0aWFsaXplZFxuICBjb25zb2xlLmxvZygn4pyFIEFsbCByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHByZXNlbnQnKVxufVxuXG4vKipcbiAqIEdldCBlbnZpcm9ubWVudCB2YXJpYWJsZSB3aXRoIHZhbGlkYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBFbnZpcm9ubWVudCB2YXJpYWJsZSBrZXlcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZWQgLSBXaGV0aGVyIHRoZSB2YXJpYWJsZSBpcyByZXF1aXJlZFxuICogQHJldHVybnMge3N0cmluZ30gRW52aXJvbm1lbnQgdmFyaWFibGUgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVudlZhcihrZXksIHJlcXVpcmVkID0gdHJ1ZSkge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleV1cbiAgXG4gIGlmIChyZXF1aXJlZCAmJiAhdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGU6ICR7a2V5fWApXG4gIH1cbiAgXG4gIHJldHVybiB2YWx1ZSB8fCBPUFRJT05BTF9FTlZfVkFSU1trZXldXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcnVubmluZyBpbiBwcm9kdWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb2R1Y3Rpb24oKSB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcnVubmluZyBpbiBkZXZlbG9wbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEZXZlbG9wbWVudCgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnXG59XG5cbi8qKlxuICogU2FmZSBsb2dnaW5nIHRoYXQgcmVzcGVjdHMgZW52aXJvbm1lbnRcbiAqIE9ubHkgbG9ncyBpbiBkZXZlbG9wbWVudCB1bmxlc3MgZm9yY2UgaXMgdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZUxvZyhtZXNzYWdlLCBkYXRhID0gbnVsbCwgZm9yY2UgPSBmYWxzZSkge1xuICBpZiAoaXNEZXZlbG9wbWVudCgpIHx8IGZvcmNlKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIC8vIE5vdGU6IFVzaW5nIGNvbnNvbGUubG9nIGhlcmUgYXMgdGhpcyBpcyB1c2VkIGZvciBib290c3RyYXAgbG9nZ2luZ1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgU3VwYWJhc2UgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3VwYWJhc2VDb25maWcoKSB7XG4gIGNvbnN0IHVybCA9IGdldEVudlZhcignTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJylcbiAgXG4gIC8vIFVzZSBzZXJ2aWNlIHJvbGUga2V5IG9uIHNlcnZlciwgYW5vbiBrZXkgb24gY2xpZW50XG4gIGNvbnN0IGtleSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyBnZXRFbnZWYXIoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgICA6IGdldEVudlZhcignU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWScsIGZhbHNlKSB8fCBnZXRFbnZWYXIoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgXG4gIHJldHVybiB7IHVybCwga2V5IH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBBUEkga2V5cyBhcmUgbm90IGV4cG9zZWQgYW5kIGNoZWNrIGZvciBzZWN1cml0eSBpc3N1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQVBJS2V5c1NlY3VyaXR5KCkge1xuICBjb25zdCBzZW5zaXRpdmVLZXlzID0gW1xuICAgICdTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJyxcbiAgICAnQU5USFJPUElDX0FQSV9LRVknLFxuICAgICdTVFJJUEVfU0VDUkVUX0tFWScsXG4gICAgJ0NPTVRSQURFX0FQSV9LRVknLFxuICAgICdTSElQUE9fQVBJX0tFWScsXG4gICAgJ0pXVF9TRUNSRVQnLFxuICAgICdORVhUQVVUSF9TRUNSRVQnLFxuICAgICdFTlRFUlBSSVNFX01BU1RFUl9LRVknXG4gIF1cbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIENoZWNrIGlmIGFueSBzZW5zaXRpdmUga2V5cyBhcmUgYWNjZXNzaWJsZSBvbiBjbGllbnRcbiAgICBjb25zdCBleHBvc2VkS2V5cyA9IHNlbnNpdGl2ZUtleXMuZmlsdGVyKGtleSA9PiB3aW5kb3cucHJvY2Vzcz8uZW52Py5ba2V5XSlcbiAgICBcbiAgICBpZiAoZXhwb3NlZEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTRUNVUklUWSBWSU9MQVRJT046IFNlbnNpdGl2ZSBrZXlzIGV4cG9zZWQgdG8gY2xpZW50OiAke2V4cG9zZWRLZXlzLmpvaW4oJywgJyl9YClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZGFuZ2Vyb3VzIGRlZmF1bHQvdGVtcGxhdGUgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNlY3JldFNlY3VyaXR5KCkge1xuICBjb25zdCBkYW5nZXJvdXNQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ0pXVF9TRUNSRVQnLCBwYXR0ZXJuczogWyd5b3VyLXN1cGVyLXNlY3VyZScsICdnZW5lcmF0ZS1uZXcnLCAnUkVQTEFDRV9XSVRIJ10gfSxcbiAgICB7IGtleTogJ05FWFRBVVRIX1NFQ1JFVCcsIHBhdHRlcm5zOiBbJ3lvdXItbmV4dGF1dGgtc2VjcmV0JywgJ2dlbmVyYXRlLW5ldycsICdSRVBMQUNFX1dJVEgnXSB9LFxuICAgIHsga2V5OiAnRU5URVJQUklTRV9NQVNURVJfS0VZJywgcGF0dGVybnM6IFsndHJpYW5nbGUtaW50ZWxsaWdlbmNlLWVudGVycHJpc2UnLCAnZ2VuZXJhdGUtbmV3JywgJ1JFUExBQ0VfV0lUSCddIH0sXG4gICAgeyBrZXk6ICdBTlRIUk9QSUNfQVBJX0tFWScsIHBhdHRlcm5zOiBbJ3lvdXIta2V5LWhlcmUnLCAnUkVQTEFDRV9XSVRIJ10gfVxuICBdXG5cbiAgY29uc3Qgd2FybmluZ3MgPSBbXVxuICBcbiAgZGFuZ2Vyb3VzUGF0dGVybnMuZm9yRWFjaCgoeyBrZXksIHBhdHRlcm5zIH0pID0+IHtcbiAgICBpZiAocHJvY2Vzcy5lbnZba2V5XSkge1xuICAgICAgcGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52W2tleV0uaW5jbHVkZXMocGF0dGVybikpIHtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKGAke2tleX0gYXBwZWFycyB0byB1c2UgZGVmYXVsdC90ZW1wbGF0ZSB2YWx1ZWApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIENoZWNrIHNlY3JldCBzdHJlbmd0aFxuICBpZiAocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCAmJiBwcm9jZXNzLmVudi5KV1RfU0VDUkVULmxlbmd0aCA8IDMyKSB7XG4gICAgd2FybmluZ3MucHVzaCgnSldUX1NFQ1JFVCBpcyB0b28gc2hvcnQgKG1pbmltdW0gMzIgY2hhcmFjdGVycyknKVxuICB9XG5cbiAgcmV0dXJuIHdhcm5pbmdzXG59XG5cbi8qKlxuICogR2V0IGNvbXByZWhlbnNpdmUgc2VjdXJpdHkgc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWN1cml0eVN0YXR1cygpIHtcbiAgY29uc3Qgd2FybmluZ3MgPSB2YWxpZGF0ZVNlY3JldFNlY3VyaXR5KClcbiAgY29uc3QgcmVxdWlyZWRNaXNzaW5nID0gU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTLmZpbHRlcihrZXkgPT4gIXByb2Nlc3MuZW52W2tleV0pXG4gIGNvbnN0IHJlY29tbWVuZGVkTWlzc2luZyA9IFNFUlZFUl9SRUNPTU1FTkRFRF9FTlZfVkFSUy5maWx0ZXIoa2V5ID0+ICFwcm9jZXNzLmVudltrZXldKVxuICBcbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6IHJlcXVpcmVkTWlzc2luZy5sZW5ndGggPT09IDAgJiYgd2FybmluZ3MubGVuZ3RoID09PSAwID8gJ3NlY3VyZScgOiAnbmVlZHNfYXR0ZW50aW9uJyxcbiAgICByZXF1aXJlZE1pc3NpbmcsXG4gICAgcmVjb21tZW5kZWRNaXNzaW5nLFxuICAgIHNlY3VyaXR5V2FybmluZ3M6IHdhcm5pbmdzLFxuICAgIGxhc3RDaGVja2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfVxufVxuXG4vLyBBdXRvLXZhbGlkYXRlIG9uIGltcG9ydCBpbiBkZXZlbG9wbWVudCAoU0VSVkVSLVNJREUgT05MWSlcbmlmIChpc0RldmVsb3BtZW50KCkgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZUVudmlyb25tZW50KClcbiAgICB2YWxpZGF0ZUFQSUtleXNTZWN1cml0eSgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTm90ZTogVXNpbmcgY29uc29sZS5lcnJvciBoZXJlIGFzIHRoaXMgaXMgY3JpdGljYWwgYm9vdHN0cmFwIGVycm9yXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVudmlyb25tZW50IHZhbGlkYXRpb24gZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gIH1cbn0iXSwibmFtZXMiOlsiQ0xJRU5UX1JFUVVJUkVEX0VOVl9WQVJTIiwiU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTIiwiU0VSVkVSX1JFQ09NTUVOREVEX0VOVl9WQVJTIiwiT1BUSU9OQUxfRU5WX1ZBUlMiLCJOT0RFX0VOViIsIk5FWFRfUFVCTElDX0FQUF9VUkwiLCJ2YWxpZGF0ZUVudmlyb25tZW50IiwiY29uc29sZSIsImxvZyIsIm1pc3NpbmciLCJmaWx0ZXIiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwibGVuZ3RoIiwiRXJyb3IiLCJqb2luIiwiZ2V0RW52VmFyIiwicmVxdWlyZWQiLCJ2YWx1ZSIsImlzUHJvZHVjdGlvbiIsImlzRGV2ZWxvcG1lbnQiLCJzYWZlTG9nIiwibWVzc2FnZSIsImRhdGEiLCJmb3JjZSIsImdldFN1cGFiYXNlQ29uZmlnIiwidXJsIiwidmFsaWRhdGVBUElLZXlzU2VjdXJpdHkiLCJzZW5zaXRpdmVLZXlzIiwiZXhwb3NlZEtleXMiLCJ3aW5kb3ciLCJ2YWxpZGF0ZVNlY3JldFNlY3VyaXR5IiwiZGFuZ2Vyb3VzUGF0dGVybnMiLCJwYXR0ZXJucyIsIndhcm5pbmdzIiwiZm9yRWFjaCIsInBhdHRlcm4iLCJpbmNsdWRlcyIsInB1c2giLCJKV1RfU0VDUkVUIiwiZ2V0U2VjdXJpdHlTdGF0dXMiLCJyZXF1aXJlZE1pc3NpbmciLCJyZWNvbW1lbmRlZE1pc3NpbmciLCJzdGF0dXMiLCJzZWN1cml0eVdhcm5pbmdzIiwibGFzdENoZWNrZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/environment-validation.js\n");

/***/ }),

/***/ "(api)/./lib/memory-optimizer.js":
/*!*********************************!*\
  !*** ./lib/memory-optimizer.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getMemoryOptimizer: () => (/* binding */ getMemoryOptimizer),\n/* harmony export */   memoryOptimizedAPICall: () => (/* binding */ memoryOptimizedAPICall),\n/* harmony export */   useMemoryOptimizedEffect: () => (/* binding */ useMemoryOptimizedEffect)\n/* harmony export */ });\n/* harmony import */ var _production_logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./production-logger.js */ \"(api)/./lib/production-logger.js\");\n/**\n * 🧠 MEMORY OPTIMIZER - PRODUCTION MEMORY MANAGEMENT\n * \n * Comprehensive memory management system for Triangle Intelligence Platform\n * Eliminates memory leaks while maintaining 30-second real-time updates\n * \n * KEY FEATURES:\n * ✅ Process event listener cleanup\n * ✅ React component unmount handlers  \n * ✅ API call cancellation with AbortController\n * ✅ RSS monitoring cleanup\n * ✅ Beast Master resource management\n * ✅ Database connection pooling optimization\n * ✅ Automatic memory pressure detection\n */ \nclass MemoryOptimizer {\n    constructor(){\n        this.lastLogTime = 0;\n        this.cleanupHandlers = new Map();\n        this.intervalCleanup = new Map();\n        this.timeoutCleanup = new Map();\n        this.eventListeners = new Map();\n        this.abortControllers = new Set();\n        // Environment-based configuration (CRITICAL FIX)\n        this.memoryPressureThreshold = (parseInt(process.env.MEMORY_PRESSURE_THRESHOLD_MB) || 512) * 1024 * 1024;\n        this.gcThreshold = (parseInt(process.env.MEMORY_GC_THRESHOLD_MB) || 768) * 1024 * 1024;\n        this.monitorInterval = parseInt(process.env.MEMORY_MONITOR_INTERVAL_MS) || 60000;\n        this.isInitialized = false;\n        this.lastCleanupTime = 0;\n        this.initializeMemoryMonitoring();\n    }\n    /**\n   * Initialize memory monitoring and cleanup systems\n   */ initializeMemoryMonitoring() {\n        if (this.isInitialized) return;\n        // Only run in server environment\n        if (typeof process === \"undefined\" || \"undefined\" !== \"undefined\") {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory Optimizer: Browser environment detected, limited functionality enabled\");\n            this.isInitialized = true;\n            return;\n        }\n        // Monitor memory usage based on environment configuration\n        const memoryMonitor = setInterval(()=>{\n            this.checkMemoryPressure();\n        }, this.monitorInterval);\n        this.registerCleanup(\"memoryMonitor\", ()=>clearInterval(memoryMonitor));\n        // Process cleanup handlers\n        const processCleanup = ()=>{\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory Optimizer: Initiating graceful shutdown\");\n            this.performGlobalCleanup();\n            process.exit(0);\n        };\n        // Register process event listeners with proper cleanup\n        process.removeAllListeners(\"SIGTERM\");\n        process.removeAllListeners(\"SIGINT\");\n        process.removeAllListeners(\"uncaughtException\");\n        process.removeAllListeners(\"unhandledRejection\");\n        process.once(\"SIGTERM\", processCleanup);\n        process.once(\"SIGINT\", processCleanup);\n        process.on(\"uncaughtException\", (error)=>{\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(\"Uncaught Exception - initiating cleanup\", {\n                error: error.message\n            });\n            this.performGlobalCleanup();\n            process.exit(1);\n        });\n        process.on(\"unhandledRejection\", (reason, promise)=>{\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(\"Unhandled Promise Rejection - cleaning up\", {\n                reason: reason?.message || reason,\n                stack: reason?.stack\n            });\n        });\n        this.isInitialized = true;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory Optimizer initialized successfully\");\n    }\n    /**\n   * Register cleanup handler for a specific resource\n   */ registerCleanup(id, cleanupFunction) {\n        if (this.cleanupHandlers.has(id)) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(`Cleanup handler already registered for: ${id}`);\n            this.cleanupHandlers.get(id)(); // Clean up old one first\n        }\n        this.cleanupHandlers.set(id, cleanupFunction);\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Registered cleanup handler: ${id}`);\n    }\n    /**\n   * Register interval with automatic cleanup\n   */ registerInterval(id, intervalId) {\n        if (this.intervalCleanup.has(id)) {\n            clearInterval(this.intervalCleanup.get(id));\n        }\n        this.intervalCleanup.set(id, intervalId);\n        // Auto-cleanup after 10 minutes to prevent accumulation\n        setTimeout(()=>{\n            if (this.intervalCleanup.has(id)) {\n                clearInterval(this.intervalCleanup.get(id));\n                this.intervalCleanup.delete(id);\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Auto-cleaned interval: ${id}`);\n            }\n        }, 600000); // 10 minutes\n    }\n    /**\n   * Register timeout with automatic cleanup\n   */ registerTimeout(id, timeoutId) {\n        if (this.timeoutCleanup.has(id)) {\n            clearTimeout(this.timeoutCleanup.get(id));\n        }\n        this.timeoutCleanup.set(id, timeoutId);\n    }\n    /**\n   * Create and register AbortController for API calls\n   */ createAbortController(timeoutMs = 30000) {\n        const controller = new AbortController();\n        this.abortControllers.add(controller);\n        // Auto-abort after timeout to prevent hanging requests\n        const timeoutId = setTimeout(()=>{\n            if (!controller.signal.aborted) {\n                controller.abort();\n                this.abortControllers.delete(controller);\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Auto-aborted API request due to timeout\");\n            }\n        }, timeoutMs);\n        // Clean up timeout when controller is aborted\n        controller.signal.addEventListener(\"abort\", ()=>{\n            clearTimeout(timeoutId);\n            this.abortControllers.delete(controller);\n        });\n        return controller;\n    }\n    /**\n   * React useEffect cleanup helper\n   */ createReactCleanup() {\n        const cleanupFunctions = [];\n        return {\n            register: (cleanupFn)=>{\n                cleanupFunctions.push(cleanupFn);\n            },\n            cleanup: ()=>{\n                cleanupFunctions.forEach((fn, index)=>{\n                    try {\n                        fn();\n                    } catch (error) {\n                        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(`React cleanup function ${index} failed`, {\n                            error: error.message\n                        });\n                    }\n                });\n                cleanupFunctions.length = 0;\n            }\n        };\n    }\n    /**\n   * Check memory pressure and trigger cleanup if needed - OPTIMIZED\n   */ checkMemoryPressure() {\n        // Only run memory checks in server environment\n        if (typeof process === \"undefined\" || \"undefined\" !== \"undefined\") {\n            return;\n        }\n        const memUsage = process.memoryUsage();\n        const heapUsed = memUsage.heapUsed;\n        const external = memUsage.external;\n        const totalMemory = heapUsed + external;\n        const totalMemoryMB = Math.round(totalMemory / 1024 / 1024);\n        const thresholdMB = Math.round(this.memoryPressureThreshold / 1024 / 1024);\n        const gcThresholdMB = Math.round(this.gcThreshold / 1024 / 1024);\n        // CRITICAL FIX: Only log when threshold exceeded or every 5 minutes\n        const now = Date.now();\n        const shouldLog = totalMemory > this.memoryPressureThreshold || now - this.lastLogTime > 300000;\n        if (shouldLog) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory usage check\", {\n                heapUsed: Math.round(heapUsed / 1024 / 1024) + \"MB\",\n                external: Math.round(external / 1024 / 1024) + \"MB\",\n                total: totalMemoryMB + \"MB\",\n                threshold: thresholdMB + \"MB\",\n                gcThreshold: gcThresholdMB + \"MB\"\n            });\n            this.lastLogTime = now;\n        }\n        // Trigger cleanup if memory usage is high AND enough time has passed\n        if (totalMemory > this.memoryPressureThreshold && now - this.lastCleanupTime > 60000) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"Memory pressure detected, triggering cleanup\", {\n                memoryMB: totalMemoryMB,\n                thresholdMB: thresholdMB\n            });\n            this.performMemoryCleanup();\n            this.lastCleanupTime = now;\n        }\n        // Force garbage collection if memory is very high\n        if (totalMemory > this.gcThreshold && global.gc) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"High memory usage, forcing garbage collection\", {\n                memoryMB: totalMemoryMB,\n                gcThresholdMB: gcThresholdMB\n            });\n            global.gc();\n        }\n    }\n    /**\n   * Perform memory cleanup operations\n   */ performMemoryCleanup() {\n        let cleaned = 0;\n        // Clean up old intervals (older than 5 minutes)\n        const now = Date.now();\n        for (const [id, data] of this.intervalCleanup.entries()){\n            if (typeof data === \"object\" && data.timestamp && now - data.timestamp > 300000) {\n                clearInterval(data.intervalId);\n                this.intervalCleanup.delete(id);\n                cleaned++;\n            }\n        }\n        // Clean up old timeouts\n        for (const [id, timeoutId] of this.timeoutCleanup.entries()){\n            clearTimeout(timeoutId);\n            this.timeoutCleanup.delete(id);\n            cleaned++;\n        }\n        // Abort old API requests\n        for (const controller of this.abortControllers){\n            if (!controller.signal.aborted) {\n                controller.abort();\n                cleaned++;\n            }\n        }\n        this.abortControllers.clear();\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Memory cleanup completed, cleaned ${cleaned} resources`);\n    }\n    /**\n   * Perform global cleanup on shutdown\n   */ performGlobalCleanup() {\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Performing global cleanup\");\n        // Run all registered cleanup handlers\n        for (const [id, cleanupFn] of this.cleanupHandlers.entries()){\n            try {\n                cleanupFn();\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Cleaned up: ${id}`);\n            } catch (error) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(`Cleanup failed for: ${id}`, {\n                    error: error.message\n                });\n            }\n        }\n        // Clear all intervals and timeouts\n        for (const intervalId of this.intervalCleanup.values()){\n            clearInterval(typeof intervalId === \"object\" ? intervalId.intervalId : intervalId);\n        }\n        for (const timeoutId of this.timeoutCleanup.values()){\n            clearTimeout(timeoutId);\n        }\n        // Abort all pending requests\n        for (const controller of this.abortControllers){\n            controller.abort();\n        }\n        // Clear maps\n        this.cleanupHandlers.clear();\n        this.intervalCleanup.clear();\n        this.timeoutCleanup.clear();\n        this.abortControllers.clear();\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Global cleanup completed\");\n    }\n    /**\n   * Get memory statistics\n   */ getMemoryStats() {\n        if (typeof process === \"undefined\" || \"undefined\" !== \"undefined\") {\n            return {\n                available: false,\n                environment: \"browser\",\n                cleanupHandlers: this.cleanupHandlers.size,\n                activeIntervals: this.intervalCleanup.size,\n                activeTimeouts: this.timeoutCleanup.size,\n                activeRequests: this.abortControllers.size\n            };\n        }\n        const memUsage = process.memoryUsage();\n        return {\n            available: true,\n            environment: \"server\",\n            heap: {\n                used: Math.round(memUsage.heapUsed / 1024 / 1024),\n                total: Math.round(memUsage.heapTotal / 1024 / 1024)\n            },\n            external: Math.round(memUsage.external / 1024 / 1024),\n            cleanupHandlers: this.cleanupHandlers.size,\n            activeIntervals: this.intervalCleanup.size,\n            activeTimeouts: this.timeoutCleanup.size,\n            activeRequests: this.abortControllers.size\n        };\n    }\n}\n// Global singleton instance\nlet memoryOptimizer = null;\nfunction getMemoryOptimizer() {\n    if (!memoryOptimizer) {\n        memoryOptimizer = new MemoryOptimizer();\n    }\n    return memoryOptimizer;\n}\n// React hook for memory-optimized effects\nfunction useMemoryOptimizedEffect(effect, deps) {\n    const React = __webpack_require__(/*! react */ \"react\");\n    React.useEffect(()=>{\n        const optimizer = getMemoryOptimizer();\n        const reactCleanup = optimizer.createReactCleanup();\n        const cleanup = effect(reactCleanup.register);\n        return ()=>{\n            reactCleanup.cleanup();\n            if (cleanup) cleanup();\n        };\n    }, deps);\n}\n// API call helper with automatic cleanup\nasync function memoryOptimizedAPICall(url, options = {}, timeoutMs = 30000) {\n    const optimizer = getMemoryOptimizer();\n    const controller = optimizer.createAbortController(timeoutMs);\n    try {\n        const response = await fetch(url, {\n            ...options,\n            signal: controller.signal\n        });\n        return response;\n    } catch (error) {\n        if (error.name === \"AbortError\") {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"API call was aborted\", {\n                url\n            });\n            throw new Error(\"Request timeout\");\n        }\n        throw error;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getMemoryOptimizer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTXNGLElBQUksS0FBSyxjQUFjO1lBQy9CeEgsOERBQU9BLENBQUMsd0JBQXdCO2dCQUFFb0g7WUFBSTtZQUN0QyxNQUFNLElBQUlLLE1BQU07UUFDbEI7UUFDQSxNQUFNdkY7SUFDUjtBQUNGO0FBRUEsaUVBQWV3RSxrQkFBa0JBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlhbmdsZS1pbnRlbGxpZ2VuY2UtcGxhdGZvcm0vLi9saWIvbWVtb3J5LW9wdGltaXplci5qcz85Y2Q1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog8J+noCBNRU1PUlkgT1BUSU1JWkVSIC0gUFJPRFVDVElPTiBNRU1PUlkgTUFOQUdFTUVOVFxuICogXG4gKiBDb21wcmVoZW5zaXZlIG1lbW9yeSBtYW5hZ2VtZW50IHN5c3RlbSBmb3IgVHJpYW5nbGUgSW50ZWxsaWdlbmNlIFBsYXRmb3JtXG4gKiBFbGltaW5hdGVzIG1lbW9yeSBsZWFrcyB3aGlsZSBtYWludGFpbmluZyAzMC1zZWNvbmQgcmVhbC10aW1lIHVwZGF0ZXNcbiAqIFxuICogS0VZIEZFQVRVUkVTOlxuICog4pyFIFByb2Nlc3MgZXZlbnQgbGlzdGVuZXIgY2xlYW51cFxuICog4pyFIFJlYWN0IGNvbXBvbmVudCB1bm1vdW50IGhhbmRsZXJzICBcbiAqIOKchSBBUEkgY2FsbCBjYW5jZWxsYXRpb24gd2l0aCBBYm9ydENvbnRyb2xsZXJcbiAqIOKchSBSU1MgbW9uaXRvcmluZyBjbGVhbnVwXG4gKiDinIUgQmVhc3QgTWFzdGVyIHJlc291cmNlIG1hbmFnZW1lbnRcbiAqIOKchSBEYXRhYmFzZSBjb25uZWN0aW9uIHBvb2xpbmcgb3B0aW1pemF0aW9uXG4gKiDinIUgQXV0b21hdGljIG1lbW9yeSBwcmVzc3VyZSBkZXRlY3Rpb25cbiAqL1xuXG5pbXBvcnQgeyBsb2dJbmZvLCBsb2dFcnJvciwgbG9nV2FybiB9IGZyb20gJy4vcHJvZHVjdGlvbi1sb2dnZXIuanMnO1xuXG5jbGFzcyBNZW1vcnlPcHRpbWl6ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxhc3RMb2dUaW1lID0gMDtcbiAgICB0aGlzLmNsZWFudXBIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmludGVydmFsQ2xlYW51cCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnRpbWVvdXRDbGVhbnVwID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzID0gbmV3IFNldCgpO1xuICAgIFxuICAgIC8vIEVudmlyb25tZW50LWJhc2VkIGNvbmZpZ3VyYXRpb24gKENSSVRJQ0FMIEZJWClcbiAgICB0aGlzLm1lbW9yeVByZXNzdXJlVGhyZXNob2xkID0gKHBhcnNlSW50KHByb2Nlc3MuZW52Lk1FTU9SWV9QUkVTU1VSRV9USFJFU0hPTERfTUIpIHx8IDUxMikgKiAxMDI0ICogMTAyNDtcbiAgICB0aGlzLmdjVGhyZXNob2xkID0gKHBhcnNlSW50KHByb2Nlc3MuZW52Lk1FTU9SWV9HQ19USFJFU0hPTERfTUIpIHx8IDc2OCkgKiAxMDI0ICogMTAyNDtcbiAgICB0aGlzLm1vbml0b3JJbnRlcnZhbCA9IHBhcnNlSW50KHByb2Nlc3MuZW52Lk1FTU9SWV9NT05JVE9SX0lOVEVSVkFMX01TKSB8fCA2MDAwMDtcbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmxhc3RDbGVhbnVwVGltZSA9IDA7XG4gICAgXG4gICAgdGhpcy5pbml0aWFsaXplTWVtb3J5TW9uaXRvcmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWVtb3J5IG1vbml0b3JpbmcgYW5kIGNsZWFudXAgc3lzdGVtc1xuICAgKi9cbiAgaW5pdGlhbGl6ZU1lbW9yeU1vbml0b3JpbmcoKSB7XG4gICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuO1xuXG4gICAgLy8gT25seSBydW4gaW4gc2VydmVyIGVudmlyb25tZW50XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbG9nSW5mbygnTWVtb3J5IE9wdGltaXplcjogQnJvd3NlciBlbnZpcm9ubWVudCBkZXRlY3RlZCwgbGltaXRlZCBmdW5jdGlvbmFsaXR5IGVuYWJsZWQnKTtcbiAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTW9uaXRvciBtZW1vcnkgdXNhZ2UgYmFzZWQgb24gZW52aXJvbm1lbnQgY29uZmlndXJhdGlvblxuICAgIGNvbnN0IG1lbW9yeU1vbml0b3IgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrTWVtb3J5UHJlc3N1cmUoKTtcbiAgICB9LCB0aGlzLm1vbml0b3JJbnRlcnZhbCk7XG4gICAgXG4gICAgdGhpcy5yZWdpc3RlckNsZWFudXAoJ21lbW9yeU1vbml0b3InLCAoKSA9PiBjbGVhckludGVydmFsKG1lbW9yeU1vbml0b3IpKTtcblxuICAgIC8vIFByb2Nlc3MgY2xlYW51cCBoYW5kbGVyc1xuICAgIGNvbnN0IHByb2Nlc3NDbGVhbnVwID0gKCkgPT4ge1xuICAgICAgbG9nSW5mbygnTWVtb3J5IE9wdGltaXplcjogSW5pdGlhdGluZyBncmFjZWZ1bCBzaHV0ZG93bicpO1xuICAgICAgdGhpcy5wZXJmb3JtR2xvYmFsQ2xlYW51cCgpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH07XG5cbiAgICAvLyBSZWdpc3RlciBwcm9jZXNzIGV2ZW50IGxpc3RlbmVycyB3aXRoIHByb3BlciBjbGVhbnVwXG4gICAgcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ1NJR1RFUk0nKTtcbiAgICBwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycygnU0lHSU5UJyk7XG4gICAgcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3VuY2F1Z2h0RXhjZXB0aW9uJyk7XG4gICAgcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3VuaGFuZGxlZFJlamVjdGlvbicpO1xuXG4gICAgcHJvY2Vzcy5vbmNlKCdTSUdURVJNJywgcHJvY2Vzc0NsZWFudXApO1xuICAgIHByb2Nlc3Mub25jZSgnU0lHSU5UJywgcHJvY2Vzc0NsZWFudXApO1xuICAgIFxuICAgIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgKGVycm9yKSA9PiB7XG4gICAgICBsb2dFcnJvcignVW5jYXVnaHQgRXhjZXB0aW9uIC0gaW5pdGlhdGluZyBjbGVhbnVwJywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgIHRoaXMucGVyZm9ybUdsb2JhbENsZWFudXAoKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcblxuICAgIHByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgICAgIGxvZ0Vycm9yKCdVbmhhbmRsZWQgUHJvbWlzZSBSZWplY3Rpb24gLSBjbGVhbmluZyB1cCcsIHsgXG4gICAgICAgIHJlYXNvbjogcmVhc29uPy5tZXNzYWdlIHx8IHJlYXNvbixcbiAgICAgICAgc3RhY2s6IHJlYXNvbj8uc3RhY2sgXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgbG9nSW5mbygnTWVtb3J5IE9wdGltaXplciBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBjbGVhbnVwIGhhbmRsZXIgZm9yIGEgc3BlY2lmaWMgcmVzb3VyY2VcbiAgICovXG4gIHJlZ2lzdGVyQ2xlYW51cChpZCwgY2xlYW51cEZ1bmN0aW9uKSB7XG4gICAgaWYgKHRoaXMuY2xlYW51cEhhbmRsZXJzLmhhcyhpZCkpIHtcbiAgICAgIGxvZ1dhcm4oYENsZWFudXAgaGFuZGxlciBhbHJlYWR5IHJlZ2lzdGVyZWQgZm9yOiAke2lkfWApO1xuICAgICAgdGhpcy5jbGVhbnVwSGFuZGxlcnMuZ2V0KGlkKSgpOyAvLyBDbGVhbiB1cCBvbGQgb25lIGZpcnN0XG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xlYW51cEhhbmRsZXJzLnNldChpZCwgY2xlYW51cEZ1bmN0aW9uKTtcbiAgICBsb2dJbmZvKGBSZWdpc3RlcmVkIGNsZWFudXAgaGFuZGxlcjogJHtpZH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBpbnRlcnZhbCB3aXRoIGF1dG9tYXRpYyBjbGVhbnVwXG4gICAqL1xuICByZWdpc3RlckludGVydmFsKGlkLCBpbnRlcnZhbElkKSB7XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmhhcyhpZCkpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbENsZWFudXAuZ2V0KGlkKSk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaW50ZXJ2YWxDbGVhbnVwLnNldChpZCwgaW50ZXJ2YWxJZCk7XG4gICAgXG4gICAgLy8gQXV0by1jbGVhbnVwIGFmdGVyIDEwIG1pbnV0ZXMgdG8gcHJldmVudCBhY2N1bXVsYXRpb25cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmludGVydmFsQ2xlYW51cC5oYXMoaWQpKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbENsZWFudXAuZ2V0KGlkKSk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmRlbGV0ZShpZCk7XG4gICAgICAgIGxvZ0luZm8oYEF1dG8tY2xlYW5lZCBpbnRlcnZhbDogJHtpZH1gKTtcbiAgICAgIH1cbiAgICB9LCA2MDAwMDApOyAvLyAxMCBtaW51dGVzXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgdGltZW91dCB3aXRoIGF1dG9tYXRpYyBjbGVhbnVwXG4gICAqL1xuICByZWdpc3RlclRpbWVvdXQoaWQsIHRpbWVvdXRJZCkge1xuICAgIGlmICh0aGlzLnRpbWVvdXRDbGVhbnVwLmhhcyhpZCkpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRDbGVhbnVwLmdldChpZCkpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnRpbWVvdXRDbGVhbnVwLnNldChpZCwgdGltZW91dElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIHJlZ2lzdGVyIEFib3J0Q29udHJvbGxlciBmb3IgQVBJIGNhbGxzXG4gICAqL1xuICBjcmVhdGVBYm9ydENvbnRyb2xsZXIodGltZW91dE1zID0gMzAwMDApIHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5hZGQoY29udHJvbGxlcik7XG5cbiAgICAvLyBBdXRvLWFib3J0IGFmdGVyIHRpbWVvdXQgdG8gcHJldmVudCBoYW5naW5nIHJlcXVlc3RzXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIWNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZGVsZXRlKGNvbnRyb2xsZXIpO1xuICAgICAgICBsb2dJbmZvKCdBdXRvLWFib3J0ZWQgQVBJIHJlcXVlc3QgZHVlIHRvIHRpbWVvdXQnKTtcbiAgICAgIH1cbiAgICB9LCB0aW1lb3V0TXMpO1xuXG4gICAgLy8gQ2xlYW4gdXAgdGltZW91dCB3aGVuIGNvbnRyb2xsZXIgaXMgYWJvcnRlZFxuICAgIGNvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuZGVsZXRlKGNvbnRyb2xsZXIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gIH1cblxuICAvKipcbiAgICogUmVhY3QgdXNlRWZmZWN0IGNsZWFudXAgaGVscGVyXG4gICAqL1xuICBjcmVhdGVSZWFjdENsZWFudXAoKSB7XG4gICAgY29uc3QgY2xlYW51cEZ1bmN0aW9ucyA9IFtdO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICByZWdpc3RlcjogKGNsZWFudXBGbikgPT4ge1xuICAgICAgICBjbGVhbnVwRnVuY3Rpb25zLnB1c2goY2xlYW51cEZuKTtcbiAgICAgIH0sXG4gICAgICBjbGVhbnVwOiAoKSA9PiB7XG4gICAgICAgIGNsZWFudXBGdW5jdGlvbnMuZm9yRWFjaCgoZm4sIGluZGV4KSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ0Vycm9yKGBSZWFjdCBjbGVhbnVwIGZ1bmN0aW9uICR7aW5kZXh9IGZhaWxlZGAsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY2xlYW51cEZ1bmN0aW9ucy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgbWVtb3J5IHByZXNzdXJlIGFuZCB0cmlnZ2VyIGNsZWFudXAgaWYgbmVlZGVkIC0gT1BUSU1JWkVEXG4gICAqL1xuICBjaGVja01lbW9yeVByZXNzdXJlKCkge1xuICAgIC8vIE9ubHkgcnVuIG1lbW9yeSBjaGVja3MgaW4gc2VydmVyIGVudmlyb25tZW50XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1lbVVzYWdlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpO1xuICAgIGNvbnN0IGhlYXBVc2VkID0gbWVtVXNhZ2UuaGVhcFVzZWQ7XG4gICAgY29uc3QgZXh0ZXJuYWwgPSBtZW1Vc2FnZS5leHRlcm5hbDtcbiAgICBjb25zdCB0b3RhbE1lbW9yeSA9IGhlYXBVc2VkICsgZXh0ZXJuYWw7XG4gICAgXG4gICAgY29uc3QgdG90YWxNZW1vcnlNQiA9IE1hdGgucm91bmQodG90YWxNZW1vcnkgLyAxMDI0IC8gMTAyNCk7XG4gICAgY29uc3QgdGhyZXNob2xkTUIgPSBNYXRoLnJvdW5kKHRoaXMubWVtb3J5UHJlc3N1cmVUaHJlc2hvbGQgLyAxMDI0IC8gMTAyNCk7XG4gICAgY29uc3QgZ2NUaHJlc2hvbGRNQiA9IE1hdGgucm91bmQodGhpcy5nY1RocmVzaG9sZCAvIDEwMjQgLyAxMDI0KTtcblxuICAgIC8vIENSSVRJQ0FMIEZJWDogT25seSBsb2cgd2hlbiB0aHJlc2hvbGQgZXhjZWVkZWQgb3IgZXZlcnkgNSBtaW51dGVzXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBzaG91bGRMb2cgPSB0b3RhbE1lbW9yeSA+IHRoaXMubWVtb3J5UHJlc3N1cmVUaHJlc2hvbGQgfHwgKG5vdyAtIHRoaXMubGFzdExvZ1RpbWUgPiAzMDAwMDApO1xuICAgIFxuICAgIGlmIChzaG91bGRMb2cpIHtcbiAgICAgIGxvZ0luZm8oJ01lbW9yeSB1c2FnZSBjaGVjaycsIHtcbiAgICAgICAgaGVhcFVzZWQ6IE1hdGgucm91bmQoaGVhcFVzZWQgLyAxMDI0IC8gMTAyNCkgKyAnTUInLFxuICAgICAgICBleHRlcm5hbDogTWF0aC5yb3VuZChleHRlcm5hbCAvIDEwMjQgLyAxMDI0KSArICdNQicsXG4gICAgICAgIHRvdGFsOiB0b3RhbE1lbW9yeU1CICsgJ01CJyxcbiAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGRNQiArICdNQicsXG4gICAgICAgIGdjVGhyZXNob2xkOiBnY1RocmVzaG9sZE1CICsgJ01CJ1xuICAgICAgfSk7XG4gICAgICB0aGlzLmxhc3RMb2dUaW1lID0gbm93O1xuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgY2xlYW51cCBpZiBtZW1vcnkgdXNhZ2UgaXMgaGlnaCBBTkQgZW5vdWdoIHRpbWUgaGFzIHBhc3NlZFxuICAgIGlmICh0b3RhbE1lbW9yeSA+IHRoaXMubWVtb3J5UHJlc3N1cmVUaHJlc2hvbGQgJiYgKG5vdyAtIHRoaXMubGFzdENsZWFudXBUaW1lID4gNjAwMDApKSB7XG4gICAgICBsb2dXYXJuKCdNZW1vcnkgcHJlc3N1cmUgZGV0ZWN0ZWQsIHRyaWdnZXJpbmcgY2xlYW51cCcsIHtcbiAgICAgICAgbWVtb3J5TUI6IHRvdGFsTWVtb3J5TUIsXG4gICAgICAgIHRocmVzaG9sZE1COiB0aHJlc2hvbGRNQlxuICAgICAgfSk7XG4gICAgICB0aGlzLnBlcmZvcm1NZW1vcnlDbGVhbnVwKCk7XG4gICAgICB0aGlzLmxhc3RDbGVhbnVwVGltZSA9IG5vdztcbiAgICB9XG5cbiAgICAvLyBGb3JjZSBnYXJiYWdlIGNvbGxlY3Rpb24gaWYgbWVtb3J5IGlzIHZlcnkgaGlnaFxuICAgIGlmICh0b3RhbE1lbW9yeSA+IHRoaXMuZ2NUaHJlc2hvbGQgJiYgZ2xvYmFsLmdjKSB7XG4gICAgICBsb2dXYXJuKCdIaWdoIG1lbW9yeSB1c2FnZSwgZm9yY2luZyBnYXJiYWdlIGNvbGxlY3Rpb24nLCB7XG4gICAgICAgIG1lbW9yeU1COiB0b3RhbE1lbW9yeU1CLFxuICAgICAgICBnY1RocmVzaG9sZE1COiBnY1RocmVzaG9sZE1CXG4gICAgICB9KTtcbiAgICAgIGdsb2JhbC5nYygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIG1lbW9yeSBjbGVhbnVwIG9wZXJhdGlvbnNcbiAgICovXG4gIHBlcmZvcm1NZW1vcnlDbGVhbnVwKCkge1xuICAgIGxldCBjbGVhbmVkID0gMDtcblxuICAgIC8vIENsZWFuIHVwIG9sZCBpbnRlcnZhbHMgKG9sZGVyIHRoYW4gNSBtaW51dGVzKVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgZm9yIChjb25zdCBbaWQsIGRhdGFdIG9mIHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmVudHJpZXMoKSkge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhLnRpbWVzdGFtcCAmJiBub3cgLSBkYXRhLnRpbWVzdGFtcCA+IDMwMDAwMCkge1xuICAgICAgICBjbGVhckludGVydmFsKGRhdGEuaW50ZXJ2YWxJZCk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmRlbGV0ZShpZCk7XG4gICAgICAgIGNsZWFuZWQrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCBvbGQgdGltZW91dHNcbiAgICBmb3IgKGNvbnN0IFtpZCwgdGltZW91dElkXSBvZiB0aGlzLnRpbWVvdXRDbGVhbnVwLmVudHJpZXMoKSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB0aGlzLnRpbWVvdXRDbGVhbnVwLmRlbGV0ZShpZCk7XG4gICAgICBjbGVhbmVkKys7XG4gICAgfVxuXG4gICAgLy8gQWJvcnQgb2xkIEFQSSByZXF1ZXN0c1xuICAgIGZvciAoY29uc3QgY29udHJvbGxlciBvZiB0aGlzLmFib3J0Q29udHJvbGxlcnMpIHtcbiAgICAgIGlmICghY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIGNsZWFuZWQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmNsZWFyKCk7XG5cbiAgICBsb2dJbmZvKGBNZW1vcnkgY2xlYW51cCBjb21wbGV0ZWQsIGNsZWFuZWQgJHtjbGVhbmVkfSByZXNvdXJjZXNgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGdsb2JhbCBjbGVhbnVwIG9uIHNodXRkb3duXG4gICAqL1xuICBwZXJmb3JtR2xvYmFsQ2xlYW51cCgpIHtcbiAgICBsb2dJbmZvKCdQZXJmb3JtaW5nIGdsb2JhbCBjbGVhbnVwJyk7XG5cbiAgICAvLyBSdW4gYWxsIHJlZ2lzdGVyZWQgY2xlYW51cCBoYW5kbGVyc1xuICAgIGZvciAoY29uc3QgW2lkLCBjbGVhbnVwRm5dIG9mIHRoaXMuY2xlYW51cEhhbmRsZXJzLmVudHJpZXMoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYW51cEZuKCk7XG4gICAgICAgIGxvZ0luZm8oYENsZWFuZWQgdXA6ICR7aWR9YCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dFcnJvcihgQ2xlYW51cCBmYWlsZWQgZm9yOiAke2lkfWAsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgYWxsIGludGVydmFscyBhbmQgdGltZW91dHNcbiAgICBmb3IgKGNvbnN0IGludGVydmFsSWQgb2YgdGhpcy5pbnRlcnZhbENsZWFudXAudmFsdWVzKCkpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodHlwZW9mIGludGVydmFsSWQgPT09ICdvYmplY3QnID8gaW50ZXJ2YWxJZC5pbnRlcnZhbElkIDogaW50ZXJ2YWxJZCk7XG4gICAgfVxuICAgIFxuICAgIGZvciAoY29uc3QgdGltZW91dElkIG9mIHRoaXMudGltZW91dENsZWFudXAudmFsdWVzKCkpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cblxuICAgIC8vIEFib3J0IGFsbCBwZW5kaW5nIHJlcXVlc3RzXG4gICAgZm9yIChjb25zdCBjb250cm9sbGVyIG9mIHRoaXMuYWJvcnRDb250cm9sbGVycykge1xuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIG1hcHNcbiAgICB0aGlzLmNsZWFudXBIYW5kbGVycy5jbGVhcigpO1xuICAgIHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmNsZWFyKCk7XG4gICAgdGhpcy50aW1lb3V0Q2xlYW51cC5jbGVhcigpO1xuICAgIHRoaXMuYWJvcnRDb250cm9sbGVycy5jbGVhcigpO1xuXG4gICAgbG9nSW5mbygnR2xvYmFsIGNsZWFudXAgY29tcGxldGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1lbW9yeSBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXRNZW1vcnlTdGF0cygpIHtcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgYXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgZW52aXJvbm1lbnQ6ICdicm93c2VyJyxcbiAgICAgICAgY2xlYW51cEhhbmRsZXJzOiB0aGlzLmNsZWFudXBIYW5kbGVycy5zaXplLFxuICAgICAgICBhY3RpdmVJbnRlcnZhbHM6IHRoaXMuaW50ZXJ2YWxDbGVhbnVwLnNpemUsXG4gICAgICAgIGFjdGl2ZVRpbWVvdXRzOiB0aGlzLnRpbWVvdXRDbGVhbnVwLnNpemUsXG4gICAgICAgIGFjdGl2ZVJlcXVlc3RzOiB0aGlzLmFib3J0Q29udHJvbGxlcnMuc2l6ZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBtZW1Vc2FnZSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKTtcbiAgICByZXR1cm4ge1xuICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgZW52aXJvbm1lbnQ6ICdzZXJ2ZXInLFxuICAgICAgaGVhcDoge1xuICAgICAgICB1c2VkOiBNYXRoLnJvdW5kKG1lbVVzYWdlLmhlYXBVc2VkIC8gMTAyNCAvIDEwMjQpLFxuICAgICAgICB0b3RhbDogTWF0aC5yb3VuZChtZW1Vc2FnZS5oZWFwVG90YWwgLyAxMDI0IC8gMTAyNClcbiAgICAgIH0sXG4gICAgICBleHRlcm5hbDogTWF0aC5yb3VuZChtZW1Vc2FnZS5leHRlcm5hbCAvIDEwMjQgLyAxMDI0KSxcbiAgICAgIGNsZWFudXBIYW5kbGVyczogdGhpcy5jbGVhbnVwSGFuZGxlcnMuc2l6ZSxcbiAgICAgIGFjdGl2ZUludGVydmFsczogdGhpcy5pbnRlcnZhbENsZWFudXAuc2l6ZSxcbiAgICAgIGFjdGl2ZVRpbWVvdXRzOiB0aGlzLnRpbWVvdXRDbGVhbnVwLnNpemUsXG4gICAgICBhY3RpdmVSZXF1ZXN0czogdGhpcy5hYm9ydENvbnRyb2xsZXJzLnNpemVcbiAgICB9O1xuICB9XG59XG5cbi8vIEdsb2JhbCBzaW5nbGV0b24gaW5zdGFuY2VcbmxldCBtZW1vcnlPcHRpbWl6ZXIgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVtb3J5T3B0aW1pemVyKCkge1xuICBpZiAoIW1lbW9yeU9wdGltaXplcikge1xuICAgIG1lbW9yeU9wdGltaXplciA9IG5ldyBNZW1vcnlPcHRpbWl6ZXIoKTtcbiAgfVxuICByZXR1cm4gbWVtb3J5T3B0aW1pemVyO1xufVxuXG4vLyBSZWFjdCBob29rIGZvciBtZW1vcnktb3B0aW1pemVkIGVmZmVjdHNcbmV4cG9ydCBmdW5jdGlvbiB1c2VNZW1vcnlPcHRpbWl6ZWRFZmZlY3QoZWZmZWN0LCBkZXBzKSB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgb3B0aW1pemVyID0gZ2V0TWVtb3J5T3B0aW1pemVyKCk7XG4gICAgY29uc3QgcmVhY3RDbGVhbnVwID0gb3B0aW1pemVyLmNyZWF0ZVJlYWN0Q2xlYW51cCgpO1xuICAgIFxuICAgIGNvbnN0IGNsZWFudXAgPSBlZmZlY3QocmVhY3RDbGVhbnVwLnJlZ2lzdGVyKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVhY3RDbGVhbnVwLmNsZWFudXAoKTtcbiAgICAgIGlmIChjbGVhbnVwKSBjbGVhbnVwKCk7XG4gICAgfTtcbiAgfSwgZGVwcyk7XG59XG5cbi8vIEFQSSBjYWxsIGhlbHBlciB3aXRoIGF1dG9tYXRpYyBjbGVhbnVwXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWVtb3J5T3B0aW1pemVkQVBJQ2FsbCh1cmwsIG9wdGlvbnMgPSB7fSwgdGltZW91dE1zID0gMzAwMDApIHtcbiAgY29uc3Qgb3B0aW1pemVyID0gZ2V0TWVtb3J5T3B0aW1pemVyKCk7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBvcHRpbWl6ZXIuY3JlYXRlQWJvcnRDb250cm9sbGVyKHRpbWVvdXRNcyk7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBsb2dXYXJuKCdBUEkgY2FsbCB3YXMgYWJvcnRlZCcsIHsgdXJsIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVvdXQnKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0TWVtb3J5T3B0aW1pemVyOyJdLCJuYW1lcyI6WyJsb2dJbmZvIiwibG9nRXJyb3IiLCJsb2dXYXJuIiwiTWVtb3J5T3B0aW1pemVyIiwiY29uc3RydWN0b3IiLCJsYXN0TG9nVGltZSIsImNsZWFudXBIYW5kbGVycyIsIk1hcCIsImludGVydmFsQ2xlYW51cCIsInRpbWVvdXRDbGVhbnVwIiwiZXZlbnRMaXN0ZW5lcnMiLCJhYm9ydENvbnRyb2xsZXJzIiwiU2V0IiwibWVtb3J5UHJlc3N1cmVUaHJlc2hvbGQiLCJwYXJzZUludCIsInByb2Nlc3MiLCJlbnYiLCJNRU1PUllfUFJFU1NVUkVfVEhSRVNIT0xEX01CIiwiZ2NUaHJlc2hvbGQiLCJNRU1PUllfR0NfVEhSRVNIT0xEX01CIiwibW9uaXRvckludGVydmFsIiwiTUVNT1JZX01PTklUT1JfSU5URVJWQUxfTVMiLCJpc0luaXRpYWxpemVkIiwibGFzdENsZWFudXBUaW1lIiwiaW5pdGlhbGl6ZU1lbW9yeU1vbml0b3JpbmciLCJtZW1vcnlNb25pdG9yIiwic2V0SW50ZXJ2YWwiLCJjaGVja01lbW9yeVByZXNzdXJlIiwicmVnaXN0ZXJDbGVhbnVwIiwiY2xlYXJJbnRlcnZhbCIsInByb2Nlc3NDbGVhbnVwIiwicGVyZm9ybUdsb2JhbENsZWFudXAiLCJleGl0IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib25jZSIsIm9uIiwiZXJyb3IiLCJtZXNzYWdlIiwicmVhc29uIiwicHJvbWlzZSIsInN0YWNrIiwiaWQiLCJjbGVhbnVwRnVuY3Rpb24iLCJoYXMiLCJnZXQiLCJzZXQiLCJyZWdpc3RlckludGVydmFsIiwiaW50ZXJ2YWxJZCIsInNldFRpbWVvdXQiLCJkZWxldGUiLCJyZWdpc3RlclRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJjbGVhclRpbWVvdXQiLCJjcmVhdGVBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0TXMiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiYWRkIiwic2lnbmFsIiwiYWJvcnRlZCIsImFib3J0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZVJlYWN0Q2xlYW51cCIsImNsZWFudXBGdW5jdGlvbnMiLCJyZWdpc3RlciIsImNsZWFudXBGbiIsInB1c2giLCJjbGVhbnVwIiwiZm9yRWFjaCIsImZuIiwiaW5kZXgiLCJsZW5ndGgiLCJtZW1Vc2FnZSIsIm1lbW9yeVVzYWdlIiwiaGVhcFVzZWQiLCJleHRlcm5hbCIsInRvdGFsTWVtb3J5IiwidG90YWxNZW1vcnlNQiIsIk1hdGgiLCJyb3VuZCIsInRocmVzaG9sZE1CIiwiZ2NUaHJlc2hvbGRNQiIsIm5vdyIsIkRhdGUiLCJzaG91bGRMb2ciLCJ0b3RhbCIsInRocmVzaG9sZCIsIm1lbW9yeU1CIiwicGVyZm9ybU1lbW9yeUNsZWFudXAiLCJnbG9iYWwiLCJnYyIsImNsZWFuZWQiLCJkYXRhIiwiZW50cmllcyIsInRpbWVzdGFtcCIsImNsZWFyIiwidmFsdWVzIiwiZ2V0TWVtb3J5U3RhdHMiLCJhdmFpbGFibGUiLCJlbnZpcm9ubWVudCIsInNpemUiLCJhY3RpdmVJbnRlcnZhbHMiLCJhY3RpdmVUaW1lb3V0cyIsImFjdGl2ZVJlcXVlc3RzIiwiaGVhcCIsInVzZWQiLCJoZWFwVG90YWwiLCJtZW1vcnlPcHRpbWl6ZXIiLCJnZXRNZW1vcnlPcHRpbWl6ZXIiLCJ1c2VNZW1vcnlPcHRpbWl6ZWRFZmZlY3QiLCJlZmZlY3QiLCJkZXBzIiwiUmVhY3QiLCJyZXF1aXJlIiwidXNlRWZmZWN0Iiwib3B0aW1pemVyIiwicmVhY3RDbGVhbnVwIiwibWVtb3J5T3B0aW1pemVkQVBJQ2FsbCIsInVybCIsIm9wdGlvbnMiLCJyZXNwb25zZSIsImZldGNoIiwibmFtZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/memory-optimizer.js\n");

/***/ }),

/***/ "(api)/./lib/production-logger.js":
/*!**********************************!*\
  !*** ./lib/production-logger.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logAPICall: () => (/* binding */ logAPICall),\n/* harmony export */   logBusiness: () => (/* binding */ logBusiness),\n/* harmony export */   logDBQuery: () => (/* binding */ logDBQuery),\n/* harmony export */   logDebug: () => (/* binding */ logDebug),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logInfo: () => (/* binding */ logInfo),\n/* harmony export */   logPerformance: () => (/* binding */ logPerformance),\n/* harmony export */   logSecurity: () => (/* binding */ logSecurity),\n/* harmony export */   logWarn: () => (/* binding */ logWarn),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var _environment_validation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./environment-validation.js */ \"(api)/./lib/environment-validation.js\");\n/**\n * Production-Safe Logging System\n * Handles logging with environment awareness and security\n */ \n// Log levels\nconst LOG_LEVELS = {\n    ERROR: 0,\n    WARN: 1,\n    INFO: 2,\n    DEBUG: 3,\n    TRACE: 4\n};\nclass ProductionLogger {\n    constructor(){\n        this.level = (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? LOG_LEVELS.WARN : LOG_LEVELS.DEBUG;\n        this.sensitivePatterns = [\n            /sk-[a-zA-Z0-9_-]+/,\n            /pk_[a-zA-Z0-9_-]+/,\n            /eyJ[a-zA-Z0-9_-]+/,\n            /password/i,\n            /secret/i,\n            /token/i,\n            /key.*=.*[a-zA-Z0-9_-]{20,}/ // Key-value pairs with long values\n        ];\n        // Asynchronous logging queue for performance\n        this.logQueue = [];\n        this.maxQueueSize = 1000;\n        this.flushInterval = 5000 // 5 seconds\n        ;\n        this.isFlushingLogs = false;\n        // Start periodic log flushing in production\n        if ((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)()) {\n            setInterval(()=>{\n                this.flushLogsAsync();\n            }, this.flushInterval);\n        }\n    }\n    /**\n   * Sanitize sensitive data from logs\n   */ sanitize(data) {\n        if (typeof data === \"string\") {\n            let sanitized = data;\n            this.sensitivePatterns.forEach((pattern)=>{\n                sanitized = sanitized.replace(pattern, \"[REDACTED]\");\n            });\n            return sanitized;\n        }\n        if (typeof data === \"object\" && data !== null) {\n            const sanitized = Array.isArray(data) ? [] : {};\n            for (const [key, value] of Object.entries(data)){\n                const keyLower = key.toLowerCase();\n                if (keyLower.includes(\"password\") || keyLower.includes(\"secret\") || keyLower.includes(\"token\") || keyLower.includes(\"key\")) {\n                    sanitized[key] = \"[REDACTED]\";\n                } else {\n                    sanitized[key] = this.sanitize(value);\n                }\n            }\n            return sanitized;\n        }\n        return data;\n    }\n    /**\n   * Format log message\n   */ formatMessage(level, message, data, metadata) {\n        const timestamp = new Date().toISOString();\n        const sanitizedData = data ? this.sanitize(data) : null;\n        const logEntry = {\n            timestamp,\n            level,\n            message,\n            ...sanitizedData && {\n                data: sanitizedData\n            },\n            ...metadata && {\n                metadata\n            }\n        };\n        return (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? JSON.stringify(logEntry) : logEntry;\n    }\n    /**\n   * Log error messages (always synchronous for errors)\n   */ error(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.ERROR) {\n            const formatted = this.formatMessage(\"ERROR\", message, data, metadata);\n            console.error((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"❌\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log warning messages (asynchronous in production)\n   */ warn(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.WARN) {\n            const logEntry = {\n                level: \"WARN\",\n                message,\n                data: this.sanitize(data),\n                metadata,\n                timestamp: new Date().toISOString()\n            };\n            if ((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)()) {\n                this.queueLog(logEntry);\n            } else {\n                console.warn(\"⚠️\", message, this.sanitize(data));\n            }\n        }\n    }\n    /**\n   * Log info messages (asynchronous in production)\n   */ info(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.INFO) {\n            const logEntry = {\n                level: \"INFO\",\n                message,\n                data: this.sanitize(data),\n                metadata,\n                timestamp: new Date().toISOString()\n            };\n            if ((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)()) {\n                this.queueLog(logEntry);\n            } else {\n                console.log(\"ℹ️\", message, this.sanitize(data));\n            }\n        }\n    }\n    /**\n   * Log debug messages (only in development, always synchronous)\n   */ debug(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.DEBUG && (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) {\n            console.log(\"\\uD83D\\uDC1B\", message, this.sanitize(data));\n        }\n    }\n    /**\n   * Log trace messages (only in development)\n   */ trace(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.TRACE && (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) {\n            const formatted = this.formatMessage(\"TRACE\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"\\uD83D\\uDD0D\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log performance metrics\n   */ performance(operation, duration, metadata = null) {\n        this.info(`Performance: ${operation}`, {\n            duration: `${duration}ms`\n        }, metadata);\n    }\n    /**\n   * Log API calls\n   */ apiCall(method, endpoint, duration, status) {\n        this.info(`API: ${method} ${endpoint}`, {\n            duration: `${duration}ms`,\n            status,\n            type: \"api_call\"\n        });\n    }\n    /**\n   * Log database queries\n   */ dbQuery(table, operation, duration, recordCount = null) {\n        this.debug(`DB: ${operation} on ${table}`, {\n            duration: `${duration}ms`,\n            recordCount,\n            type: \"db_query\"\n        });\n    }\n    /**\n   * Log security events\n   */ security(event, details = null) {\n        this.warn(`Security: ${event}`, details, {\n            type: \"security_event\"\n        });\n    }\n    /**\n   * Log business events\n   */ business(event, details = null) {\n        this.info(`Business: ${event}`, details, {\n            type: \"business_event\"\n        });\n    }\n}\n// Create singleton instance\nconst logger = new ProductionLogger();\n// Convenience functions for common use cases\nconst logError = (message, data, metadata)=>logger.error(message, data, metadata);\nconst logWarn = (message, data, metadata)=>logger.warn(message, data, metadata);\nconst logInfo = (message, data, metadata)=>logger.info(message, data, metadata);\nconst logDebug = (message, data, metadata)=>logger.debug(message, data, metadata);\nconst logPerformance = (operation, duration, metadata)=>logger.performance(operation, duration, metadata);\nconst logAPICall = (method, endpoint, duration, status)=>logger.apiCall(method, endpoint, duration, status);\nconst logDBQuery = (table, operation, duration, recordCount)=>logger.dbQuery(table, operation, duration, recordCount);\nconst logSecurity = (event, details)=>logger.security(event, details);\nconst logBusiness = (event, details)=>logger.business(event, details);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTyxDQUFDQyxRQUFRQyxVQUFVSCxVQUFVSSxRQUFPO0FBQzdHLE1BQU1nQixhQUFhLENBQUNiLE9BQU9SLFdBQVdDLFVBQVVRLGNBQWdCSyxPQUFPUCxPQUFPLENBQUNDLE9BQU9SLFdBQVdDLFVBQVVRLGFBQVk7QUFDdkgsTUFBTWEsY0FBYyxDQUFDWCxPQUFPQyxVQUFZRSxPQUFPSixRQUFRLENBQUNDLE9BQU9DLFNBQVE7QUFDdkUsTUFBTVcsY0FBYyxDQUFDWixPQUFPQyxVQUFZRSxPQUFPRCxRQUFRLENBQUNGLE9BQU9DLFNBQVE7QUFFOUUsaUVBQWVFLE1BQU1BLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlhbmdsZS1pbnRlbGxpZ2VuY2UtcGxhdGZvcm0vLi9saWIvcHJvZHVjdGlvbi1sb2dnZXIuanM/ZTgzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb2R1Y3Rpb24tU2FmZSBMb2dnaW5nIFN5c3RlbVxuICogSGFuZGxlcyBsb2dnaW5nIHdpdGggZW52aXJvbm1lbnQgYXdhcmVuZXNzIGFuZCBzZWN1cml0eVxuICovXG5cbmltcG9ydCB7IGlzRGV2ZWxvcG1lbnQsIGlzUHJvZHVjdGlvbiB9IGZyb20gJy4vZW52aXJvbm1lbnQtdmFsaWRhdGlvbi5qcydcblxuLy8gTG9nIGxldmVsc1xuY29uc3QgTE9HX0xFVkVMUyA9IHtcbiAgRVJST1I6IDAsXG4gIFdBUk46IDEsXG4gIElORk86IDIsXG4gIERFQlVHOiAzLFxuICBUUkFDRTogNFxufVxuXG5jbGFzcyBQcm9kdWN0aW9uTG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sZXZlbCA9IGlzUHJvZHVjdGlvbigpID8gTE9HX0xFVkVMUy5XQVJOIDogTE9HX0xFVkVMUy5ERUJVR1xuICAgIHRoaXMuc2Vuc2l0aXZlUGF0dGVybnMgPSBbXG4gICAgICAvc2stW2EtekEtWjAtOV8tXSsvLCAvLyBBUEkga2V5cyBzdGFydGluZyB3aXRoIHNrLVxuICAgICAgL3BrX1thLXpBLVowLTlfLV0rLywgLy8gU3RyaXBlIHB1YmxpYyBrZXlzXG4gICAgICAvZXlKW2EtekEtWjAtOV8tXSsvLCAvLyBKV1QgdG9rZW5zXG4gICAgICAvcGFzc3dvcmQvaSxcbiAgICAgIC9zZWNyZXQvaSxcbiAgICAgIC90b2tlbi9pLFxuICAgICAgL2tleS4qPS4qW2EtekEtWjAtOV8tXXsyMCx9LyAvLyBLZXktdmFsdWUgcGFpcnMgd2l0aCBsb25nIHZhbHVlc1xuICAgIF1cbiAgICBcbiAgICAvLyBBc3luY2hyb25vdXMgbG9nZ2luZyBxdWV1ZSBmb3IgcGVyZm9ybWFuY2VcbiAgICB0aGlzLmxvZ1F1ZXVlID0gW11cbiAgICB0aGlzLm1heFF1ZXVlU2l6ZSA9IDEwMDBcbiAgICB0aGlzLmZsdXNoSW50ZXJ2YWwgPSA1MDAwIC8vIDUgc2Vjb25kc1xuICAgIHRoaXMuaXNGbHVzaGluZ0xvZ3MgPSBmYWxzZVxuICAgIFxuICAgIC8vIFN0YXJ0IHBlcmlvZGljIGxvZyBmbHVzaGluZyBpbiBwcm9kdWN0aW9uXG4gICAgaWYgKGlzUHJvZHVjdGlvbigpKSB7XG4gICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZmx1c2hMb2dzQXN5bmMoKVxuICAgICAgfSwgdGhpcy5mbHVzaEludGVydmFsKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSBzZW5zaXRpdmUgZGF0YSBmcm9tIGxvZ3NcbiAgICovXG4gIHNhbml0aXplKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZXQgc2FuaXRpemVkID0gZGF0YVxuICAgICAgdGhpcy5zZW5zaXRpdmVQYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZShwYXR0ZXJuLCAnW1JFREFDVEVEXScpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNhbml0aXplZFxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YSAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgc2FuaXRpemVkID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IFtdIDoge31cbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgY29uc3Qga2V5TG93ZXIgPSBrZXkudG9Mb3dlckNhc2UoKVxuICAgICAgICBcbiAgICAgICAgaWYgKGtleUxvd2VyLmluY2x1ZGVzKCdwYXNzd29yZCcpIHx8IFxuICAgICAgICAgICAga2V5TG93ZXIuaW5jbHVkZXMoJ3NlY3JldCcpIHx8IFxuICAgICAgICAgICAga2V5TG93ZXIuaW5jbHVkZXMoJ3Rva2VuJykgfHxcbiAgICAgICAgICAgIGtleUxvd2VyLmluY2x1ZGVzKCdrZXknKSkge1xuICAgICAgICAgIHNhbml0aXplZFtrZXldID0gJ1tSRURBQ1RFRF0nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuaXRpemVkW2tleV0gPSB0aGlzLnNhbml0aXplKHZhbHVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBzYW5pdGl6ZWRcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBsb2cgbWVzc2FnZVxuICAgKi9cbiAgZm9ybWF0TWVzc2FnZShsZXZlbCwgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICBjb25zdCBzYW5pdGl6ZWREYXRhID0gZGF0YSA/IHRoaXMuc2FuaXRpemUoZGF0YSkgOiBudWxsXG4gICAgXG4gICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICB0aW1lc3RhbXAsXG4gICAgICBsZXZlbCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICAuLi4oc2FuaXRpemVkRGF0YSAmJiB7IGRhdGE6IHNhbml0aXplZERhdGEgfSksXG4gICAgICAuLi4obWV0YWRhdGEgJiYgeyBtZXRhZGF0YSB9KVxuICAgIH1cblxuICAgIHJldHVybiBpc1Byb2R1Y3Rpb24oKSA/IEpTT04uc3RyaW5naWZ5KGxvZ0VudHJ5KSA6IGxvZ0VudHJ5XG4gIH1cblxuICAvKipcbiAgICogTG9nIGVycm9yIG1lc3NhZ2VzIChhbHdheXMgc3luY2hyb25vdXMgZm9yIGVycm9ycylcbiAgICovXG4gIGVycm9yKG1lc3NhZ2UsIGRhdGEgPSBudWxsLCBtZXRhZGF0YSA9IG51bGwpIHtcbiAgICBpZiAodGhpcy5sZXZlbCA+PSBMT0dfTEVWRUxTLkVSUk9SKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0VSUk9SJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLmVycm9yKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ+KdjCcsIGlzUHJvZHVjdGlvbigpID8gJycgOiBtZXNzYWdlLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIHdhcm5pbmcgbWVzc2FnZXMgKGFzeW5jaHJvbm91cyBpbiBwcm9kdWN0aW9uKVxuICAgKi9cbiAgd2FybihtZXNzYWdlLCBkYXRhID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPj0gTE9HX0xFVkVMUy5XQVJOKSB7XG4gICAgICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICAgICAgbGV2ZWw6ICdXQVJOJyxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YTogdGhpcy5zYW5pdGl6ZShkYXRhKSxcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICB0aGlzLnF1ZXVlTG9nKGxvZ0VudHJ5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8nLCBtZXNzYWdlLCB0aGlzLnNhbml0aXplKGRhdGEpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgaW5mbyBtZXNzYWdlcyAoYXN5bmNocm9ub3VzIGluIHByb2R1Y3Rpb24pXG4gICAqL1xuICBpbmZvKG1lc3NhZ2UsIGRhdGEgPSBudWxsLCBtZXRhZGF0YSA9IG51bGwpIHtcbiAgICBpZiAodGhpcy5sZXZlbCA+PSBMT0dfTEVWRUxTLklORk8pIHtcbiAgICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgICBsZXZlbDogJ0lORk8nLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBkYXRhOiB0aGlzLnNhbml0aXplKGRhdGEpLFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgIHRoaXMucXVldWVMb2cobG9nRW50cnkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygn4oS577iPJywgbWVzc2FnZSwgdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlYnVnIG1lc3NhZ2VzIChvbmx5IGluIGRldmVsb3BtZW50LCBhbHdheXMgc3luY2hyb25vdXMpXG4gICAqL1xuICBkZWJ1ZyhtZXNzYWdlLCBkYXRhID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPj0gTE9HX0xFVkVMUy5ERUJVRyAmJiBpc0RldmVsb3BtZW50KCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5CbJywgbWVzc2FnZSwgdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIHRyYWNlIG1lc3NhZ2VzIChvbmx5IGluIGRldmVsb3BtZW50KVxuICAgKi9cbiAgdHJhY2UobWVzc2FnZSwgZGF0YSA9IG51bGwsIG1ldGFkYXRhID0gbnVsbCkge1xuICAgIGlmICh0aGlzLmxldmVsID49IExPR19MRVZFTFMuVFJBQ0UgJiYgaXNEZXZlbG9wbWVudCgpKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ1RSQUNFJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLmxvZyhpc1Byb2R1Y3Rpb24oKSA/IGZvcm1hdHRlZCA6ICfwn5SNJywgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IG1lc3NhZ2UsIGlzUHJvZHVjdGlvbigpID8gJycgOiB0aGlzLnNhbml0aXplKGRhdGEpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgKi9cbiAgcGVyZm9ybWFuY2Uob3BlcmF0aW9uLCBkdXJhdGlvbiwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgdGhpcy5pbmZvKGBQZXJmb3JtYW5jZTogJHtvcGVyYXRpb259YCwgeyBkdXJhdGlvbjogYCR7ZHVyYXRpb259bXNgIH0sIG1ldGFkYXRhKVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBBUEkgY2FsbHNcbiAgICovXG4gIGFwaUNhbGwobWV0aG9kLCBlbmRwb2ludCwgZHVyYXRpb24sIHN0YXR1cykge1xuICAgIHRoaXMuaW5mbyhgQVBJOiAke21ldGhvZH0gJHtlbmRwb2ludH1gLCB7XG4gICAgICBkdXJhdGlvbjogYCR7ZHVyYXRpb259bXNgLFxuICAgICAgc3RhdHVzLFxuICAgICAgdHlwZTogJ2FwaV9jYWxsJ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogTG9nIGRhdGFiYXNlIHF1ZXJpZXNcbiAgICovXG4gIGRiUXVlcnkodGFibGUsIG9wZXJhdGlvbiwgZHVyYXRpb24sIHJlY29yZENvdW50ID0gbnVsbCkge1xuICAgIHRoaXMuZGVidWcoYERCOiAke29wZXJhdGlvbn0gb24gJHt0YWJsZX1gLCB7XG4gICAgICBkdXJhdGlvbjogYCR7ZHVyYXRpb259bXNgLFxuICAgICAgcmVjb3JkQ291bnQsXG4gICAgICB0eXBlOiAnZGJfcXVlcnknXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgc2VjdXJpdHkgZXZlbnRzXG4gICAqL1xuICBzZWN1cml0eShldmVudCwgZGV0YWlscyA9IG51bGwpIHtcbiAgICB0aGlzLndhcm4oYFNlY3VyaXR5OiAke2V2ZW50fWAsIGRldGFpbHMsIHsgdHlwZTogJ3NlY3VyaXR5X2V2ZW50JyB9KVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBidXNpbmVzcyBldmVudHNcbiAgICovXG4gIGJ1c2luZXNzKGV2ZW50LCBkZXRhaWxzID0gbnVsbCkge1xuICAgIHRoaXMuaW5mbyhgQnVzaW5lc3M6ICR7ZXZlbnR9YCwgZGV0YWlscywgeyB0eXBlOiAnYnVzaW5lc3NfZXZlbnQnIH0pXG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBQcm9kdWN0aW9uTG9nZ2VyKClcblxuLy8gQ29udmVuaWVuY2UgZnVuY3Rpb25zIGZvciBjb21tb24gdXNlIGNhc2VzXG5leHBvcnQgY29uc3QgbG9nRXJyb3IgPSAobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpID0+IGxvZ2dlci5lcnJvcihtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbmV4cG9ydCBjb25zdCBsb2dXYXJuID0gKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKSA9PiBsb2dnZXIud2FybihtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbmV4cG9ydCBjb25zdCBsb2dJbmZvID0gKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKSA9PiBsb2dnZXIuaW5mbyhtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbmV4cG9ydCBjb25zdCBsb2dEZWJ1ZyA9IChtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSkgPT4gbG9nZ2VyLmRlYnVnKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ1BlcmZvcm1hbmNlID0gKG9wZXJhdGlvbiwgZHVyYXRpb24sIG1ldGFkYXRhKSA9PiBsb2dnZXIucGVyZm9ybWFuY2Uob3BlcmF0aW9uLCBkdXJhdGlvbiwgbWV0YWRhdGEpXG5leHBvcnQgY29uc3QgbG9nQVBJQ2FsbCA9IChtZXRob2QsIGVuZHBvaW50LCBkdXJhdGlvbiwgc3RhdHVzKSA9PiBsb2dnZXIuYXBpQ2FsbChtZXRob2QsIGVuZHBvaW50LCBkdXJhdGlvbiwgc3RhdHVzKVxuZXhwb3J0IGNvbnN0IGxvZ0RCUXVlcnkgPSAodGFibGUsIG9wZXJhdGlvbiwgZHVyYXRpb24sIHJlY29yZENvdW50KSA9PiBsb2dnZXIuZGJRdWVyeSh0YWJsZSwgb3BlcmF0aW9uLCBkdXJhdGlvbiwgcmVjb3JkQ291bnQpXG5leHBvcnQgY29uc3QgbG9nU2VjdXJpdHkgPSAoZXZlbnQsIGRldGFpbHMpID0+IGxvZ2dlci5zZWN1cml0eShldmVudCwgZGV0YWlscylcbmV4cG9ydCBjb25zdCBsb2dCdXNpbmVzcyA9IChldmVudCwgZGV0YWlscykgPT4gbG9nZ2VyLmJ1c2luZXNzKGV2ZW50LCBkZXRhaWxzKVxuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXIiXSwibmFtZXMiOlsiaXNEZXZlbG9wbWVudCIsImlzUHJvZHVjdGlvbiIsIkxPR19MRVZFTFMiLCJFUlJPUiIsIldBUk4iLCJJTkZPIiwiREVCVUciLCJUUkFDRSIsIlByb2R1Y3Rpb25Mb2dnZXIiLCJjb25zdHJ1Y3RvciIsImxldmVsIiwic2Vuc2l0aXZlUGF0dGVybnMiLCJsb2dRdWV1ZSIsIm1heFF1ZXVlU2l6ZSIsImZsdXNoSW50ZXJ2YWwiLCJpc0ZsdXNoaW5nTG9ncyIsInNldEludGVydmFsIiwiZmx1c2hMb2dzQXN5bmMiLCJzYW5pdGl6ZSIsImRhdGEiLCJzYW5pdGl6ZWQiLCJmb3JFYWNoIiwicGF0dGVybiIsInJlcGxhY2UiLCJBcnJheSIsImlzQXJyYXkiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJrZXlMb3dlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZSIsIm1ldGFkYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2FuaXRpemVkRGF0YSIsImxvZ0VudHJ5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiZm9ybWF0dGVkIiwiY29uc29sZSIsIndhcm4iLCJxdWV1ZUxvZyIsImluZm8iLCJsb2ciLCJkZWJ1ZyIsInRyYWNlIiwicGVyZm9ybWFuY2UiLCJvcGVyYXRpb24iLCJkdXJhdGlvbiIsImFwaUNhbGwiLCJtZXRob2QiLCJlbmRwb2ludCIsInN0YXR1cyIsInR5cGUiLCJkYlF1ZXJ5IiwidGFibGUiLCJyZWNvcmRDb3VudCIsInNlY3VyaXR5IiwiZXZlbnQiLCJkZXRhaWxzIiwiYnVzaW5lc3MiLCJsb2dnZXIiLCJsb2dFcnJvciIsImxvZ1dhcm4iLCJsb2dJbmZvIiwibG9nRGVidWciLCJsb2dQZXJmb3JtYW5jZSIsImxvZ0FQSUNhbGwiLCJsb2dEQlF1ZXJ5IiwibG9nU2VjdXJpdHkiLCJsb2dCdXNpbmVzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/production-logger.js\n");

/***/ }),

/***/ "(api)/./lib/supabase-client.js":
/*!********************************!*\
  !*** ./lib/supabase-client.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   executeOptimizedQuery: () => (/* binding */ executeOptimizedQuery),\n/* harmony export */   getConnectionStats: () => (/* binding */ getConnectionStats),\n/* harmony export */   getServerSupabaseClient: () => (/* binding */ getServerSupabaseClient),\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   shutdownConnections: () => (/* binding */ shutdownConnections),\n/* harmony export */   testSupabaseConnection: () => (/* binding */ testSupabaseConnection)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _production_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./production-logger.js */ \"(api)/./lib/production-logger.js\");\n/* harmony import */ var _memory_optimizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./memory-optimizer.js */ \"(api)/./lib/memory-optimizer.js\");\n/**\n * SHARED SUPABASE CLIENT WITH SERVER/CLIENT SEPARATION\n * Ensures service keys are NEVER exposed client-side\n * Single instance pattern to avoid conflicts\n */ \n\n\nlet supabaseInstance = null;\nlet supabaseServerInstance = null;\nlet connectionPool = {\n    activeConnections: 0,\n    maxConnections: 50,\n    connectionQueue: [],\n    lastCleanup: Date.now(),\n    peakConnections: 0,\n    totalQueries: 0\n};\n/**\n * Get Supabase client appropriate for the environment\n * Client-side: Uses anonymous key (safe for browser)\n * Server-side: Uses service role key (never exposed to browser)\n */ const getSupabaseClient = ()=>{\n    // Check if we're on the server or client\n    const isServer = \"undefined\" === \"undefined\";\n    if (isServer) {\n        // SERVER-SIDE: Use service role key for full access\n        if (!supabaseServerInstance) {\n            const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n            if (!serviceKey) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"SUPABASE_SERVICE_ROLE_KEY not found in server environment\");\n                throw new Error(\"Server configuration error: Missing service key\");\n            }\n            supabaseServerInstance = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mrwitpgbcaxgnirqtavt.supabase.co\", serviceKey, {\n                auth: {\n                    autoRefreshToken: false,\n                    persistSession: false\n                },\n                db: {\n                    schema: \"public\"\n                },\n                global: {\n                    headers: {\n                        \"User-Agent\": \"Triangle-Intelligence-Platform/1.0\"\n                    }\n                }\n            });\n            // Register cleanup with memory optimizer\n            const memoryOptimizer = (0,_memory_optimizer_js__WEBPACK_IMPORTED_MODULE_2__.getMemoryOptimizer)();\n            memoryOptimizer.registerCleanup(\"supabase-server-client\", ()=>{\n                if (supabaseServerInstance) {\n                    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Cleaning up Supabase server connections\");\n                    supabaseServerInstance = null;\n                }\n            });\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Created server-side Supabase client with service role and memory optimization\");\n        }\n        return supabaseServerInstance;\n    } else {\n        // CLIENT-SIDE: Use anonymous key only\n        if (!supabaseInstance) {\n            const anonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yd2l0cGdiY2F4Z25pcnF0YXZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjUxMzQsImV4cCI6MjA2NTQwMTEzNH0.5g-eaUIwy4VQD2YfNC2sFNoZYF1HdUzVTNJZvtuVSI8\";\n            if (!anonKey) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"NEXT_PUBLIC_SUPABASE_ANON_KEY not found\");\n                throw new Error(\"Client configuration error: Missing anonymous key\");\n            }\n            supabaseInstance = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mrwitpgbcaxgnirqtavt.supabase.co\", anonKey);\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Created client-side Supabase client with anonymous key\");\n        }\n        return supabaseInstance;\n    }\n};\n/**\n * Get server-only Supabase client with service role\n * CRITICAL: Only use in API routes, never in components\n */ const getServerSupabaseClient = ()=>{\n    if (false) {}\n    if (!supabaseServerInstance) {\n        const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n        if (!serviceKey) {\n            throw new Error(\"SUPABASE_SERVICE_ROLE_KEY not configured\");\n        }\n        supabaseServerInstance = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mrwitpgbcaxgnirqtavt.supabase.co\", serviceKey, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Created dedicated server Supabase client\");\n    }\n    return supabaseServerInstance;\n};\n// Test database connection\nconst testSupabaseConnection = async ()=>{\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.from(\"translations\").select(\"*\").limit(1);\n        if (error) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"Supabase connection test failed\", {\n                error: error.message\n            });\n            return false;\n        }\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Supabase connection test successful\");\n        return true;\n    } catch (error) {\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"Supabase connection test error\", {\n            error: error.message\n        });\n        return false;\n    }\n};\n/**\n * Memory-optimized database query wrapper\n */ const executeOptimizedQuery = async (queryFn, queryName = \"unknown\")=>{\n    const startTime = Date.now();\n    connectionPool.activeConnections++;\n    connectionPool.totalQueries++;\n    // Track peak connections for monitoring\n    if (connectionPool.activeConnections > connectionPool.peakConnections) {\n        connectionPool.peakConnections = connectionPool.activeConnections;\n    }\n    try {\n        // Check if we need cleanup\n        if (Date.now() - connectionPool.lastCleanup > 300000) {\n            cleanupConnections();\n        }\n        const result = await queryFn();\n        const duration = Date.now() - startTime;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(`Optimized query executed: ${queryName}`, {\n            duration: `${duration}ms`,\n            activeConnections: connectionPool.activeConnections,\n            peakConnections: connectionPool.peakConnections\n        });\n        return result;\n    } catch (error) {\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(`Optimized query failed: ${queryName}`, {\n            error: error.message,\n            duration: `${Date.now() - startTime}ms`\n        });\n        throw error;\n    } finally{\n        connectionPool.activeConnections--;\n    }\n};\n/**\n * Clean up connection pool\n */ const cleanupConnections = ()=>{\n    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Cleaning up Supabase connection pool\", {\n        activeConnections: connectionPool.activeConnections,\n        queueSize: connectionPool.connectionQueue.length\n    });\n    // Reset connection tracking\n    connectionPool.activeConnections = Math.max(0, connectionPool.activeConnections);\n    connectionPool.connectionQueue = connectionPool.connectionQueue.filter((conn)=>Date.now() - conn.created < 300000 // 5 minutes\n    );\n    connectionPool.lastCleanup = Date.now();\n};\n/**\n * Get connection pool statistics\n */ const getConnectionStats = ()=>{\n    return {\n        activeConnections: connectionPool.activeConnections,\n        maxConnections: connectionPool.maxConnections,\n        peakConnections: connectionPool.peakConnections,\n        totalQueries: connectionPool.totalQueries,\n        queueSize: connectionPool.connectionQueue.length,\n        lastCleanup: new Date(connectionPool.lastCleanup).toISOString(),\n        utilizationPercent: Math.round(connectionPool.activeConnections / connectionPool.maxConnections * 100),\n        status: connectionPool.activeConnections < connectionPool.maxConnections * 0.8 ? \"healthy\" : \"high_load\"\n    };\n};\n/**\n * Graceful shutdown - cleanup all connections\n */ const shutdownConnections = ()=>{\n    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Shutting down all Supabase connections\");\n    supabaseInstance = null;\n    supabaseServerInstance = null;\n    connectionPool.activeConnections = 0;\n    connectionPool.connectionQueue = [];\n    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"All Supabase connections shut down successfully\");\n};\n// Register shutdown handler\nconst memoryOptimizer = (0,_memory_optimizer_js__WEBPACK_IMPORTED_MODULE_2__.getMemoryOptimizer)();\nmemoryOptimizer.registerCleanup(\"supabase-connections\", shutdownConnections);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getSupabaseClient);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXBhYmFzZS1jbGllbnQuanM/MDkzMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNIQVJFRCBTVVBBQkFTRSBDTElFTlQgV0lUSCBTRVJWRVIvQ0xJRU5UIFNFUEFSQVRJT05cbiAqIEVuc3VyZXMgc2VydmljZSBrZXlzIGFyZSBORVZFUiBleHBvc2VkIGNsaWVudC1zaWRlXG4gKiBTaW5nbGUgaW5zdGFuY2UgcGF0dGVybiB0byBhdm9pZCBjb25mbGljdHNcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5pbXBvcnQgeyBsb2dJbmZvLCBsb2dFcnJvciB9IGZyb20gJy4vcHJvZHVjdGlvbi1sb2dnZXIuanMnXG5pbXBvcnQgeyBnZXRNZW1vcnlPcHRpbWl6ZXIgfSBmcm9tICcuL21lbW9yeS1vcHRpbWl6ZXIuanMnXG5cbmxldCBzdXBhYmFzZUluc3RhbmNlID0gbnVsbFxubGV0IHN1cGFiYXNlU2VydmVySW5zdGFuY2UgPSBudWxsXG5sZXQgY29ubmVjdGlvblBvb2wgPSB7XG4gIGFjdGl2ZUNvbm5lY3Rpb25zOiAwLFxuICBtYXhDb25uZWN0aW9uczogNTAsIC8vIFNjYWxlZCBmb3IgcHJvZHVjdGlvbiBjb25jdXJyZW50IHVzZXJzXG4gIGNvbm5lY3Rpb25RdWV1ZTogW10sXG4gIGxhc3RDbGVhbnVwOiBEYXRlLm5vdygpLFxuICBwZWFrQ29ubmVjdGlvbnM6IDAsXG4gIHRvdGFsUXVlcmllczogMFxufVxuXG4vKipcbiAqIEdldCBTdXBhYmFzZSBjbGllbnQgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnZpcm9ubWVudFxuICogQ2xpZW50LXNpZGU6IFVzZXMgYW5vbnltb3VzIGtleSAoc2FmZSBmb3IgYnJvd3NlcilcbiAqIFNlcnZlci1zaWRlOiBVc2VzIHNlcnZpY2Ugcm9sZSBrZXkgKG5ldmVyIGV4cG9zZWQgdG8gYnJvd3NlcilcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFN1cGFiYXNlQ2xpZW50ID0gKCkgPT4ge1xuICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgc2VydmVyIG9yIGNsaWVudFxuICBjb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXG4gIFxuICBpZiAoaXNTZXJ2ZXIpIHtcbiAgICAvLyBTRVJWRVItU0lERTogVXNlIHNlcnZpY2Ugcm9sZSBrZXkgZm9yIGZ1bGwgYWNjZXNzXG4gICAgaWYgKCFzdXBhYmFzZVNlcnZlckluc3RhbmNlKSB7XG4gICAgICBjb25zdCBzZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVxuICAgICAgaWYgKCFzZXJ2aWNlS2V5KSB7XG4gICAgICAgIGxvZ0Vycm9yKCdTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIG5vdCBmb3VuZCBpbiBzZXJ2ZXIgZW52aXJvbm1lbnQnKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcnZlciBjb25maWd1cmF0aW9uIGVycm9yOiBNaXNzaW5nIHNlcnZpY2Uga2V5JylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSA9IGNyZWF0ZUNsaWVudChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgICAgICBzZXJ2aWNlS2V5LFxuICAgICAgICB7XG4gICAgICAgICAgYXV0aDoge1xuICAgICAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7XG4gICAgICAgICAgICBzY2hlbWE6ICdwdWJsaWMnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnbG9iYWw6IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnVHJpYW5nbGUtSW50ZWxsaWdlbmNlLVBsYXRmb3JtLzEuMCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gUmVnaXN0ZXIgY2xlYW51cCB3aXRoIG1lbW9yeSBvcHRpbWl6ZXJcbiAgICAgIGNvbnN0IG1lbW9yeU9wdGltaXplciA9IGdldE1lbW9yeU9wdGltaXplcigpXG4gICAgICBtZW1vcnlPcHRpbWl6ZXIucmVnaXN0ZXJDbGVhbnVwKCdzdXBhYmFzZS1zZXJ2ZXItY2xpZW50JywgKCkgPT4ge1xuICAgICAgICBpZiAoc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSkge1xuICAgICAgICAgIGxvZ0luZm8oJ0NsZWFuaW5nIHVwIFN1cGFiYXNlIHNlcnZlciBjb25uZWN0aW9ucycpXG4gICAgICAgICAgc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgbG9nSW5mbygnQ3JlYXRlZCBzZXJ2ZXItc2lkZSBTdXBhYmFzZSBjbGllbnQgd2l0aCBzZXJ2aWNlIHJvbGUgYW5kIG1lbW9yeSBvcHRpbWl6YXRpb24nKVxuICAgIH1cbiAgICByZXR1cm4gc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZVxuICB9IGVsc2Uge1xuICAgIC8vIENMSUVOVC1TSURFOiBVc2UgYW5vbnltb3VzIGtleSBvbmx5XG4gICAgaWYgKCFzdXBhYmFzZUluc3RhbmNlKSB7XG4gICAgICBjb25zdCBhbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVlcbiAgICAgIGlmICghYW5vbktleSkge1xuICAgICAgICBsb2dFcnJvcignTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgbm90IGZvdW5kJylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgY29uZmlndXJhdGlvbiBlcnJvcjogTWlzc2luZyBhbm9ueW1vdXMga2V5JylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3VwYWJhc2VJbnN0YW5jZSA9IGNyZWF0ZUNsaWVudChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgICAgICBhbm9uS2V5XG4gICAgICApXG4gICAgICBsb2dJbmZvKCdDcmVhdGVkIGNsaWVudC1zaWRlIFN1cGFiYXNlIGNsaWVudCB3aXRoIGFub255bW91cyBrZXknKVxuICAgIH1cbiAgICByZXR1cm4gc3VwYWJhc2VJbnN0YW5jZVxuICB9XG59XG5cbi8qKlxuICogR2V0IHNlcnZlci1vbmx5IFN1cGFiYXNlIGNsaWVudCB3aXRoIHNlcnZpY2Ugcm9sZVxuICogQ1JJVElDQUw6IE9ubHkgdXNlIGluIEFQSSByb3V0ZXMsIG5ldmVyIGluIGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclN1cGFiYXNlQ2xpZW50ID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NFQ1VSSVRZIFZJT0xBVElPTjogQXR0ZW1wdGVkIHRvIHVzZSBzZXJ2ZXIgY2xpZW50IG9uIGNsaWVudC1zaWRlJylcbiAgfVxuICBcbiAgaWYgKCFzdXBhYmFzZVNlcnZlckluc3RhbmNlKSB7XG4gICAgY29uc3Qgc2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVlcbiAgICBpZiAoIXNlcnZpY2VLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBub3QgY29uZmlndXJlZCcpXG4gICAgfVxuICAgIFxuICAgIHN1cGFiYXNlU2VydmVySW5zdGFuY2UgPSBjcmVhdGVDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgICBzZXJ2aWNlS2V5LFxuICAgICAge1xuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gICAgbG9nSW5mbygnQ3JlYXRlZCBkZWRpY2F0ZWQgc2VydmVyIFN1cGFiYXNlIGNsaWVudCcpXG4gIH1cbiAgcmV0dXJuIHN1cGFiYXNlU2VydmVySW5zdGFuY2Vcbn1cblxuLy8gVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXG5leHBvcnQgY29uc3QgdGVzdFN1cGFiYXNlQ29ubmVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRTdXBhYmFzZUNsaWVudCgpXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LmZyb20oJ3RyYW5zbGF0aW9ucycpLnNlbGVjdCgnKicpLmxpbWl0KDEpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcignU3VwYWJhc2UgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2dJbmZvKCdTdXBhYmFzZSBjb25uZWN0aW9uIHRlc3Qgc3VjY2Vzc2Z1bCcpXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcignU3VwYWJhc2UgY29ubmVjdGlvbiB0ZXN0IGVycm9yJywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbi8qKlxuICogTWVtb3J5LW9wdGltaXplZCBkYXRhYmFzZSBxdWVyeSB3cmFwcGVyXG4gKi9cbmV4cG9ydCBjb25zdCBleGVjdXRlT3B0aW1pemVkUXVlcnkgPSBhc3luYyAocXVlcnlGbiwgcXVlcnlOYW1lID0gJ3Vua25vd24nKSA9PiB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMrK1xuICBjb25uZWN0aW9uUG9vbC50b3RhbFF1ZXJpZXMrK1xuICBcbiAgLy8gVHJhY2sgcGVhayBjb25uZWN0aW9ucyBmb3IgbW9uaXRvcmluZ1xuICBpZiAoY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMgPiBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnMpIHtcbiAgICBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnMgPSBjb25uZWN0aW9uUG9vbC5hY3RpdmVDb25uZWN0aW9uc1xuICB9XG4gIFxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgY2xlYW51cFxuICAgIGlmIChEYXRlLm5vdygpIC0gY29ubmVjdGlvblBvb2wubGFzdENsZWFudXAgPiAzMDAwMDApIHsgLy8gNSBtaW51dGVzXG4gICAgICBjbGVhbnVwQ29ubmVjdGlvbnMoKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeUZuKClcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICBcbiAgICBsb2dJbmZvKGBPcHRpbWl6ZWQgcXVlcnkgZXhlY3V0ZWQ6ICR7cXVlcnlOYW1lfWAsIHsgXG4gICAgICBkdXJhdGlvbjogYCR7ZHVyYXRpb259bXNgLFxuICAgICAgYWN0aXZlQ29ubmVjdGlvbnM6IGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zLFxuICAgICAgcGVha0Nvbm5lY3Rpb25zOiBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnNcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcihgT3B0aW1pemVkIHF1ZXJ5IGZhaWxlZDogJHtxdWVyeU5hbWV9YCwgeyBcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgZHVyYXRpb246IGAke0RhdGUubm93KCkgLSBzdGFydFRpbWV9bXNgXG4gICAgfSlcbiAgICB0aHJvdyBlcnJvclxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zLS1cbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGNvbm5lY3Rpb24gcG9vbFxuICovXG5jb25zdCBjbGVhbnVwQ29ubmVjdGlvbnMgPSAoKSA9PiB7XG4gIGxvZ0luZm8oJ0NsZWFuaW5nIHVwIFN1cGFiYXNlIGNvbm5lY3Rpb24gcG9vbCcsIHtcbiAgICBhY3RpdmVDb25uZWN0aW9uczogY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMsXG4gICAgcXVldWVTaXplOiBjb25uZWN0aW9uUG9vbC5jb25uZWN0aW9uUXVldWUubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBSZXNldCBjb25uZWN0aW9uIHRyYWNraW5nXG4gIGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zID0gTWF0aC5tYXgoMCwgY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMpXG4gIGNvbm5lY3Rpb25Qb29sLmNvbm5lY3Rpb25RdWV1ZSA9IGNvbm5lY3Rpb25Qb29sLmNvbm5lY3Rpb25RdWV1ZS5maWx0ZXIoXG4gICAgY29ubiA9PiBEYXRlLm5vdygpIC0gY29ubi5jcmVhdGVkIDwgMzAwMDAwIC8vIDUgbWludXRlc1xuICApXG4gIGNvbm5lY3Rpb25Qb29sLmxhc3RDbGVhbnVwID0gRGF0ZS5ub3coKVxufVxuXG4vKipcbiAqIEdldCBjb25uZWN0aW9uIHBvb2wgc3RhdGlzdGljc1xuICovXG5leHBvcnQgY29uc3QgZ2V0Q29ubmVjdGlvblN0YXRzID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZUNvbm5lY3Rpb25zOiBjb25uZWN0aW9uUG9vbC5hY3RpdmVDb25uZWN0aW9ucyxcbiAgICBtYXhDb25uZWN0aW9uczogY29ubmVjdGlvblBvb2wubWF4Q29ubmVjdGlvbnMsXG4gICAgcGVha0Nvbm5lY3Rpb25zOiBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnMsXG4gICAgdG90YWxRdWVyaWVzOiBjb25uZWN0aW9uUG9vbC50b3RhbFF1ZXJpZXMsXG4gICAgcXVldWVTaXplOiBjb25uZWN0aW9uUG9vbC5jb25uZWN0aW9uUXVldWUubGVuZ3RoLFxuICAgIGxhc3RDbGVhbnVwOiBuZXcgRGF0ZShjb25uZWN0aW9uUG9vbC5sYXN0Q2xlYW51cCkudG9JU09TdHJpbmcoKSxcbiAgICB1dGlsaXphdGlvblBlcmNlbnQ6IE1hdGgucm91bmQoKGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zIC8gY29ubmVjdGlvblBvb2wubWF4Q29ubmVjdGlvbnMpICogMTAwKSxcbiAgICBzdGF0dXM6IGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zIDwgY29ubmVjdGlvblBvb2wubWF4Q29ubmVjdGlvbnMgKiAwLjggPyAnaGVhbHRoeScgOiAnaGlnaF9sb2FkJ1xuICB9XG59XG5cbi8qKlxuICogR3JhY2VmdWwgc2h1dGRvd24gLSBjbGVhbnVwIGFsbCBjb25uZWN0aW9uc1xuICovXG5leHBvcnQgY29uc3Qgc2h1dGRvd25Db25uZWN0aW9ucyA9ICgpID0+IHtcbiAgbG9nSW5mbygnU2h1dHRpbmcgZG93biBhbGwgU3VwYWJhc2UgY29ubmVjdGlvbnMnKVxuICBcbiAgc3VwYWJhc2VJbnN0YW5jZSA9IG51bGxcbiAgc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSA9IG51bGxcbiAgY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMgPSAwXG4gIGNvbm5lY3Rpb25Qb29sLmNvbm5lY3Rpb25RdWV1ZSA9IFtdXG4gIFxuICBsb2dJbmZvKCdBbGwgU3VwYWJhc2UgY29ubmVjdGlvbnMgc2h1dCBkb3duIHN1Y2Nlc3NmdWxseScpXG59XG5cbi8vIFJlZ2lzdGVyIHNodXRkb3duIGhhbmRsZXJcbmNvbnN0IG1lbW9yeU9wdGltaXplciA9IGdldE1lbW9yeU9wdGltaXplcigpXG5tZW1vcnlPcHRpbWl6ZXIucmVnaXN0ZXJDbGVhbnVwKCdzdXBhYmFzZS1jb25uZWN0aW9ucycsIHNodXRkb3duQ29ubmVjdGlvbnMpXG5cbmV4cG9ydCBkZWZhdWx0IGdldFN1cGFiYXNlQ2xpZW50Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImxvZ0luZm8iLCJsb2dFcnJvciIsImdldE1lbW9yeU9wdGltaXplciIsInN1cGFiYXNlSW5zdGFuY2UiLCJzdXBhYmFzZVNlcnZlckluc3RhbmNlIiwiY29ubmVjdGlvblBvb2wiLCJhY3RpdmVDb25uZWN0aW9ucyIsIm1heENvbm5lY3Rpb25zIiwiY29ubmVjdGlvblF1ZXVlIiwibGFzdENsZWFudXAiLCJEYXRlIiwibm93IiwicGVha0Nvbm5lY3Rpb25zIiwidG90YWxRdWVyaWVzIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJpc1NlcnZlciIsInNlcnZpY2VLZXkiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImRiIiwic2NoZW1hIiwiZ2xvYmFsIiwiaGVhZGVycyIsIm1lbW9yeU9wdGltaXplciIsInJlZ2lzdGVyQ2xlYW51cCIsImFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldFNlcnZlclN1cGFiYXNlQ2xpZW50IiwidGVzdFN1cGFiYXNlQ29ubmVjdGlvbiIsImNsaWVudCIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsIm1lc3NhZ2UiLCJleGVjdXRlT3B0aW1pemVkUXVlcnkiLCJxdWVyeUZuIiwicXVlcnlOYW1lIiwic3RhcnRUaW1lIiwiY2xlYW51cENvbm5lY3Rpb25zIiwicmVzdWx0IiwiZHVyYXRpb24iLCJxdWV1ZVNpemUiLCJsZW5ndGgiLCJNYXRoIiwibWF4IiwiZmlsdGVyIiwiY29ubiIsImNyZWF0ZWQiLCJnZXRDb25uZWN0aW9uU3RhdHMiLCJ0b0lTT1N0cmluZyIsInV0aWxpemF0aW9uUGVyY2VudCIsInJvdW5kIiwic3RhdHVzIiwic2h1dGRvd25Db25uZWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/supabase-client.js\n");

/***/ }),

/***/ "(api)/./pages/api/database-structure-test.js":
/*!**********************************************!*\
  !*** ./pages/api/database-structure-test.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/supabase-client */ \"(api)/./lib/supabase-client.js\");\n/* harmony import */ var _lib_production_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/production-logger */ \"(api)/./lib/production-logger.js\");\n// Test actual database structure and demonstrate volatile/stable concept\n\n\nconst supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_0__.getSupabaseClient)();\nasync function handler(req, res) {\n    const startTime = Date.now();\n    (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"\\uD83D\\uDD0D Starting database structure test\");\n    try {\n        const results = {};\n        // Test STABLE tables (cache forever - no API calls needed)\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"⚓ Testing STABLE data tables...\");\n        // USMCA tariff rates (should be 0% - treaty locked)\n        const { data: usmcaData, error: usmcaError } = await supabase.from(\"usmca_tariff_rates\").select(\"*\").limit(5);\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logDBQuery)(\"usmca_tariff_rates\", \"SELECT\", Date.now() - startTime, usmcaData?.length);\n        results.stable = {\n            usmca_tariff_rates: {\n                rows: usmcaData?.length || 0,\n                sample: usmcaData?.[0] || null,\n                strategy: \"Cache forever - treaty-locked rates never change\",\n                apiCallsNeeded: 0,\n                error: usmcaError?.message || null\n            }\n        };\n        // US Ports (infrastructure doesn't move)\n        const { data: portsData } = await supabase.from(\"us_ports\").select(\"*\").limit(3);\n        results.stable.us_ports = {\n            rows: portsData?.length || 0,\n            sample: portsData?.[0] || null,\n            strategy: \"Cache forever - port locations are static\",\n            apiCallsNeeded: 0\n        };\n        // Comtrade reference (institutional intelligence - 15K+ rows!)\n        const { count: comtradeCount } = await supabase.from(\"comtrade_reference\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        const { data: comtradeSample } = await supabase.from(\"comtrade_reference\").select(\"*\").limit(2);\n        results.stable.comtrade_reference = {\n            totalRows: comtradeCount || 0,\n            sample: comtradeSample?.[0] || null,\n            strategy: \"Massive institutional intelligence - cache forever\",\n            apiCallsNeeded: 0,\n            value: `${(comtradeCount || 0).toLocaleString()} HS code intelligence records`\n        };\n        // Trade flows (597K+ records)\n        const { count: tradeFlowCount } = await supabase.from(\"trade_flows\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        const { data: tradeFlowSample } = await supabase.from(\"trade_flows\").select(\"*\").limit(2);\n        results.stable.trade_flows = {\n            totalRows: tradeFlowCount || 0,\n            sample: tradeFlowSample?.[0] || null,\n            strategy: \"Massive bilateral trade intelligence - cache forever\",\n            apiCallsNeeded: 0,\n            value: `${(tradeFlowCount || 0).toLocaleString()} trade flow records`\n        };\n        // Test VOLATILE tables (update with API calls)\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"\\uD83D\\uDD25 Testing VOLATILE data tables...\");\n        // Current market alerts (changes daily)\n        const { data: alertsData } = await supabase.from(\"current_market_alerts\").select(\"*\").limit(5);\n        results.volatile = {\n            current_market_alerts: {\n                rows: alertsData?.length || 0,\n                sample: alertsData?.[0] || null,\n                strategy: \"Update daily with market changes\",\n                apiCallsNeeded: \"Yes - when tariffs change\"\n            }\n        };\n        // API cache (stores volatile API responses)\n        const { data: cacheData } = await supabase.from(\"api_cache\").select(\"*\").limit(3);\n        results.volatile.api_cache = {\n            rows: cacheData?.length || 0,\n            sample: cacheData?.[0] || null,\n            strategy: \"Cache API responses 1-4 hours\",\n            apiCallsNeeded: \"Yes - when cache expires\"\n        };\n        // Workflow sessions (learning intelligence)\n        const { data: sessionsData } = await supabase.from(\"workflow_sessions\").select(\"*\").limit(2);\n        results.institutional = {\n            workflow_sessions: {\n                rows: sessionsData?.length || 0,\n                sample: sessionsData?.[0] || null,\n                strategy: \"Institutional learning - grows over time\",\n                value: \"240+ user sessions for pattern recognition\"\n            }\n        };\n        // Countries and translations\n        const { count: countriesCount } = await supabase.from(\"countries\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        const { count: translationsCount } = await supabase.from(\"translations\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        results.stable.countries = {\n            rows: countriesCount || 0,\n            strategy: \"Geographic data - cache forever\"\n        };\n        results.stable.translations = {\n            rows: translationsCount || 0,\n            strategy: \"Trilingual support (EN/ES/FR) - cache forever\"\n        };\n        // Summary of strategy\n        results.strategy = {\n            stable: {\n                description: \"Query these tables directly - never expires, no API calls\",\n                tables: [\n                    \"usmca_tariff_rates\",\n                    \"us_ports\",\n                    \"comtrade_reference\",\n                    \"trade_flows\",\n                    \"countries\",\n                    \"translations\"\n                ],\n                benefit: \"Instant responses, zero API costs\",\n                cacheTime: \"FOREVER\"\n            },\n            volatile: {\n                description: \"Update these with fresh API data per user\",\n                tables: [\n                    \"current_market_alerts\",\n                    \"api_cache\",\n                    \"country_risk_scores\"\n                ],\n                benefit: \"Real-time market intelligence\",\n                cacheTime: \"1-4 hours depending on volatility\"\n            },\n            efficiency: {\n                apiCallsSaved: \"80%+\",\n                costReduction: \"Significant - most data from stable tables\",\n                speedImprovement: \"Instant responses for stable data\"\n            }\n        };\n        const totalTime = Date.now() - startTime;\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(`✅ DATABASE STRUCTURE TEST COMPLETE - ${totalTime}ms`);\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(`📊 Stable tables tested: ${Object.keys(results.stable).length}`);\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(`🔥 Volatile tables tested: ${Object.keys(results.volatile).length}`);\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"⚡ Strategy: Perfect separation achieved!\");\n        res.status(200).json(results);\n    } catch (error) {\n        (0,_lib_production_logger__WEBPACK_IMPORTED_MODULE_1__.logError)(\"❌ DATABASE STRUCTURE TEST FAILED\", {\n            error\n        });\n        res.status(500).json({\n            error: \"Database test failed\",\n            message: error.message,\n            suggestion: \"Check Supabase connection and table permissions\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZGF0YWJhc2Utc3RydWN0dXJlLXRlc3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEseUVBQXlFO0FBQ1o7QUFDYztBQUUzRSxNQUFNSSxXQUFXSix1RUFBaUJBO0FBRW5CLGVBQWVLLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxNQUFNQyxZQUFZQyxLQUFLQyxHQUFHO0lBQzFCVCwrREFBT0EsQ0FBQztJQUVSLElBQUk7UUFDRixNQUFNVSxVQUFVLENBQUM7UUFFakIsMkRBQTJEO1FBQzNEViwrREFBT0EsQ0FBQztRQUVSLG9EQUFvRDtRQUNwRCxNQUFNLEVBQUVXLE1BQU1DLFNBQVMsRUFBRUMsT0FBT0MsVUFBVSxFQUFFLEdBQUcsTUFBTVgsU0FDbERZLElBQUksQ0FBQyxzQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEtBQUssQ0FBQztRQUVUZixrRUFBVUEsQ0FBQyxzQkFBc0IsVUFBVU0sS0FBS0MsR0FBRyxLQUFLRixXQUFXSyxXQUFXTTtRQUU5RVIsUUFBUVMsTUFBTSxHQUFHO1lBQ2ZDLG9CQUFvQjtnQkFDbEJDLE1BQU1ULFdBQVdNLFVBQVU7Z0JBQzNCSSxRQUFRVixXQUFXLENBQUMsRUFBRSxJQUFJO2dCQUMxQlcsVUFBVTtnQkFDVkMsZ0JBQWdCO2dCQUNoQlgsT0FBT0MsWUFBWVcsV0FBVztZQUNoQztRQUNGO1FBRUEseUNBQXlDO1FBQ3pDLE1BQU0sRUFBRWQsTUFBTWUsU0FBUyxFQUFFLEdBQUcsTUFBTXZCLFNBQy9CWSxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQ1BDLEtBQUssQ0FBQztRQUVUUCxRQUFRUyxNQUFNLENBQUNRLFFBQVEsR0FBRztZQUN4Qk4sTUFBTUssV0FBV1IsVUFBVTtZQUMzQkksUUFBUUksV0FBVyxDQUFDLEVBQUUsSUFBSTtZQUMxQkgsVUFBVTtZQUNWQyxnQkFBZ0I7UUFDbEI7UUFFQSwrREFBK0Q7UUFDL0QsTUFBTSxFQUFFSSxPQUFPQyxhQUFhLEVBQUUsR0FBRyxNQUFN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YWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vcGFnZXMvYXBpL2RhdGFiYXNlLXN0cnVjdHVyZS10ZXN0LmpzPzc3YTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGVzdCBhY3R1YWwgZGF0YWJhc2Ugc3RydWN0dXJlIGFuZCBkZW1vbnN0cmF0ZSB2b2xhdGlsZS9zdGFibGUgY29uY2VwdFxuaW1wb3J0IHsgZ2V0U3VwYWJhc2VDbGllbnQgfSBmcm9tICcuLi8uLi9saWIvc3VwYWJhc2UtY2xpZW50J1xuaW1wb3J0IHsgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ0RCUXVlcnkgfSBmcm9tICcuLi8uLi9saWIvcHJvZHVjdGlvbi1sb2dnZXInXG5cbmNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgbG9nSW5mbygn8J+UjSBTdGFydGluZyBkYXRhYmFzZSBzdHJ1Y3R1cmUgdGVzdCcpXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdHMgPSB7fVxuICAgIFxuICAgIC8vIFRlc3QgU1RBQkxFIHRhYmxlcyAoY2FjaGUgZm9yZXZlciAtIG5vIEFQSSBjYWxscyBuZWVkZWQpXG4gICAgbG9nSW5mbygn4pqTIFRlc3RpbmcgU1RBQkxFIGRhdGEgdGFibGVzLi4uJylcbiAgICBcbiAgICAvLyBVU01DQSB0YXJpZmYgcmF0ZXMgKHNob3VsZCBiZSAwJSAtIHRyZWF0eSBsb2NrZWQpXG4gICAgY29uc3QgeyBkYXRhOiB1c21jYURhdGEsIGVycm9yOiB1c21jYUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzbWNhX3RhcmlmZl9yYXRlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5saW1pdCg1KVxuICAgIFxuICAgIGxvZ0RCUXVlcnkoJ3VzbWNhX3RhcmlmZl9yYXRlcycsICdTRUxFQ1QnLCBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLCB1c21jYURhdGE/Lmxlbmd0aClcbiAgICBcbiAgICByZXN1bHRzLnN0YWJsZSA9IHtcbiAgICAgIHVzbWNhX3RhcmlmZl9yYXRlczoge1xuICAgICAgICByb3dzOiB1c21jYURhdGE/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzYW1wbGU6IHVzbWNhRGF0YT8uWzBdIHx8IG51bGwsXG4gICAgICAgIHN0cmF0ZWd5OiAnQ2FjaGUgZm9yZXZlciAtIHRyZWF0eS1sb2NrZWQgcmF0ZXMgbmV2ZXIgY2hhbmdlJyxcbiAgICAgICAgYXBpQ2FsbHNOZWVkZWQ6IDAsXG4gICAgICAgIGVycm9yOiB1c21jYUVycm9yPy5tZXNzYWdlIHx8IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVVMgUG9ydHMgKGluZnJhc3RydWN0dXJlIGRvZXNuJ3QgbW92ZSlcbiAgICBjb25zdCB7IGRhdGE6IHBvcnRzRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c19wb3J0cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5saW1pdCgzKVxuICAgIFxuICAgIHJlc3VsdHMuc3RhYmxlLnVzX3BvcnRzID0ge1xuICAgICAgcm93czogcG9ydHNEYXRhPy5sZW5ndGggfHwgMCxcbiAgICAgIHNhbXBsZTogcG9ydHNEYXRhPy5bMF0gfHwgbnVsbCxcbiAgICAgIHN0cmF0ZWd5OiAnQ2FjaGUgZm9yZXZlciAtIHBvcnQgbG9jYXRpb25zIGFyZSBzdGF0aWMnLFxuICAgICAgYXBpQ2FsbHNOZWVkZWQ6IDBcbiAgICB9XG4gICAgXG4gICAgLy8gQ29tdHJhZGUgcmVmZXJlbmNlIChpbnN0aXR1dGlvbmFsIGludGVsbGlnZW5jZSAtIDE1Sysgcm93cyEpXG4gICAgY29uc3QgeyBjb3VudDogY29tdHJhZGVDb3VudCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjb210cmFkZV9yZWZlcmVuY2UnKVxuICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IGNvbXRyYWRlU2FtcGxlIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvbXRyYWRlX3JlZmVyZW5jZScpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5saW1pdCgyKVxuICAgIFxuICAgIHJlc3VsdHMuc3RhYmxlLmNvbXRyYWRlX3JlZmVyZW5jZSA9IHtcbiAgICAgIHRvdGFsUm93czogY29tdHJhZGVDb3VudCB8fCAwLFxuICAgICAgc2FtcGxlOiBjb210cmFkZVNhbXBsZT8uWzBdIHx8IG51bGwsXG4gICAgICBzdHJhdGVneTogJ01hc3NpdmUgaW5zdGl0dXRpb25hbCBpbnRlbGxpZ2VuY2UgLSBjYWNoZSBmb3JldmVyJyxcbiAgICAgIGFwaUNhbGxzTmVlZGVkOiAwLFxuICAgICAgdmFsdWU6IGAkeyhjb210cmFkZUNvdW50IHx8IDApLnRvTG9jYWxlU3RyaW5nKCl9IEhTIGNvZGUgaW50ZWxsaWdlbmNlIHJlY29yZHNgXG4gICAgfVxuICAgIFxuICAgIC8vIFRyYWRlIGZsb3dzICg1OTdLKyByZWNvcmRzKVxuICAgIGNvbnN0IHsgY291bnQ6IHRyYWRlRmxvd0NvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3RyYWRlX2Zsb3dzJylcbiAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXG4gICAgXG4gICAgY29uc3QgeyBkYXRhOiB0cmFkZUZsb3dTYW1wbGUgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndHJhZGVfZmxvd3MnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAubGltaXQoMilcbiAgICBcbiAgICByZXN1bHRzLnN0YWJsZS50cmFkZV9mbG93cyA9IHtcbiAgICAgIHRvdGFsUm93czogdHJhZGVGbG93Q291bnQgfHwgMCxcbiAgICAgIHNhbXBsZTogdHJhZGVGbG93U2FtcGxlPy5bMF0gfHwgbnVsbCxcbiAgICAgIHN0cmF0ZWd5OiAnTWFzc2l2ZSBiaWxhdGVyYWwgdHJhZGUgaW50ZWxsaWdlbmNlIC0gY2FjaGUgZm9yZXZlcicsXG4gICAgICBhcGlDYWxsc05lZWRlZDogMCxcbiAgICAgIHZhbHVlOiBgJHsodHJhZGVGbG93Q291bnQgfHwgMCkudG9Mb2NhbGVTdHJpbmcoKX0gdHJhZGUgZmxvdyByZWNvcmRzYFxuICAgIH1cbiAgICBcbiAgICAvLyBUZXN0IFZPTEFUSUxFIHRhYmxlcyAodXBkYXRlIHdpdGggQVBJIGNhbGxzKVxuICAgIGxvZ0luZm8oJ/CflKUgVGVzdGluZyBWT0xBVElMRSBkYXRhIHRhYmxlcy4uLicpXG4gICAgXG4gICAgLy8gQ3VycmVudCBtYXJrZXQgYWxlcnRzIChjaGFuZ2VzIGRhaWx5KVxuICAgIGNvbnN0IHsgZGF0YTogYWxlcnRzRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjdXJyZW50X21hcmtldF9hbGVydHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAubGltaXQoNSlcbiAgICBcbiAgICByZXN1bHRzLnZvbGF0aWxlID0ge1xuICAgICAgY3VycmVudF9tYXJrZXRfYWxlcnRzOiB7XG4gICAgICAgIHJvd3M6IGFsZXJ0c0RhdGE/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzYW1wbGU6IGFsZXJ0c0RhdGE/LlswXSB8fCBudWxsLFxuICAgICAgICBzdHJhdGVneTogJ1VwZGF0ZSBkYWlseSB3aXRoIG1hcmtldCBjaGFuZ2VzJyxcbiAgICAgICAgYXBpQ2FsbHNOZWVkZWQ6ICdZZXMgLSB3aGVuIHRhcmlmZnMgY2hhbmdlJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBUEkgY2FjaGUgKHN0b3JlcyB2b2xhdGlsZSBBUEkgcmVzcG9uc2VzKVxuICAgIGNvbnN0IHsgZGF0YTogY2FjaGVEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2FwaV9jYWNoZScpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5saW1pdCgzKVxuICAgIFxuICAgIHJlc3VsdHMudm9sYXRpbGUuYXBpX2NhY2hlID0ge1xuICAgICAgcm93czogY2FjaGVEYXRhPy5sZW5ndGggfHwgMCxcbiAgICAgIHNhbXBsZTogY2FjaGVEYXRhPy5bMF0gfHwgbnVsbCxcbiAgICAgIHN0cmF0ZWd5OiAnQ2FjaGUgQVBJIHJlc3BvbnNlcyAxLTQgaG91cnMnLFxuICAgICAgYXBpQ2FsbHNOZWVkZWQ6ICdZZXMgLSB3aGVuIGNhY2hlIGV4cGlyZXMnXG4gICAgfVxuICAgIFxuICAgIC8vIFdvcmtmbG93IHNlc3Npb25zIChsZWFybmluZyBpbnRlbGxpZ2VuY2UpXG4gICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uc0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnd29ya2Zsb3dfc2Vzc2lvbnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAubGltaXQoMilcbiAgICBcbiAgICByZXN1bHRzLmluc3RpdHV0aW9uYWwgPSB7XG4gICAgICB3b3JrZmxvd19zZXNzaW9uczoge1xuICAgICAgICByb3dzOiBzZXNzaW9uc0RhdGE/Lmxlbmd0aCB8fCAwLFxuICAgICAgICBzYW1wbGU6IHNlc3Npb25zRGF0YT8uWzBdIHx8IG51bGwsXG4gICAgICAgIHN0cmF0ZWd5OiAnSW5zdGl0dXRpb25hbCBsZWFybmluZyAtIGdyb3dzIG92ZXIgdGltZScsXG4gICAgICAgIHZhbHVlOiAnMjQwKyB1c2VyIHNlc3Npb25zIGZvciBwYXR0ZXJuIHJlY29nbml0aW9uJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDb3VudHJpZXMgYW5kIHRyYW5zbGF0aW9uc1xuICAgIGNvbnN0IHsgY291bnQ6IGNvdW50cmllc0NvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvdW50cmllcycpXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxuICAgIFxuICAgIGNvbnN0IHsgY291bnQ6IHRyYW5zbGF0aW9uc0NvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3RyYW5zbGF0aW9ucycpXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxuICAgIFxuICAgIHJlc3VsdHMuc3RhYmxlLmNvdW50cmllcyA9IHtcbiAgICAgIHJvd3M6IGNvdW50cmllc0NvdW50IHx8IDAsXG4gICAgICBzdHJhdGVneTogJ0dlb2dyYXBoaWMgZGF0YSAtIGNhY2hlIGZvcmV2ZXInXG4gICAgfVxuICAgIFxuICAgIHJlc3VsdHMuc3RhYmxlLnRyYW5zbGF0aW9ucyA9IHtcbiAgICAgIHJvd3M6IHRyYW5zbGF0aW9uc0NvdW50IHx8IDAsXG4gICAgICBzdHJhdGVneTogJ1RyaWxpbmd1YWwgc3VwcG9ydCAoRU4vRVMvRlIpIC0gY2FjaGUgZm9yZXZlcidcbiAgICB9XG4gICAgXG4gICAgLy8gU3VtbWFyeSBvZiBzdHJhdGVneVxuICAgIHJlc3VsdHMuc3RyYXRlZ3kgPSB7XG4gICAgICBzdGFibGU6IHtcbiAgICAgICAgZGVzY3JpcHRpb246ICdRdWVyeSB0aGVzZSB0YWJsZXMgZGlyZWN0bHkgLSBuZXZlciBleHBpcmVzLCBubyBBUEkgY2FsbHMnLFxuICAgICAgICB0YWJsZXM6IFsndXNtY2FfdGFyaWZmX3JhdGVzJywgJ3VzX3BvcnRzJywgJ2NvbXRyYWRlX3JlZmVyZW5jZScsICd0cmFkZV9mbG93cycsICdjb3VudHJpZXMnLCAndHJhbnNsYXRpb25zJ10sXG4gICAgICAgIGJlbmVmaXQ6ICdJbnN0YW50IHJlc3BvbnNlcywgemVybyBBUEkgY29zdHMnLFxuICAgICAgICBjYWNoZVRpbWU6ICdGT1JFVkVSJ1xuICAgICAgfSxcbiAgICAgIHZvbGF0aWxlOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIHRoZXNlIHdpdGggZnJlc2ggQVBJIGRhdGEgcGVyIHVzZXInLFxuICAgICAgICB0YWJsZXM6IFsnY3VycmVudF9tYXJrZXRfYWxlcnRzJywgJ2FwaV9jYWNoZScsICdjb3VudHJ5X3Jpc2tfc2NvcmVzJ10sXG4gICAgICAgIGJlbmVmaXQ6ICdSZWFsLXRpbWUgbWFya2V0IGludGVsbGlnZW5jZScsXG4gICAgICAgIGNhY2hlVGltZTogJzEtNCBob3VycyBkZXBlbmRpbmcgb24gdm9sYXRpbGl0eSdcbiAgICAgIH0sXG4gICAgICBlZmZpY2llbmN5OiB7XG4gICAgICAgIGFwaUNhbGxzU2F2ZWQ6ICc4MCUrJyxcbiAgICAgICAgY29zdFJlZHVjdGlvbjogJ1NpZ25pZmljYW50IC0gbW9zdCBkYXRhIGZyb20gc3RhYmxlIHRhYmxlcycsXG4gICAgICAgIHNwZWVkSW1wcm92ZW1lbnQ6ICdJbnN0YW50IHJlc3BvbnNlcyBmb3Igc3RhYmxlIGRhdGEnXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvdGFsVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICBsb2dJbmZvKGDinIUgREFUQUJBU0UgU1RSVUNUVVJFIFRFU1QgQ09NUExFVEUgLSAke3RvdGFsVGltZX1tc2ApXG4gICAgbG9nSW5mbyhg8J+TiiBTdGFibGUgdGFibGVzIHRlc3RlZDogJHtPYmplY3Qua2V5cyhyZXN1bHRzLnN0YWJsZSkubGVuZ3RofWApXG4gICAgbG9nSW5mbyhg8J+UpSBWb2xhdGlsZSB0YWJsZXMgdGVzdGVkOiAke09iamVjdC5rZXlzKHJlc3VsdHMudm9sYXRpbGUpLmxlbmd0aH1gKVxuICAgIGxvZ0luZm8oJ+KaoSBTdHJhdGVneTogUGVyZmVjdCBzZXBhcmF0aW9uIGFjaGlldmVkIScpXG4gICAgXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0cylcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcign4p2MIERBVEFCQVNFIFNUUlVDVFVSRSBURVNUIEZBSUxFRCcsIHsgZXJyb3IgfSlcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0RhdGFiYXNlIHRlc3QgZmFpbGVkJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdWdnZXN0aW9uOiAnQ2hlY2sgU3VwYWJhc2UgY29ubmVjdGlvbiBhbmQgdGFibGUgcGVybWlzc2lvbnMnXG4gICAgfSlcbiAgfVxufSJdLCJuYW1lcyI6WyJnZXRTdXBhYmFzZUNsaWVudCIsImxvZ0luZm8iLCJsb2dFcnJvciIsImxvZ0RCUXVlcnkiLCJzdXBhYmFzZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwicmVzdWx0cyIsImRhdGEiLCJ1c21jYURhdGEiLCJlcnJvciIsInVzbWNhRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwibGltaXQiLCJsZW5ndGgiLCJzdGFibGUiLCJ1c21jYV90YXJpZmZfcmF0ZXMiLCJyb3dzIiwic2FtcGxlIiwic3RyYXRlZ3kiLCJhcGlDYWxsc05lZWRlZCIsIm1lc3NhZ2UiLCJwb3J0c0RhdGEiLCJ1c19wb3J0cyIsImNvdW50IiwiY29tdHJhZGVDb3VudCIsImhlYWQiLCJjb210cmFkZVNhbXBsZSIsImNvbXRyYWRlX3JlZmVyZW5jZSIsInRvdGFsUm93cyIsInZhbHVlIiwidG9Mb2NhbGVTdHJpbmciLCJ0cmFkZUZsb3dDb3VudCIsInRyYWRlRmxvd1NhbXBsZSIsInRyYWRlX2Zsb3dzIiwiYWxlcnRzRGF0YSIsInZvbGF0aWxlIiwiY3VycmVudF9tYXJrZXRfYWxlcnRzIiwiY2FjaGVEYXRhIiwiYXBpX2NhY2hlIiwic2Vzc2lvbnNEYXRhIiwiaW5zdGl0dXRpb25hbCIsIndvcmtmbG93X3Nlc3Npb25zIiwiY291bnRyaWVzQ291bnQiLCJ0cmFuc2xhdGlvbnNDb3VudCIsImNvdW50cmllcyIsInRyYW5zbGF0aW9ucyIsImRlc2NyaXB0aW9uIiwidGFibGVzIiwiYmVuZWZpdCIsImNhY2hlVGltZSIsImVmZmljaWVuY3kiLCJhcGlDYWxsc1NhdmVkIiwiY29zdFJlZHVjdGlvbiIsInNwZWVkSW1wcm92ZW1lbnQiLCJ0b3RhbFRpbWUiLCJPYmplY3QiLCJrZXlzIiwic3RhdHVzIiwianNvbiIsInN1Z2dlc3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/database-structure-test.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdatabase-structure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdatabase-structure-test.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();