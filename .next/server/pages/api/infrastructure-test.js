"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/infrastructure-test";
exports.ids = ["pages/api/infrastructure-test"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "ioredis":
/*!**************************!*\
  !*** external "ioredis" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("ioredis");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Finfrastructure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Finfrastructure-test.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Finfrastructure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Finfrastructure-test.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_infrastructure_test_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/infrastructure-test.js */ \"(api)/./pages/api/infrastructure-test.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_infrastructure_test_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_infrastructure_test_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/infrastructure-test\",\n        pathname: \"/api/infrastructure-test\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_infrastructure_test_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmluZnJhc3RydWN0dXJlLXRlc3QmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmluZnJhc3RydWN0dXJlLXRlc3QuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDK0Q7QUFDL0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDhEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw4REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlhbmdsZS1pbnRlbGxpZ2VuY2UtcGxhdGZvcm0vPzgwMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9pbmZyYXN0cnVjdHVyZS10ZXN0LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW5mcmFzdHJ1Y3R1cmUtdGVzdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2luZnJhc3RydWN0dXJlLXRlc3RcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Finfrastructure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Finfrastructure-test.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/database/query-optimizer.js":
/*!*****************************************!*\
  !*** ./lib/database/query-optimizer.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryOptimizer: () => (/* binding */ QueryOptimizer),\n/* harmony export */   SpecializedQueries: () => (/* binding */ SpecializedQueries),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   queryOptimizer: () => (/* binding */ queryOptimizer)\n/* harmony export */ });\n/* harmony import */ var _supabase_client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../supabase-client.js */ \"(api)/./lib/supabase-client.js\");\n/* harmony import */ var _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/memory-cache-fallback.js */ \"(api)/./lib/utils/memory-cache-fallback.js\");\n/* harmony import */ var _utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/production-logger.js */ \"(api)/./lib/utils/production-logger.js\");\n/**\n * Query Optimizer for Triangle Intelligence Platform\n * Reduces response times from 4.9s to <1s through intelligent caching and query optimization\n * Critical for production readiness and scalability\n */ \n\n\nconst supabase = (0,_supabase_client_js__WEBPACK_IMPORTED_MODULE_0__.getSupabaseClient)();\n/**\n * High-Performance Query Optimizer\n * Implements multiple optimization strategies:\n * 1. Intelligent caching with TTL\n * 2. Query result batching\n * 3. Selective field loading\n * 4. Connection pooling awareness\n */ class QueryOptimizer {\n    constructor(){\n        this.queryCache = new Map();\n        this.batchQueue = new Map();\n        this.batchTimeout = 50 // 50ms batching window\n        ;\n        this.defaultCacheTTL = 300 // 5 minutes for database queries\n        ;\n        (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logInfo)(\"QueryOptimizer initialized with aggressive caching\");\n    }\n    /**\n   * Optimized triangle routing query\n   * Target: <500ms response time\n   */ async getTriangleRoutingData(params) {\n        const startTime = Date.now();\n        const { origin, destination, hsCode, businessType } = params;\n        // Create cache key for this specific query\n        const cacheKey = `triangle_routing:${origin}:${destination}:${hsCode}:${businessType}`;\n        // Try cache first\n        const cached = await _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__.universalCache.get(cacheKey);\n        if (cached) {\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logPerformance)(\"triangle_routing_query\", Date.now() - startTime, {\n                source: \"CACHE_HIT\",\n                origin,\n                destination,\n                recordsFound: cached.totalRecords || 0\n            });\n            return cached;\n        }\n        try {\n            // Optimized queries with selective field loading\n            const [tradeFlowsResult, triangleOpportunities] = await Promise.all([\n                this.getOptimizedTradeFlows(origin, destination, hsCode),\n                this.getTriangleOpportunities(origin, destination)\n            ]);\n            const result = {\n                direct: tradeFlowsResult,\n                triangleOptions: triangleOpportunities,\n                analysis: {\n                    confidence: this.calculateConfidence(tradeFlowsResult, triangleOpportunities),\n                    dataQuality: \"High - Optimized queries\",\n                    recommendTriangle: triangleOpportunities.length > 0\n                },\n                efficiency: {\n                    apiCallsMade: 0,\n                    allFromDatabase: true,\n                    responseTime: Date.now() - startTime,\n                    optimized: true\n                },\n                totalRecords: tradeFlowsResult.flow?.totalRecords || 0\n            };\n            // Cache the result with shorter TTL for dynamic data\n            await _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__.universalCache.set(cacheKey, result, this.defaultCacheTTL);\n            const duration = Date.now() - startTime;\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logPerformance)(\"triangle_routing_query\", duration, {\n                source: \"DATABASE_OPTIMIZED\",\n                origin,\n                destination,\n                recordsFound: result.totalRecords,\n                triangleRoutes: triangleOpportunities.length\n            });\n            // Alert if query is still slow\n            if (duration > 1000) {\n                (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logWarn)(\"Slow triangle routing query detected\", {\n                    duration,\n                    params,\n                    recordsAnalyzed: result.totalRecords\n                });\n            }\n            return result;\n        } catch (error) {\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logError)(\"Triangle routing query failed\", {\n                error: error.message,\n                params,\n                duration: Date.now() - startTime\n            });\n            throw error;\n        }\n    }\n    /**\n   * Optimized trade flows query with intelligent field selection\n   */ async getOptimizedTradeFlows(origin, destination, hsCode) {\n        const startTime = Date.now();\n        // Only select essential fields to reduce data transfer (using correct column names)\n        const essentialFields = [\n            \"id\",\n            \"reporter_country\",\n            \"partner_country\",\n            \"hs_code\",\n            \"trade_flow\",\n            \"trade_value\",\n            \"quantity\"\n        ].join(\",\");\n        // Build optimized query with indexes\n        let query = supabase.from(\"trade_flows\").select(essentialFields);\n        // Add filters in order of database indexes (using correct column names)\n        if (origin && origin !== \"ALL\") {\n            query = query.eq(\"partner_country\", origin === \"CN\" ? \"China\" : origin === \"KR\" ? \"South Korea\" : origin === \"JP\" ? \"Japan\" : origin);\n        }\n        if (destination && destination !== \"ALL\") {\n            query = query.eq(\"reporter_country\", destination === \"US\" || destination === \"USA\" ? \"United States\" : destination);\n        }\n        if (hsCode && hsCode !== \"ALL\") {\n            // Use prefix matching for HS codes to utilize index\n            const hsPrefix = hsCode.substring(0, 4);\n            query = query.like(\"hs_code\", `${hsPrefix}%`);\n        }\n        // Limit results to prevent memory issues\n        query = query.limit(1000);\n        const { data, error } = await query;\n        const duration = Date.now() - startTime;\n        (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logDBQuery)(\"trade_flows\", \"SELECT_OPTIMIZED\", duration, data?.length);\n        if (error) {\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logError)(\"Optimized trade flows query failed\", {\n                error,\n                origin,\n                destination,\n                hsCode\n            });\n            throw error;\n        }\n        return {\n            flow: {\n                records: data || [],\n                totalRecords: data?.length || 0\n            }\n        };\n    }\n    /**\n   * Fast triangle opportunities query\n   */ async getTriangleOpportunities(origin, destination) {\n        const startTime = Date.now();\n        // Hardcoded high-performance triangle routes for common scenarios\n        const commonTriangleRoutes = this.getCommonTriangleRoutes(origin, destination);\n        if (commonTriangleRoutes.length > 0) {\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logPerformance)(\"triangle_opportunities\", Date.now() - startTime, {\n                source: \"STATIC_ROUTES\",\n                routesFound: commonTriangleRoutes.length\n            });\n            return commonTriangleRoutes;\n        }\n        // Dynamic query for uncommon routes\n        const triangleRoutes = [];\n        // Mexico route (most common)\n        if (![\n            \"MX\",\n            \"US\",\n            \"CA\"\n        ].includes(origin)) {\n            triangleRoutes.push({\n                route: `${origin} → Mexico → USA`,\n                usmcaTariff: 0,\n                leg1: [],\n                leg2: [],\n                savings: \"High\",\n                complexity: 2\n            });\n        }\n        // Canada route  \n        if (![\n            \"CA\",\n            \"US\"\n        ].includes(origin) && [\n            \"US\",\n            \"USA\"\n        ].includes(destination)) {\n            triangleRoutes.push({\n                route: `${origin} → Canada → USA`,\n                usmcaTariff: 0,\n                leg1: [],\n                leg2: [],\n                savings: \"Medium\",\n                complexity: 2\n            });\n        }\n        const duration = Date.now() - startTime;\n        (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logPerformance)(\"triangle_opportunities\", duration, {\n            source: \"DYNAMIC_ROUTES\",\n            routesFound: triangleRoutes.length\n        });\n        return triangleRoutes;\n    }\n    /**\n   * Pre-computed common triangle routes for instant response\n   */ getCommonTriangleRoutes(origin, destination) {\n        const routes = [];\n        // High-volume country pairs get pre-computed routes\n        const highVolumeOrigins = [\n            \"CN\",\n            \"VN\",\n            \"TW\",\n            \"KR\",\n            \"IN\",\n            \"TH\",\n            \"MY\",\n            \"JP\"\n        ];\n        if (highVolumeOrigins.includes(origin) && [\n            \"US\",\n            \"USA\"\n        ].includes(destination)) {\n            routes.push({\n                route: `${origin} → Mexico → USA`,\n                usmcaTariff: 0,\n                leg1: [],\n                leg2: [],\n                savings: \"High - 0% USMCA tariffs\",\n                complexity: 2,\n                precomputed: true\n            });\n            routes.push({\n                route: `${origin} → Canada → USA`,\n                usmcaTariff: 0,\n                leg1: [],\n                leg2: [],\n                savings: \"Medium - 0% USMCA tariffs\",\n                complexity: 2,\n                precomputed: true\n            });\n        }\n        return routes;\n    }\n    /**\n   * Calculate confidence score based on data availability\n   */ calculateConfidence(tradeFlowsResult, triangleOpportunities) {\n        let confidence = 50 // Base confidence\n        ;\n        const recordCount = tradeFlowsResult.flow?.totalRecords || 0;\n        // Boost confidence based on data availability\n        if (recordCount > 100) confidence += 20;\n        else if (recordCount > 10) confidence += 10;\n        // Boost for triangle route availability\n        if (triangleOpportunities.length > 0) confidence += 20;\n        // Cap at reasonable maximum\n        return Math.min(confidence, 95);\n    }\n    /**\n   * Clear cache for specific query patterns\n   */ async clearCache(pattern = null) {\n        if (pattern) {\n            // Clear specific pattern - implementation depends on cache backend\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logInfo)(\"Clearing cache for pattern\", {\n                pattern\n            });\n        } else {\n            this.queryCache.clear();\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logInfo)(\"Query cache cleared completely\");\n        }\n    }\n    /**\n   * Get optimization statistics\n   */ getStats() {\n        return {\n            cacheSize: this.queryCache.size,\n            batchQueueSize: this.batchQueue.size,\n            optimizationsActive: true,\n            cacheHitRate: \"Tracked by UniversalCache\"\n        };\n    }\n}\n/**\n * Specific optimizations for different query types\n */ class SpecializedQueries {\n    /**\n   * Lightning-fast HS code lookup (target: <100ms)\n   */ static async getHSCodeInfo(hsCode) {\n        const startTime = Date.now();\n        const cacheKey = `hs_code:${hsCode}`;\n        const cached = await _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__.universalCache.get(cacheKey);\n        if (cached) {\n            (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logPerformance)(\"hs_code_lookup\", Date.now() - startTime, {\n                source: \"CACHE\",\n                hsCode\n            });\n            return cached;\n        }\n        const { data, error } = await supabase.from(\"comtrade_reference\").select(\"classification_code, text\").eq(\"classification_code\", hsCode).limit(1);\n        if (error) throw error;\n        const result = {\n            hsCode,\n            description: data?.[0]?.text || \"Description not found\",\n            found: data?.length > 0\n        };\n        // Cache HS codes for 24 hours (they rarely change)\n        await _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__.universalCache.set(cacheKey, result, 86400);\n        (0,_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_2__.logPerformance)(\"hs_code_lookup\", Date.now() - startTime, {\n            source: \"DATABASE\",\n            hsCode,\n            found: result.found\n        });\n        return result;\n    }\n    /**\n   * Fast country information lookup\n   */ static async getCountryInfo(countryCode) {\n        const cacheKey = `country:${countryCode}`;\n        const cached = await _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__.universalCache.get(cacheKey);\n        if (cached) return cached;\n        const { data, error } = await supabase.from(\"countries\").select(\"iso_alpha2, country_name_en, region\").eq(\"iso_alpha2\", countryCode).limit(1);\n        if (error) throw error;\n        const result = {\n            code: countryCode,\n            name: data?.[0]?.country_name_en || countryCode,\n            region: data?.[0]?.region || \"Unknown\",\n            found: data?.length > 0\n        };\n        // Cache country data for 24 hours\n        await _utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_1__.universalCache.set(cacheKey, result, 86400);\n        return result;\n    }\n}\n// Export singleton optimizer instance\nconst queryOptimizer = new QueryOptimizer();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (queryOptimizer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UvcXVlcnktb3B0aW1pemVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7OztDQUlDLEdBRXdEO0FBQ1M7QUFDb0M7QUFFdEcsTUFBTU8sV0FBV1Asc0VBQWlCQTtBQUVsQzs7Ozs7OztDQU9DLEdBQ00sTUFBTVE7SUFDWEMsYUFBYztRQUNaLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUlDO1FBQ3RCLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUlEO1FBQ3RCLElBQUksQ0FBQ0UsWUFBWSxHQUFHLEdBQUcsdUJBQXVCOztRQUM5QyxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJLGlDQUFpQzs7UUFFNURaLG9FQUFPQSxDQUFDO0lBQ1Y7SUFFQTs7O0dBR0MsR0FDRCxNQUFNYSx1QkFBdUJDLE1BQU0sRUFBRTtRQUNuQyxNQUFNQyxZQUFZQyxLQUFLQyxHQUFHO1FBQzFCLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxXQUFXLEVBQUVDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUdQO1FBRXRELDJDQUEyQztRQUMzQyxNQUFNUSxXQUFXLENBQUMsaUJBQWlCLEVBQUVKLE9BQU8sQ0FBQyxFQUFFQyxZQUFZLENBQUMsRUFBRUMsT0FBTyxDQUFDLEVBQUVDLGFBQWEsQ0FBQztRQUV0RixrQkFBa0I7UUFDbEIsTUFBTUUsU0FBUyxNQUFNeEIsMkVBQWNBLENBQUN5QixHQUFHLENBQUNGO1FBQ3hDLElBQUlDLFFBQVE7WUFDVnBCLDJFQUFjQSxDQUFDLDBCQUEwQmEsS0FBS0MsR0FBRyxLQUFLRixXQUFXO2dCQUMvRFUsUUFBUTtnQkFDUlA7Z0JBQ0FDO2dCQUNBTyxjQUFjSCxPQUFPSSxZQUFZLElBQUk7WUFDdkM7WUFDQSxPQUFPSjtRQUNUO1FBRUEsSUFBSTtZQUNGLGlEQUFpRDtZQUNqRCxNQUFNLENBQUNLLGtCQUFrQkMsc0JBQXNCLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO2dCQUNsRSxJQUFJLENBQUNDLHNCQUFz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QUFRO1lBQ2hDQyxPQUFPaEMsTUFBTXZCLFNBQVM7UUFDeEI7UUFFQSxtREFBbUQ7UUFDbkQsTUFBTTNDLDJFQUFjQSxDQUFDa0QsR0FBRyxDQUFDM0IsVUFBVVksUUFBUTtRQUUzQy9CLDJFQUFjQSxDQUFDLGtCQUFrQmEsS0FBS0MsR0FBRyxLQUFLRixXQUFXO1lBQ3ZEVSxRQUFRO1lBQ1JMO1lBQ0E2RSxPQUFPL0QsT0FBTytELEtBQUs7UUFDckI7UUFFQSxPQUFPL0Q7SUFDVDtJQUVBOztHQUVDLEdBQ0QsYUFBYWdFLGVBQWVDLFdBQVcsRUFBRTtRQUN2QyxNQUFNN0UsV0FBVyxDQUFDLFFBQVEsRUFBRTZFLFlBQVksQ0FBQztRQUN6QyxNQUFNNUUsU0FBUyxNQUFNeEIsMkVBQWNBLENBQUN5QixHQUFHLENBQUNGO1FBRXhDLElBQUlDLFFBQVEsT0FBT0E7UUFFbkIsTUFBTSxFQUFFMEMsSUFBSSxFQUFFWixLQUFLLEVBQUUsR0FBRyxNQUFNaEQsU0FDM0JxRCxJQUFJLENBQUMsYUFDTEMsTUFBTSxDQUFDLHVDQUNQQyxFQUFFLENBQUMsY0FBY3VDLGFBQ2pCbkMsS0FBSyxDQUFDO1FBRVQsSUFBSVgsT0FBTyxNQUFNQTtRQUVqQixNQUFNbkIsU0FBUztZQUNia0UsTUFBTUQ7WUFDTkUsTUFBTXBDLE1BQU0sQ0FBQyxFQUFFLEVBQUVxQyxtQkFBbUJIO1lBQ3BDSSxRQUFRdEMsTUFBTSxDQUFDLEVBQUUsRUFBRXNDLFVBQVU7WUFDN0JOLE9BQU9oQyxNQUFNdkIsU0FBUztRQUN4QjtRQUVBLGtDQUFrQztRQUNsQyxNQUFNM0MsMkVBQWNBLENBQUNrRCxHQUFHLENBQUMzQixVQUFVWSxRQUFRO1FBRTNDLE9BQU9BO0lBQ1Q7QUFDRjtBQUVBLHNDQUFzQztBQUMvQixNQUFNc0UsaUJBQWlCLElBQUlsRyxpQkFBZ0I7QUFDbEQsaUVBQWVrRyxjQUFjQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vbGliL2RhdGFiYXNlL3F1ZXJ5LW9wdGltaXplci5qcz85OThkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUXVlcnkgT3B0aW1pemVyIGZvciBUcmlhbmdsZSBJbnRlbGxpZ2VuY2UgUGxhdGZvcm1cbiAqIFJlZHVjZXMgcmVzcG9uc2UgdGltZXMgZnJvbSA0LjlzIHRvIDwxcyB0aHJvdWdoIGludGVsbGlnZW50IGNhY2hpbmcgYW5kIHF1ZXJ5IG9wdGltaXphdGlvblxuICogQ3JpdGljYWwgZm9yIHByb2R1Y3Rpb24gcmVhZGluZXNzIGFuZCBzY2FsYWJpbGl0eVxuICovXG5cbmltcG9ydCB7IGdldFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnLi4vc3VwYWJhc2UtY2xpZW50LmpzJ1xuaW1wb3J0IHsgdW5pdmVyc2FsQ2FjaGUgfSBmcm9tICcuLi91dGlscy9tZW1vcnktY2FjaGUtZmFsbGJhY2suanMnXG5pbXBvcnQgeyBsb2dJbmZvLCBsb2dXYXJuLCBsb2dFcnJvciwgbG9nUGVyZm9ybWFuY2UsIGxvZ0RCUXVlcnkgfSBmcm9tICcuLi91dGlscy9wcm9kdWN0aW9uLWxvZ2dlci5qcydcblxuY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZUNsaWVudCgpXG5cbi8qKlxuICogSGlnaC1QZXJmb3JtYW5jZSBRdWVyeSBPcHRpbWl6ZXJcbiAqIEltcGxlbWVudHMgbXVsdGlwbGUgb3B0aW1pemF0aW9uIHN0cmF0ZWdpZXM6XG4gKiAxLiBJbnRlbGxpZ2VudCBjYWNoaW5nIHdpdGggVFRMXG4gKiAyLiBRdWVyeSByZXN1bHQgYmF0Y2hpbmdcbiAqIDMuIFNlbGVjdGl2ZSBmaWVsZCBsb2FkaW5nXG4gKiA0LiBDb25uZWN0aW9uIHBvb2xpbmcgYXdhcmVuZXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWVyeU9wdGltaXplciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucXVlcnlDYWNoZSA9IG5ldyBNYXAoKVxuICAgIHRoaXMuYmF0Y2hRdWV1ZSA9IG5ldyBNYXAoKVxuICAgIHRoaXMuYmF0Y2hUaW1lb3V0ID0gNTAgLy8gNTBtcyBiYXRjaGluZyB3aW5kb3dcbiAgICB0aGlzLmRlZmF1bHRDYWNoZVRUTCA9IDMwMCAvLyA1IG1pbnV0ZXMgZm9yIGRhdGFiYXNlIHF1ZXJpZXNcbiAgICBcbiAgICBsb2dJbmZvKCdRdWVyeU9wdGltaXplciBpbml0aWFsaXplZCB3aXRoIGFnZ3Jlc3NpdmUgY2FjaGluZycpXG4gIH1cblxuICAvKipcbiAgICogT3B0aW1pemVkIHRyaWFuZ2xlIHJvdXRpbmcgcXVlcnlcbiAgICogVGFyZ2V0OiA8NTAwbXMgcmVzcG9uc2UgdGltZVxuICAgKi9cbiAgYXN5bmMgZ2V0VHJpYW5nbGVSb3V0aW5nRGF0YShwYXJhbXMpIHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgY29uc3QgeyBvcmlnaW4sIGRlc3RpbmF0aW9uLCBoc0NvZGUsIGJ1c2luZXNzVHlwZSB9ID0gcGFyYW1zXG4gICAgXG4gICAgLy8gQ3JlYXRlIGNhY2hlIGtleSBmb3IgdGhpcyBzcGVjaWZpYyBxdWVyeVxuICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRyaWFuZ2xlX3JvdXRpbmc6JHtvcmlnaW59OiR7ZGVzdGluYXRpb259OiR7aHNDb2RlfToke2J1c2luZXNzVHlwZX1gXG4gICAgXG4gICAgLy8gVHJ5IGNhY2hlIGZpcnN0XG4gICAgY29uc3QgY2FjaGVkID0gYXdhaXQgdW5pdmVyc2FsQ2FjaGUuZ2V0KGNhY2hlS2V5KVxuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIGxvZ1BlcmZvcm1hbmNlKCd0cmlhbmdsZV9yb3V0aW5nX3F1ZXJ5JywgRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSwge1xuICAgICAgICBzb3VyY2U6ICdDQUNIRV9ISVQnLFxuICAgICAgICBvcmlnaW4sXG4gICAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgICByZWNvcmRzRm91bmQ6IGNhY2hlZC50b3RhbFJlY29yZHMgfHwgMFxuICAgICAgfSlcbiAgICAgIHJldHVybiBjYWNoZWRcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gT3B0aW1pemVkIHF1ZXJpZXMgd2l0aCBzZWxlY3RpdmUgZmllbGQgbG9hZGluZ1xuICAgICAgY29uc3QgW3RyYWRlRmxvd3NSZXN1bHQsIHRyaWFuZ2xlT3Bwb3J0dW5pdGllc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuZ2V0T3B0aW1pemVkVHJhZGVGbG93cyhvcmlnaW4sIGRlc3RpbmF0aW9uLCBoc0NvZGUpLFxuICAgICAgICB0aGlzLmdldFRyaWFuZ2xlT3Bwb3J0dW5pdGllcyhvcmlnaW4sIGRlc3RpbmF0aW9uKVxuICAgICAgXSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBkaXJlY3Q6IHRyYWRlRmxvd3NSZXN1bHQsXG4gICAgICAgIHRyaWFuZ2xlT3B0aW9uczogdHJpYW5nbGVPcHBvcnR1bml0aWVzLFxuICAgICAgICBhbmFseXNpczoge1xuICAgICAgICAgIGNvbmZpZGVuY2U6IHRoaXMuY2FsY3VsYXRlQ29uZmlkZW5jZSh0cmFkZUZsb3dzUmVzdWx0LCB0cmlhbmdsZU9wcG9ydHVuaXRpZXMpLFxuICAgICAgICAgIGRhdGFRdWFsaXR5OiAnSGlnaCAtIE9wdGltaXplZCBxdWVyaWVzJyxcbiAgICAgICAgICByZWNvbW1lbmRUcmlhbmdsZTogdHJpYW5nbGVPcHBvcnR1bml0aWVzLmxlbmd0aCA+IDBcbiAgICAgICAgfSxcbiAgICAgICAgZWZmaWNpZW5jeToge1xuICAgICAgICAgIGFwaUNhbGxzTWFkZTogMCxcbiAgICAgICAgICBhbGxGcm9tRGF0YWJhc2U6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIG9wdGltaXplZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB0b3RhbFJlY29yZHM6IHRyYWRlRmxvd3NSZXN1bHQuZmxvdz8udG90YWxSZWNvcmRzIHx8IDBcbiAgICAgIH1cblxuICAgICAgLy8gQ2FjaGUgdGhlIHJlc3VsdCB3aXRoIHNob3J0ZXIgVFRMIGZvciBkeW5hbWljIGRhdGFcbiAgICAgIGF3YWl0IHVuaXZlcnNhbENhY2hlLnNldChjYWNoZUtleSwgcmVzdWx0LCB0aGlzLmRlZmF1bHRDYWNoZVRUTClcbiAgICAgIFxuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICBsb2dQZXJmb3JtYW5jZSgndHJpYW5nbGVfcm91dGluZ19xdWVyeScsIGR1cmF0aW9uLCB7XG4gICAgICAgIHNvdXJjZTogJ0RBVEFCQVNFX09QVElNSVpFRCcsXG4gICAgICAgIG9yaWdpbixcbiAgICAgICAgZGVzdGluYXRpb24sXG4gICAgICAgIHJlY29yZHNGb3VuZDogcmVzdWx0LnRvdGFsUmVjb3JkcyxcbiAgICAgICAgdHJpYW5nbGVSb3V0ZXM6IHRyaWFuZ2xlT3Bwb3J0dW5pdGllcy5sZW5ndGhcbiAgICAgIH0pXG5cbiAgICAgIC8vIEFsZXJ0IGlmIHF1ZXJ5IGlzIHN0aWxsIHNsb3dcbiAgICAgIGlmIChkdXJhdGlvbiA+IDEwMDApIHtcbiAgICAgICAgbG9nV2FybignU2xvdyB0cmlhbmdsZSByb3V0aW5nIHF1ZXJ5IGRldGVjdGVkJywge1xuICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICByZWNvcmRzQW5hbHl6ZWQ6IHJlc3VsdC50b3RhbFJlY29yZHNcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdFxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKCdUcmlhbmdsZSByb3V0aW5nIHF1ZXJ5IGZhaWxlZCcsIHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpbWl6ZWQgdHJhZGUgZmxvd3MgcXVlcnkgd2l0aCBpbnRlbGxpZ2VudCBmaWVsZCBzZWxlY3Rpb25cbiAgICovXG4gIGFzeW5jIGdldE9wdGltaXplZFRyYWRlRmxvd3Mob3JpZ2luLCBkZXN0aW5hdGlvbiwgaHNDb2RlKSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIFxuICAgIC8vIE9ubHkgc2VsZWN0IGVzc2VudGlhbCBmaWVsZHMgdG8gcmVkdWNlIGRhdGEgdHJhbnNmZXIgKHVzaW5nIGNvcnJlY3QgY29sdW1uIG5hbWVzKVxuICAgIGNvbnN0IGVzc2VudGlhbEZpZWxkcyA9IFtcbiAgICAgICdpZCcsXG4gICAgICAncmVwb3J0ZXJfY291bnRyeScsXG4gICAgICAncGFydG5lcl9jb3VudHJ5JywgXG4gICAgICAnaHNfY29kZScsXG4gICAgICAndHJhZGVfZmxvdycsXG4gICAgICAndHJhZGVfdmFsdWUnLFxuICAgICAgJ3F1YW50aXR5J1xuICAgIF0uam9pbignLCcpXG5cbiAgICAvLyBCdWlsZCBvcHRpbWl6ZWQgcXVlcnkgd2l0aCBpbmRleGVzXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0cmFkZV9mbG93cycpXG4gICAgICAuc2VsZWN0KGVzc2VudGlhbEZpZWxkcylcbiAgICAgIFxuICAgIC8vIEFkZCBmaWx0ZXJzIGluIG9yZGVyIG9mIGRhdGFiYXNlIGluZGV4ZXMgKHVzaW5nIGNvcnJlY3QgY29sdW1uIG5hbWVzKVxuICAgIGlmIChvcmlnaW4gJiYgb3JpZ2luICE9PSAnQUxMJykge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncGFydG5lcl9jb3VudHJ5Jywgb3JpZ2luID09PSAnQ04nID8gJ0NoaW5hJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW4gPT09ICdLUicgPyAnU291dGggS29yZWEnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbiA9PT0gJ0pQJyA/ICdKYXBhbicgOiBvcmlnaW4pXG4gICAgfVxuICAgIFxuICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbiAhPT0gJ0FMTCcpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3JlcG9ydGVyX2NvdW50cnknLCBkZXN0aW5hdGlvbiA9PT0gJ1VTJyB8fCBkZXN0aW5hdGlvbiA9PT0gJ1VTQScgPyAnVW5pdGVkIFN0YXRlcycgOiBkZXN0aW5hdGlvbilcbiAgICB9XG4gICAgXG4gICAgaWYgKGhzQ29kZSAmJiBoc0NvZGUgIT09ICdBTEwnKSB7XG4gICAgICAvLyBVc2UgcHJlZml4IG1hdGNoaW5nIGZvciBIUyBjb2RlcyB0byB1dGlsaXplIGluZGV4XG4gICAgICBjb25zdCBoc1ByZWZpeCA9IGhzQ29kZS5zdWJzdHJpbmcoMCwgNClcbiAgICAgIHF1ZXJ5ID0gcXVlcnkubGlrZSgnaHNfY29kZScsIGAke2hzUHJlZml4fSVgKVxuICAgIH1cbiAgICBcbiAgICAvLyBMaW1pdCByZXN1bHRzIHRvIHByZXZlbnQgbWVtb3J5IGlzc3Vlc1xuICAgIHF1ZXJ5ID0gcXVlcnkubGltaXQoMTAwMClcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5XG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgXG4gICAgbG9nREJRdWVyeSgndHJhZGVfZmxvd3MnLCAnU0VMRUNUX09QVElNSVpFRCcsIGR1cmF0aW9uLCBkYXRhPy5sZW5ndGgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKCdPcHRpbWl6ZWQgdHJhZGUgZmxvd3MgcXVlcnkgZmFpbGVkJywgeyBlcnJvciwgb3JpZ2luLCBkZXN0aW5hdGlvbiwgaHNDb2RlIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBmbG93OiB7XG4gICAgICAgIHJlY29yZHM6IGRhdGEgfHwgW10sXG4gICAgICAgIHRvdGFsUmVjb3JkczogZGF0YT8ubGVuZ3RoIHx8IDBcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmFzdCB0cmlhbmdsZSBvcHBvcnR1bml0aWVzIHF1ZXJ5XG4gICAqL1xuICBhc3luYyBnZXRUcmlhbmdsZU9wcG9ydHVuaXRpZXMob3JpZ2luLCBkZXN0aW5hdGlvbikge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICBcbiAgICAvLyBIYXJkY29kZWQgaGlnaC1wZXJmb3JtYW5jZSB0cmlhbmdsZSByb3V0ZXMgZm9yIGNvbW1vbiBzY2VuYXJpb3NcbiAgICBjb25zdCBjb21tb25UcmlhbmdsZVJvdXRlcyA9IHRoaXMuZ2V0Q29tbW9uVHJpYW5nbGVSb3V0ZXMob3JpZ2luLCBkZXN0aW5hdGlvbilcbiAgICBcbiAgICBpZiAoY29tbW9uVHJpYW5nbGVSb3V0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbG9nUGVyZm9ybWFuY2UoJ3RyaWFuZ2xlX29wcG9ydHVuaXRpZXMnLCBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLCB7XG4gICAgICAgIHNvdXJjZTogJ1NUQVRJQ19ST1VURVMnLFxuICAgICAgICByb3V0ZXNGb3VuZDogY29tbW9uVHJpYW5nbGVSb3V0ZXMubGVuZ3RoXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGNvbW1vblRyaWFuZ2xlUm91dGVzXG4gICAgfVxuXG4gICAgLy8gRHluYW1pYyBxdWVyeSBmb3IgdW5jb21tb24gcm91dGVzXG4gICAgY29uc3QgdHJpYW5nbGVSb3V0ZXMgPSBbXVxuICAgIFxuICAgIC8vIE1leGljbyByb3V0ZSAobW9zdCBjb21tb24pXG4gICAgaWYgKCFbJ01YJywgJ1VTJywgJ0NBJ10uaW5jbHVkZXMob3JpZ2luKSkge1xuICAgICAgdHJpYW5nbGVSb3V0ZXMucHVzaCh7XG4gICAgICAgIHJvdXRlOiBgJHtvcmlnaW59IOKGkiBNZXhpY28g4oaSIFVTQWAsXG4gICAgICAgIHVzbWNhVGFyaWZmOiAwLFxuICAgICAgICBsZWcxOiBbXSwgLy8gUG9wdWxhdGVkIHNlcGFyYXRlbHkgaWYgbmVlZGVkXG4gICAgICAgIGxlZzI6IFtdLFxuICAgICAgICBzYXZpbmdzOiAnSGlnaCcsXG4gICAgICAgIGNvbXBsZXhpdHk6IDJcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ2FuYWRhIHJvdXRlICBcbiAgICBpZiAoIVsnQ0EnLCAnVVMnXS5pbmNsdWRlcyhvcmlnaW4pICYmIFsnVVMnLCAnVVNBJ10uaW5jbHVkZXMoZGVzdGluYXRpb24pKSB7XG4gICAgICB0cmlhbmdsZVJvdXRlcy5wdXNoKHtcbiAgICAgICAgcm91dGU6IGAke29yaWdpbn0g4oaSIENhbmFkYSDihpIgVVNBYCxcbiAgICAgICAgdXNtY2FUYXJpZmY6IDAsXG4gICAgICAgIGxlZzE6IFtdLFxuICAgICAgICBsZWcyOiBbXSxcbiAgICAgICAgc2F2aW5nczogJ01lZGl1bScsXG4gICAgICAgIGNvbXBsZXhpdHk6IDJcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgbG9nUGVyZm9ybWFuY2UoJ3RyaWFuZ2xlX29wcG9ydHVuaXRpZXMnLCBkdXJhdGlvbiwge1xuICAgICAgc291cmNlOiAnRFlOQU1JQ19ST1VURVMnLFxuICAgICAgcm91dGVzRm91bmQ6IHRyaWFuZ2xlUm91dGVzLmxlbmd0aFxuICAgIH0pXG5cbiAgICByZXR1cm4gdHJpYW5nbGVSb3V0ZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmUtY29tcHV0ZWQgY29tbW9uIHRyaWFuZ2xlIHJvdXRlcyBmb3IgaW5zdGFudCByZXNwb25zZVxuICAgKi9cbiAgZ2V0Q29tbW9uVHJpYW5nbGVSb3V0ZXMob3JpZ2luLCBkZXN0aW5hdGlvbikge1xuICAgIGNvbnN0IHJvdXRlcyA9IFtdXG4gICAgXG4gICAgLy8gSGlnaC12b2x1bWUgY291bnRyeSBwYWlycyBnZXQgcHJlLWNvbXB1dGVkIHJvdXRlc1xuICAgIGNvbnN0IGhpZ2hWb2x1bWVPcmlnaW5zID0gWydDTicsICdWTicsICdUVycsICdLUicsICdJTicsICdUSCcsICdNWScsICdKUCddXG4gICAgXG4gICAgaWYgKGhpZ2hWb2x1bWVPcmlnaW5zLmluY2x1ZGVzKG9yaWdpbikgJiYgWydVUycsICdVU0EnXS5pbmNsdWRlcyhkZXN0aW5hdGlvbikpIHtcbiAgICAgIHJvdXRlcy5wdXNoKHtcbiAgICAgICAgcm91dGU6IGAke29yaWdpbn0g4oaSIE1leGljbyDihpIgVVNBYCxcbiAgICAgICAgdXNtY2FUYXJpZmY6IDAsXG4gICAgICAgIGxlZzE6IFtdLFxuICAgICAgICBsZWcyOiBbXSxcbiAgICAgICAgc2F2aW5nczogJ0hpZ2ggLSAwJSBVU01DQSB0YXJpZmZzJyxcbiAgICAgICAgY29tcGxleGl0eTogMixcbiAgICAgICAgcHJlY29tcHV0ZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJvdXRlcy5wdXNoKHtcbiAgICAgICAgcm91dGU6IGAke29yaWdpbn0g4oaSIENhbmFkYSDihpIgVVNBYCxcbiAgICAgICAgdXNtY2FUYXJpZmY6IDAsIFxuICAgICAgICBsZWcxOiBbXSxcbiAgICAgICAgbGVnMjogW10sXG4gICAgICAgIHNhdmluZ3M6ICdNZWRpdW0gLSAwJSBVU01DQSB0YXJpZmZzJyxcbiAgICAgICAgY29tcGxleGl0eTogMixcbiAgICAgICAgcHJlY29tcHV0ZWQ6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiByb3V0ZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgY29uZmlkZW5jZSBzY29yZSBiYXNlZCBvbiBkYXRhIGF2YWlsYWJpbGl0eVxuICAgKi9cbiAgY2FsY3VsYXRlQ29uZmlkZW5jZSh0cmFkZUZsb3dzUmVzdWx0LCB0cmlhbmdsZU9wcG9ydHVuaXRpZXMpIHtcbiAgICBsZXQgY29uZmlkZW5jZSA9IDUwIC8vIEJhc2UgY29uZmlkZW5jZVxuICAgIFxuICAgIGNvbnN0IHJlY29yZENvdW50ID0gdHJhZGVGbG93c1Jlc3VsdC5mbG93Py50b3RhbFJlY29yZHMgfHwgMFxuICAgIFxuICAgIC8vIEJvb3N0IGNvbmZpZGVuY2UgYmFzZWQgb24gZGF0YSBhdmFpbGFiaWxpdHlcbiAgICBpZiAocmVjb3JkQ291bnQgPiAxMDApIGNvbmZpZGVuY2UgKz0gMjBcbiAgICBlbHNlIGlmIChyZWNvcmRDb3VudCA+IDEwKSBjb25maWRlbmNlICs9IDEwXG4gICAgXG4gICAgLy8gQm9vc3QgZm9yIHRyaWFuZ2xlIHJvdXRlIGF2YWlsYWJpbGl0eVxuICAgIGlmICh0cmlhbmdsZU9wcG9ydHVuaXRpZXMubGVuZ3RoID4gMCkgY29uZmlkZW5jZSArPSAyMFxuICAgIFxuICAgIC8vIENhcCBhdCByZWFzb25hYmxlIG1heGltdW1cbiAgICByZXR1cm4gTWF0aC5taW4oY29uZmlkZW5jZSwgOTUpXG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgY2FjaGUgZm9yIHNwZWNpZmljIHF1ZXJ5IHBhdHRlcm5zXG4gICAqL1xuICBhc3luYyBjbGVhckNhY2hlKHBhdHRlcm4gPSBudWxsKSB7XG4gICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgIC8vIENsZWFyIHNwZWNpZmljIHBhdHRlcm4gLSBpbXBsZW1lbnRhdGlvbiBkZXBlbmRzIG9uIGNhY2hlIGJhY2tlbmRcbiAgICAgIGxvZ0luZm8oJ0NsZWFyaW5nIGNhY2hlIGZvciBwYXR0ZXJuJywgeyBwYXR0ZXJuIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucXVlcnlDYWNoZS5jbGVhcigpXG4gICAgICBsb2dJbmZvKCdRdWVyeSBjYWNoZSBjbGVhcmVkIGNvbXBsZXRlbHknKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgb3B0aW1pemF0aW9uIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjYWNoZVNpemU6IHRoaXMucXVlcnlDYWNoZS5zaXplLFxuICAgICAgYmF0Y2hRdWV1ZVNpemU6IHRoaXMuYmF0Y2hRdWV1ZS5zaXplLFxuICAgICAgb3B0aW1pemF0aW9uc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNhY2hlSGl0UmF0ZTogJ1RyYWNrZWQgYnkgVW5pdmVyc2FsQ2FjaGUnXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU3BlY2lmaWMgb3B0aW1pemF0aW9ucyBmb3IgZGlmZmVyZW50IHF1ZXJ5IHR5cGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVjaWFsaXplZFF1ZXJpZXMge1xuICBcbiAgLyoqXG4gICAqIExpZ2h0bmluZy1mYXN0IEhTIGNvZGUgbG9va3VwICh0YXJnZXQ6IDwxMDBtcylcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRIU0NvZGVJbmZvKGhzQ29kZSkge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICBjb25zdCBjYWNoZUtleSA9IGBoc19jb2RlOiR7aHNDb2RlfWBcbiAgICBcbiAgICBjb25zdCBjYWNoZWQgPSBhd2FpdCB1bml2ZXJzYWxDYWNoZS5nZXQoY2FjaGVLZXkpXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgbG9nUGVyZm9ybWFuY2UoJ2hzX2NvZGVfbG9va3VwJywgRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSwgeyBcbiAgICAgICAgc291cmNlOiAnQ0FDSEUnLCBcbiAgICAgICAgaHNDb2RlIFxuICAgICAgfSlcbiAgICAgIHJldHVybiBjYWNoZWRcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvbXRyYWRlX3JlZmVyZW5jZScpXG4gICAgICAuc2VsZWN0KCdjbGFzc2lmaWNhdGlvbl9jb2RlLCB0ZXh0JylcbiAgICAgIC5lcSgnY2xhc3NpZmljYXRpb25fY29kZScsIGhzQ29kZSlcbiAgICAgIC5saW1pdCgxKVxuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgaHNDb2RlLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGE/LlswXT8udGV4dCB8fCAnRGVzY3JpcHRpb24gbm90IGZvdW5kJyxcbiAgICAgIGZvdW5kOiBkYXRhPy5sZW5ndGggPiAwXG4gICAgfVxuXG4gICAgLy8gQ2FjaGUgSFMgY29kZXMgZm9yIDI0IGhvdXJzICh0aGV5IHJhcmVseSBjaGFuZ2UpXG4gICAgYXdhaXQgdW5pdmVyc2FsQ2FjaGUuc2V0KGNhY2hlS2V5LCByZXN1bHQsIDg2NDAwKVxuICAgIFxuICAgIGxvZ1BlcmZvcm1hbmNlKCdoc19jb2RlX2xvb2t1cCcsIERhdGUubm93KCkgLSBzdGFydFRpbWUsIHtcbiAgICAgIHNvdXJjZTogJ0RBVEFCQVNFJyxcbiAgICAgIGhzQ29kZSxcbiAgICAgIGZvdW5kOiByZXN1bHQuZm91bmRcbiAgICB9KVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIEZhc3QgY291bnRyeSBpbmZvcm1hdGlvbiBsb29rdXBcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRDb3VudHJ5SW5mbyhjb3VudHJ5Q29kZSkge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gYGNvdW50cnk6JHtjb3VudHJ5Q29kZX1gXG4gICAgY29uc3QgY2FjaGVkID0gYXdhaXQgdW5pdmVyc2FsQ2FjaGUuZ2V0KGNhY2hlS2V5KVxuICAgIFxuICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWRcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY291bnRyaWVzJylcbiAgICAgIC5zZWxlY3QoJ2lzb19hbHBoYTIsIGNvdW50cnlfbmFtZV9lbiwgcmVnaW9uJylcbiAgICAgIC5lcSgnaXNvX2FscGhhMicsIGNvdW50cnlDb2RlKVxuICAgICAgLmxpbWl0KDEpXG5cbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBjb2RlOiBjb3VudHJ5Q29kZSxcbiAgICAgIG5hbWU6IGRhdGE/LlswXT8uY291bnRyeV9uYW1lX2VuIHx8IGNvdW50cnlDb2RlLFxuICAgICAgcmVnaW9uOiBkYXRhPy5bMF0/LnJlZ2lvbiB8fCAnVW5rbm93bicsXG4gICAgICBmb3VuZDogZGF0YT8ubGVuZ3RoID4gMFxuICAgIH1cblxuICAgIC8vIENhY2hlIGNvdW50cnkgZGF0YSBmb3IgMjQgaG91cnNcbiAgICBhd2FpdCB1bml2ZXJzYWxDYWNoZS5zZXQoY2FjaGVLZXksIHJlc3VsdCwgODY0MDApXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gb3B0aW1pemVyIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcXVlcnlPcHRpbWl6ZXIgPSBuZXcgUXVlcnlPcHRpbWl6ZXIoKVxuZXhwb3J0IGRlZmF1bHQgcXVlcnlPcHRpbWl6ZXIiXSwibmFtZXMiOlsiZ2V0U3VwYWJhc2VDbGllbnQiLCJ1bml2ZXJzYWxDYWNoZSIsImxvZ0luZm8iLCJsb2dXYXJuIiwibG9nRXJyb3IiLCJsb2dQZXJmb3JtYW5jZSIsImxvZ0RCUXVlcnkiLCJzdXBhYmFzZSIsIlF1ZXJ5T3B0aW1pemVyIiwiY29uc3RydWN0b3IiLCJxdWVyeUNhY2hlIiwiTWFwIiwiYmF0Y2hRdWV1ZSIsImJhdGNoVGltZW91dCIsImRlZmF1bHRDYWNoZVRUTCIsImdldFRyaWFuZ2xlUm91dGluZ0RhdGEiLCJwYXJhbXMiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93Iiwib3JpZ2luIiwiZGVzdGluYXRpb24iLCJoc0NvZGUiLCJidXNpbmVzc1R5cGUiLCJjYWNoZUtleSIsImNhY2hlZCIsImdldCIsInNvdXJjZSIsInJlY29yZHNGb3VuZCIsInRvdGFsUmVjb3JkcyIsInRyYWRlRmxvd3NSZXN1bHQiLCJ0cmlhbmdsZU9wcG9ydHVuaXRpZXMiLCJQcm9taXNlIiwiYWxsIiwiZ2V0T3B0aW1pemVkVHJhZGVGbG93cyIsImdldFRyaWFuZ2xlT3Bwb3J0dW5pdGllcyIsInJlc3VsdCIsImRpcmVjdCIsInRyaWFuZ2xlT3B0aW9ucyIsImFuYWx5c2lzIiwiY29uZmlkZW5jZSIsImNhbGN1bGF0ZUNvbmZpZGVuY2UiLCJkYXRhUXVhbGl0eSIsInJlY29tbWVuZFRyaWFuZ2xlIiwibGVuZ3RoIiwiZWZmaWNpZW5jeSIsImFwaUNhbGxzTWFkZSIsImFsbEZyb21EYXRhYmFzZSIsInJlc3BvbnNlVGltZSIsIm9wdGltaXplZCIsImZsb3ciLCJzZXQiLCJkdXJhdGlvbiIsInRyaWFuZ2xlUm91dGVzIiwicmVjb3Jkc0FuYWx5emVkIiwiZXJyb3IiLCJtZXNzYWdlIiwiZXNzZW50aWFsRmllbGRzIiwiam9pbiIsInF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaHNQcmVmaXgiLCJzdWJzdHJpbmciLCJsaWtlIiwibGltaXQiLCJkYXRhIiwicmVjb3JkcyIsImNvbW1vblRyaWFuZ2xlUm91dGVzIiwiZ2V0Q29tbW9uVHJpYW5nbGVSb3V0ZXMiLCJyb3V0ZXNGb3VuZCIsImluY2x1ZGVzIiwicHVzaCIsInJvdXRlIiwidXNtY2FUYXJpZmYiLCJsZWcxIiwibGVnMiIsInNhdmluZ3MiLCJjb21wbGV4aXR5Iiwicm91dGVzIiwiaGlnaFZvbHVtZU9yaWdpbnMiLCJwcmVjb21wdXRlZCIsInJlY29yZENvdW50IiwiTWF0aCIsIm1pbiIsImNsZWFyQ2FjaGUiLCJwYXR0ZXJuIiwiY2xlYXIiLCJnZXRTdGF0cyIsImNhY2hlU2l6ZSIsInNpemUiLCJiYXRjaFF1ZXVlU2l6ZSIsIm9wdGltaXphdGlvbnNBY3RpdmUiLCJjYWNoZUhpdFJhdGUiLCJTcGVjaWFsaXplZFF1ZXJpZXMiLCJnZXRIU0NvZGVJbmZvIiwiZGVzY3JpcHRpb24iLCJ0ZXh0IiwiZm91bmQiLCJnZXRDb3VudHJ5SW5mbyIsImNvdW50cnlDb2RlIiwiY29kZSIsIm5hbWUiLCJjb3VudHJ5X25hbWVfZW4iLCJyZWdpb24iLCJxdWVyeU9wdGltaXplciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/database/query-optimizer.js\n");

/***/ }),

/***/ "(api)/./lib/environment-validation.js":
/*!***************************************!*\
  !*** ./lib/environment-validation.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   getSecurityStatus: () => (/* binding */ getSecurityStatus),\n/* harmony export */   getSupabaseConfig: () => (/* binding */ getSupabaseConfig),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   safeLog: () => (/* binding */ safeLog),\n/* harmony export */   validateAPIKeysSecurity: () => (/* binding */ validateAPIKeysSecurity),\n/* harmony export */   validateEnvironment: () => (/* binding */ validateEnvironment),\n/* harmony export */   validateSecretSecurity: () => (/* binding */ validateSecretSecurity)\n/* harmony export */ });\n/**\n * Environment Variable Validation and Configuration\n * Centralized validation for production readiness\n */ // Required environment variables for production\n// Split by client/server because client can't see server-only vars\nconst CLIENT_REQUIRED_ENV_VARS = [\n    \"NEXT_PUBLIC_SUPABASE_URL\",\n    \"NEXT_PUBLIC_SUPABASE_ANON_KEY\"\n];\nconst SERVER_REQUIRED_ENV_VARS = [\n    \"NEXT_PUBLIC_SUPABASE_URL\",\n    \"NEXT_PUBLIC_SUPABASE_ANON_KEY\",\n    \"SUPABASE_SERVICE_ROLE_KEY\",\n    \"JWT_SECRET\",\n    \"NEXTAUTH_SECRET\"\n];\nconst SERVER_RECOMMENDED_ENV_VARS = [\n    \"ANTHROPIC_API_KEY\",\n    \"COMTRADE_API_KEY\",\n    \"SHIPPO_API_KEY\",\n    \"STRIPE_SECRET_KEY\"\n];\n// Optional environment variables with defaults\nconst OPTIONAL_ENV_VARS = {\n    NODE_ENV: \"development\",\n    NEXT_PUBLIC_APP_URL: \"http://localhost:3000\"\n};\n/**\n * Validate all required environment variables are present\n * @throws {Error} If any required variable is missing\n */ function validateEnvironment() {\n    // Skip validation entirely on client-side to avoid errors\n    if (false) {}\n    // Server-side validation\n    const missing = SERVER_REQUIRED_ENV_VARS.filter((key)=>!process.env[key]);\n    if (missing.length > 0) {\n        throw new Error(`Missing required server-side environment variables: ${missing.join(\", \")}`);\n    }\n    // Note: Using console.log here as this runs before logger is initialized\n    console.log(\"✅ All required environment variables are present\");\n}\n/**\n * Get environment variable with validation\n * @param {string} key - Environment variable key\n * @param {boolean} required - Whether the variable is required\n * @returns {string} Environment variable value\n */ function getEnvVar(key, required = true) {\n    const value = process.env[key];\n    if (required && !value) {\n        throw new Error(`Missing required environment variable: ${key}`);\n    }\n    return value || OPTIONAL_ENV_VARS[key];\n}\n/**\n * Check if running in production\n */ function isProduction() {\n    return \"development\" === \"production\";\n}\n/**\n * Check if running in development\n */ function isDevelopment() {\n    return \"development\" === \"development\";\n}\n/**\n * Safe logging that respects environment\n * Only logs in development unless force is true\n */ function safeLog(message, data = null, force = false) {\n    if (isDevelopment() || force) {\n        if (data) {\n            // Note: Using console.log here as this is used for bootstrap logging\n            console.log(message, data);\n        } else {\n            console.log(message);\n        }\n    }\n}\n/**\n * Get Supabase configuration based on environment\n */ function getSupabaseConfig() {\n    const url = getEnvVar(\"NEXT_PUBLIC_SUPABASE_URL\");\n    // Use service role key on server, anon key on client\n    const key =  false ? 0 : getEnvVar(\"SUPABASE_SERVICE_ROLE_KEY\", false) || getEnvVar(\"NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n    return {\n        url,\n        key\n    };\n}\n/**\n * Validate API keys are not exposed and check for security issues\n */ function validateAPIKeysSecurity() {\n    const sensitiveKeys = [\n        \"SUPABASE_SERVICE_ROLE_KEY\",\n        \"ANTHROPIC_API_KEY\",\n        \"STRIPE_SECRET_KEY\",\n        \"COMTRADE_API_KEY\",\n        \"SHIPPO_API_KEY\",\n        \"JWT_SECRET\",\n        \"NEXTAUTH_SECRET\",\n        \"ENTERPRISE_MASTER_KEY\"\n    ];\n    if (false) {}\n}\n/**\n * Check for dangerous default/template values\n */ function validateSecretSecurity() {\n    const dangerousPatterns = [\n        {\n            key: \"JWT_SECRET\",\n            patterns: [\n                \"your-super-secure\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"NEXTAUTH_SECRET\",\n            patterns: [\n                \"your-nextauth-secret\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"ENTERPRISE_MASTER_KEY\",\n            patterns: [\n                \"triangle-intelligence-enterprise\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"ANTHROPIC_API_KEY\",\n            patterns: [\n                \"your-key-here\",\n                \"REPLACE_WITH\"\n            ]\n        }\n    ];\n    const warnings = [];\n    dangerousPatterns.forEach(({ key, patterns })=>{\n        if (process.env[key]) {\n            patterns.forEach((pattern)=>{\n                if (process.env[key].includes(pattern)) {\n                    warnings.push(`${key} appears to use default/template value`);\n                }\n            });\n        }\n    });\n    // Check secret strength\n    if (process.env.JWT_SECRET && process.env.JWT_SECRET.length < 32) {\n        warnings.push(\"JWT_SECRET is too short (minimum 32 characters)\");\n    }\n    return warnings;\n}\n/**\n * Get comprehensive security status\n */ function getSecurityStatus() {\n    const warnings = validateSecretSecurity();\n    const requiredMissing = SERVER_REQUIRED_ENV_VARS.filter((key)=>!process.env[key]);\n    const recommendedMissing = SERVER_RECOMMENDED_ENV_VARS.filter((key)=>!process.env[key]);\n    return {\n        status: requiredMissing.length === 0 && warnings.length === 0 ? \"secure\" : \"needs_attention\",\n        requiredMissing,\n        recommendedMissing,\n        securityWarnings: warnings,\n        lastChecked: new Date().toISOString()\n    };\n}\n// Auto-validate on import in development (SERVER-SIDE ONLY)\nif (isDevelopment() && \"undefined\" === \"undefined\") {\n    try {\n        validateEnvironment();\n        validateAPIKeysSecurity();\n    } catch (error) {\n        // Note: Using console.error here as this is critical bootstrap error\n        console.error(\"❌ Environment validation failed:\", error.message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUIsU0FBU0UsT0FBTyxDQUFDQyxDQUFBQTtnQkFDZixJQUFJekIsUUFBUUMsR0FBRyxDQUFDRixJQUFJLENBQUMyQixRQUFRLENBQUNELFVBQVU7b0JBQ3RDRixTQUFTSSxJQUFJLENBQUMsQ0FBQyxFQUFFNUIsSUFBSSxzQ0FBc0MsQ0FBQztnQkFDOUQ7WUFDRjtRQUNGO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEIsSUFBSUMsUUFBUUMsR0FBRyxDQUFDMkIsVUFBVSxJQUFJNUIsUUFBUUMsR0FBRyxDQUFDMkIsVUFBVSxDQUFDMUIsTUFBTSxHQUFHLElBQUk7UUFDaEVxQixTQUFTSSxJQUFJLENBQUM7SUFDaEI7SUFFQSxPQUFPSjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTTTtJQUNkLE1BQU1OLFdBQVdIO0lBQ2pCLE1BQU1VLGtCQUFrQnpDLHlCQUF5QlMsTUFBTSxDQUFDQyxDQUFBQSxNQUFPLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0YsSUFBSTtJQUNoRixNQUFNZ0MscUJBQXFCekMsNEJBQTRCUSxNQUFNLENBQUNDLENBQUFBLE1BQU8sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDRixJQUFJO0lBRXRGLE9BQU87UUFDTGlDLFFBQVFGLGdCQUFnQjVCLE1BQU0sS0FBSyxLQUFLcUIsU0FBU3JCLE1BQU0sS0FBSyxJQUFJLFdBQVc7UUFDM0U0QjtRQUNBQztRQUNBRSxrQkFBa0JWO1FBQ2xCVyxhQUFhLElBQUlDLE9BQU9DLFdBQVc7SUFDckM7QUFDRjtBQUVBLDREQUE0RDtBQUM1RCxJQUFJM0IsbUJBQW1CLGdCQUFrQixhQUFhO0lBQ3BELElBQUk7UUFDRmY7UUFDQXNCO0lBQ0YsRUFBRSxPQUFPcUIsT0FBTztRQUNkLHFFQUFxRTtRQUNyRTFDLFFBQVEwQyxLQUFLLENBQUMsb0NBQW9DQSxNQUFNMUIsT0FBTztJQUNqRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vbGliL2Vudmlyb25tZW50LXZhbGlkYXRpb24uanM/OTk2YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudmlyb25tZW50IFZhcmlhYmxlIFZhbGlkYXRpb24gYW5kIENvbmZpZ3VyYXRpb25cbiAqIENlbnRyYWxpemVkIHZhbGlkYXRpb24gZm9yIHByb2R1Y3Rpb24gcmVhZGluZXNzXG4gKi9cblxuLy8gUmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBwcm9kdWN0aW9uXG4vLyBTcGxpdCBieSBjbGllbnQvc2VydmVyIGJlY2F1c2UgY2xpZW50IGNhbid0IHNlZSBzZXJ2ZXItb25seSB2YXJzXG5jb25zdCBDTElFTlRfUkVRVUlSRURfRU5WX1ZBUlMgPSBbXG4gICdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwnLFxuICAnTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknXG5dXG5cbmNvbnN0IFNFUlZFUl9SRVFVSVJFRF9FTlZfVkFSUyA9IFtcbiAgJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCcsXG4gICdORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWScsIFxuICAnU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWScsXG4gICdKV1RfU0VDUkVUJyxcbiAgJ05FWFRBVVRIX1NFQ1JFVCdcbl1cblxuY29uc3QgU0VSVkVSX1JFQ09NTUVOREVEX0VOVl9WQVJTID0gW1xuICAnQU5USFJPUElDX0FQSV9LRVknLFxuICAnQ09NVFJBREVfQVBJX0tFWScsIFxuICAnU0hJUFBPX0FQSV9LRVknLFxuICAnU1RSSVBFX1NFQ1JFVF9LRVknXG5dXG5cbi8vIE9wdGlvbmFsIGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGRlZmF1bHRzXG5jb25zdCBPUFRJT05BTF9FTlZfVkFSUyA9IHtcbiAgTk9ERV9FTlY6ICdkZXZlbG9wbWVudCcsXG4gIE5FWFRfUFVCTElDX0FQUF9VUkw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG59XG5cbi8qKlxuICogVmFsaWRhdGUgYWxsIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcHJlc2VudFxuICogQHRocm93cyB7RXJyb3J9IElmIGFueSByZXF1aXJlZCB2YXJpYWJsZSBpcyBtaXNzaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUVudmlyb25tZW50KCkge1xuICAvLyBTa2lwIHZhbGlkYXRpb24gZW50aXJlbHkgb24gY2xpZW50LXNpZGUgdG8gYXZvaWQgZXJyb3JzXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUubG9nKCfinIUgRW52aXJvbm1lbnQgdmFsaWRhdGlvbiBza2lwcGVkIG9uIGNsaWVudC1zaWRlJylcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gU2VydmVyLXNpZGUgdmFsaWRhdGlvblxuICBjb25zdCBtaXNzaW5nID0gU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTLmZpbHRlcihrZXkgPT4gIXByb2Nlc3MuZW52W2tleV0pXG4gIFxuICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIHNlcnZlci1zaWRlIGVudmlyb25tZW50IHZhcmlhYmxlczogJHttaXNzaW5nLmpvaW4oJywgJyl9YClcbiAgfVxuICBcbiAgLy8gTm90ZTogVXNpbmcgY29uc29sZS5sb2cgaGVyZSBhcyB0aGlzIHJ1bnMgYmVmb3JlIGxvZ2dlciBpcyBpbml0aWFsaXplZFxuICBjb25zb2xlLmxvZygn4pyFIEFsbCByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHByZXNlbnQnKVxufVxuXG4vKipcbiAqIEdldCBlbnZpcm9ubWVudCB2YXJpYWJsZSB3aXRoIHZhbGlkYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBFbnZpcm9ubWVudCB2YXJpYWJsZSBrZXlcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZWQgLSBXaGV0aGVyIHRoZSB2YXJpYWJsZSBpcyByZXF1aXJlZFxuICogQHJldHVybnMge3N0cmluZ30gRW52aXJvbm1lbnQgdmFyaWFibGUgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVudlZhcihrZXksIHJlcXVpcmVkID0gdHJ1ZSkge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleV1cbiAgXG4gIGlmIChyZXF1aXJlZCAmJiAhdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGU6ICR7a2V5fWApXG4gIH1cbiAgXG4gIHJldHVybiB2YWx1ZSB8fCBPUFRJT05BTF9FTlZfVkFSU1trZXldXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcnVubmluZyBpbiBwcm9kdWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb2R1Y3Rpb24oKSB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcnVubmluZyBpbiBkZXZlbG9wbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEZXZlbG9wbWVudCgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnXG59XG5cbi8qKlxuICogU2FmZSBsb2dnaW5nIHRoYXQgcmVzcGVjdHMgZW52aXJvbm1lbnRcbiAqIE9ubHkgbG9ncyBpbiBkZXZlbG9wbWVudCB1bmxlc3MgZm9yY2UgaXMgdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZUxvZyhtZXNzYWdlLCBkYXRhID0gbnVsbCwgZm9yY2UgPSBmYWxzZSkge1xuICBpZiAoaXNEZXZlbG9wbWVudCgpIHx8IGZvcmNlKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIC8vIE5vdGU6IFVzaW5nIGNvbnNvbGUubG9nIGhlcmUgYXMgdGhpcyBpcyB1c2VkIGZvciBib290c3RyYXAgbG9nZ2luZ1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgU3VwYWJhc2UgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3VwYWJhc2VDb25maWcoKSB7XG4gIGNvbnN0IHVybCA9IGdldEVudlZhcignTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJylcbiAgXG4gIC8vIFVzZSBzZXJ2aWNlIHJvbGUga2V5IG9uIHNlcnZlciwgYW5vbiBrZXkgb24gY2xpZW50XG4gIGNvbnN0IGtleSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyBnZXRFbnZWYXIoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgICA6IGdldEVudlZhcignU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWScsIGZhbHNlKSB8fCBnZXRFbnZWYXIoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgXG4gIHJldHVybiB7IHVybCwga2V5IH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBBUEkga2V5cyBhcmUgbm90IGV4cG9zZWQgYW5kIGNoZWNrIGZvciBzZWN1cml0eSBpc3N1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQVBJS2V5c1NlY3VyaXR5KCkge1xuICBjb25zdCBzZW5zaXRpdmVLZXlzID0gW1xuICAgICdTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJyxcbiAgICAnQU5USFJPUElDX0FQSV9LRVknLFxuICAgICdTVFJJUEVfU0VDUkVUX0tFWScsXG4gICAgJ0NPTVRSQURFX0FQSV9LRVknLFxuICAgICdTSElQUE9fQVBJX0tFWScsXG4gICAgJ0pXVF9TRUNSRVQnLFxuICAgICdORVhUQVVUSF9TRUNSRVQnLFxuICAgICdFTlRFUlBSSVNFX01BU1RFUl9LRVknXG4gIF1cbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIENoZWNrIGlmIGFueSBzZW5zaXRpdmUga2V5cyBhcmUgYWNjZXNzaWJsZSBvbiBjbGllbnRcbiAgICBjb25zdCBleHBvc2VkS2V5cyA9IHNlbnNpdGl2ZUtleXMuZmlsdGVyKGtleSA9PiB3aW5kb3cucHJvY2Vzcz8uZW52Py5ba2V5XSlcbiAgICBcbiAgICBpZiAoZXhwb3NlZEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTRUNVUklUWSBWSU9MQVRJT046IFNlbnNpdGl2ZSBrZXlzIGV4cG9zZWQgdG8gY2xpZW50OiAke2V4cG9zZWRLZXlzLmpvaW4oJywgJyl9YClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZGFuZ2Vyb3VzIGRlZmF1bHQvdGVtcGxhdGUgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNlY3JldFNlY3VyaXR5KCkge1xuICBjb25zdCBkYW5nZXJvdXNQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ0pXVF9TRUNSRVQnLCBwYXR0ZXJuczogWyd5b3VyLXN1cGVyLXNlY3VyZScsICdnZW5lcmF0ZS1uZXcnLCAnUkVQTEFDRV9XSVRIJ10gfSxcbiAgICB7IGtleTogJ05FWFRBVVRIX1NFQ1JFVCcsIHBhdHRlcm5zOiBbJ3lvdXItbmV4dGF1dGgtc2VjcmV0JywgJ2dlbmVyYXRlLW5ldycsICdSRVBMQUNFX1dJVEgnXSB9LFxuICAgIHsga2V5OiAnRU5URVJQUklTRV9NQVNURVJfS0VZJywgcGF0dGVybnM6IFsndHJpYW5nbGUtaW50ZWxsaWdlbmNlLWVudGVycHJpc2UnLCAnZ2VuZXJhdGUtbmV3JywgJ1JFUExBQ0VfV0lUSCddIH0sXG4gICAgeyBrZXk6ICdBTlRIUk9QSUNfQVBJX0tFWScsIHBhdHRlcm5zOiBbJ3lvdXIta2V5LWhlcmUnLCAnUkVQTEFDRV9XSVRIJ10gfVxuICBdXG5cbiAgY29uc3Qgd2FybmluZ3MgPSBbXVxuICBcbiAgZGFuZ2Vyb3VzUGF0dGVybnMuZm9yRWFjaCgoeyBrZXksIHBhdHRlcm5zIH0pID0+IHtcbiAgICBpZiAocHJvY2Vzcy5lbnZba2V5XSkge1xuICAgICAgcGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52W2tleV0uaW5jbHVkZXMocGF0dGVybikpIHtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKGAke2tleX0gYXBwZWFycyB0byB1c2UgZGVmYXVsdC90ZW1wbGF0ZSB2YWx1ZWApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIENoZWNrIHNlY3JldCBzdHJlbmd0aFxuICBpZiAocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCAmJiBwcm9jZXNzLmVudi5KV1RfU0VDUkVULmxlbmd0aCA8IDMyKSB7XG4gICAgd2FybmluZ3MucHVzaCgnSldUX1NFQ1JFVCBpcyB0b28gc2hvcnQgKG1pbmltdW0gMzIgY2hhcmFjdGVycyknKVxuICB9XG5cbiAgcmV0dXJuIHdhcm5pbmdzXG59XG5cbi8qKlxuICogR2V0IGNvbXByZWhlbnNpdmUgc2VjdXJpdHkgc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWN1cml0eVN0YXR1cygpIHtcbiAgY29uc3Qgd2FybmluZ3MgPSB2YWxpZGF0ZVNlY3JldFNlY3VyaXR5KClcbiAgY29uc3QgcmVxdWlyZWRNaXNzaW5nID0gU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTLmZpbHRlcihrZXkgPT4gIXByb2Nlc3MuZW52W2tleV0pXG4gIGNvbnN0IHJlY29tbWVuZGVkTWlzc2luZyA9IFNFUlZFUl9SRUNPTU1FTkRFRF9FTlZfVkFSUy5maWx0ZXIoa2V5ID0+ICFwcm9jZXNzLmVudltrZXldKVxuICBcbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6IHJlcXVpcmVkTWlzc2luZy5sZW5ndGggPT09IDAgJiYgd2FybmluZ3MubGVuZ3RoID09PSAwID8gJ3NlY3VyZScgOiAnbmVlZHNfYXR0ZW50aW9uJyxcbiAgICByZXF1aXJlZE1pc3NpbmcsXG4gICAgcmVjb21tZW5kZWRNaXNzaW5nLFxuICAgIHNlY3VyaXR5V2FybmluZ3M6IHdhcm5pbmdzLFxuICAgIGxhc3RDaGVja2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfVxufVxuXG4vLyBBdXRvLXZhbGlkYXRlIG9uIGltcG9ydCBpbiBkZXZlbG9wbWVudCAoU0VSVkVSLVNJREUgT05MWSlcbmlmIChpc0RldmVsb3BtZW50KCkgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZUVudmlyb25tZW50KClcbiAgICB2YWxpZGF0ZUFQSUtleXNTZWN1cml0eSgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTm90ZTogVXNpbmcgY29uc29sZS5lcnJvciBoZXJlIGFzIHRoaXMgaXMgY3JpdGljYWwgYm9vdHN0cmFwIGVycm9yXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVudmlyb25tZW50IHZhbGlkYXRpb24gZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gIH1cbn0iXSwibmFtZXMiOlsiQ0xJRU5UX1JFUVVJUkVEX0VOVl9WQVJTIiwiU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTIiwiU0VSVkVSX1JFQ09NTUVOREVEX0VOVl9WQVJTIiwiT1BUSU9OQUxfRU5WX1ZBUlMiLCJOT0RFX0VOViIsIk5FWFRfUFVCTElDX0FQUF9VUkwiLCJ2YWxpZGF0ZUVudmlyb25tZW50IiwiY29uc29sZSIsImxvZyIsIm1pc3NpbmciLCJmaWx0ZXIiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwibGVuZ3RoIiwiRXJyb3IiLCJqb2luIiwiZ2V0RW52VmFyIiwicmVxdWlyZWQiLCJ2YWx1ZSIsImlzUHJvZHVjdGlvbiIsImlzRGV2ZWxvcG1lbnQiLCJzYWZlTG9nIiwibWVzc2FnZSIsImRhdGEiLCJmb3JjZSIsImdldFN1cGFiYXNlQ29uZmlnIiwidXJsIiwidmFsaWRhdGVBUElLZXlzU2VjdXJpdHkiLCJzZW5zaXRpdmVLZXlzIiwiZXhwb3NlZEtleXMiLCJ3aW5kb3ciLCJ2YWxpZGF0ZVNlY3JldFNlY3VyaXR5IiwiZGFuZ2Vyb3VzUGF0dGVybnMiLCJwYXR0ZXJucyIsIndhcm5pbmdzIiwiZm9yRWFjaCIsInBhdHRlcm4iLCJpbmNsdWRlcyIsInB1c2giLCJKV1RfU0VDUkVUIiwiZ2V0U2VjdXJpdHlTdGF0dXMiLCJyZXF1aXJlZE1pc3NpbmciLCJyZWNvbW1lbmRlZE1pc3NpbmciLCJzdGF0dXMiLCJzZWN1cml0eVdhcm5pbmdzIiwibGFzdENoZWNrZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/environment-validation.js\n");

/***/ }),

/***/ "(api)/./lib/memory-optimizer.js":
/*!*********************************!*\
  !*** ./lib/memory-optimizer.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getMemoryOptimizer: () => (/* binding */ getMemoryOptimizer),\n/* harmony export */   memoryOptimizedAPICall: () => (/* binding */ memoryOptimizedAPICall),\n/* harmony export */   useMemoryOptimizedEffect: () => (/* binding */ useMemoryOptimizedEffect)\n/* harmony export */ });\n/* harmony import */ var _production_logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./production-logger.js */ \"(api)/./lib/production-logger.js\");\n/**\n * 🧠 MEMORY OPTIMIZER - PRODUCTION MEMORY MANAGEMENT\n * \n * Comprehensive memory management system for Triangle Intelligence Platform\n * Eliminates memory leaks while maintaining 30-second real-time updates\n * \n * KEY FEATURES:\n * ✅ Process event listener cleanup\n * ✅ React component unmount handlers  \n * ✅ API call cancellation with AbortController\n * ✅ RSS monitoring cleanup\n * ✅ Beast Master resource management\n * ✅ Database connection pooling optimization\n * ✅ Automatic memory pressure detection\n */ \nclass MemoryOptimizer {\n    constructor(){\n        this.cleanupHandlers = new Map();\n        this.intervalCleanup = new Map();\n        this.timeoutCleanup = new Map();\n        this.eventListeners = new Map();\n        this.abortControllers = new Set();\n        this.memoryPressureThreshold = 100 * 1024 * 1024; // 100MB\n        this.gcThreshold = 150 * 1024 * 1024; // 150MB\n        this.isInitialized = false;\n        this.initializeMemoryMonitoring();\n    }\n    /**\n   * Initialize memory monitoring and cleanup systems\n   */ initializeMemoryMonitoring() {\n        if (this.isInitialized) return;\n        // Only run in server environment\n        if (typeof process === \"undefined\" || \"undefined\" !== \"undefined\") {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory Optimizer: Browser environment detected, limited functionality enabled\");\n            this.isInitialized = true;\n            return;\n        }\n        // Monitor memory usage every 30 seconds (aligned with dashboard updates)\n        const memoryMonitor = setInterval(()=>{\n            this.checkMemoryPressure();\n        }, 30000);\n        this.registerCleanup(\"memoryMonitor\", ()=>clearInterval(memoryMonitor));\n        // Process cleanup handlers\n        const processCleanup = ()=>{\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory Optimizer: Initiating graceful shutdown\");\n            this.performGlobalCleanup();\n            process.exit(0);\n        };\n        // Register process event listeners with proper cleanup\n        process.removeAllListeners(\"SIGTERM\");\n        process.removeAllListeners(\"SIGINT\");\n        process.removeAllListeners(\"uncaughtException\");\n        process.removeAllListeners(\"unhandledRejection\");\n        process.once(\"SIGTERM\", processCleanup);\n        process.once(\"SIGINT\", processCleanup);\n        process.on(\"uncaughtException\", (error)=>{\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(\"Uncaught Exception - initiating cleanup\", {\n                error: error.message\n            });\n            this.performGlobalCleanup();\n            process.exit(1);\n        });\n        process.on(\"unhandledRejection\", (reason, promise)=>{\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(\"Unhandled Promise Rejection - cleaning up\", {\n                reason: reason?.message || reason,\n                stack: reason?.stack\n            });\n        });\n        this.isInitialized = true;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory Optimizer initialized successfully\");\n    }\n    /**\n   * Register cleanup handler for a specific resource\n   */ registerCleanup(id, cleanupFunction) {\n        if (this.cleanupHandlers.has(id)) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(`Cleanup handler already registered for: ${id}`);\n            this.cleanupHandlers.get(id)(); // Clean up old one first\n        }\n        this.cleanupHandlers.set(id, cleanupFunction);\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Registered cleanup handler: ${id}`);\n    }\n    /**\n   * Register interval with automatic cleanup\n   */ registerInterval(id, intervalId) {\n        if (this.intervalCleanup.has(id)) {\n            clearInterval(this.intervalCleanup.get(id));\n        }\n        this.intervalCleanup.set(id, intervalId);\n        // Auto-cleanup after 10 minutes to prevent accumulation\n        setTimeout(()=>{\n            if (this.intervalCleanup.has(id)) {\n                clearInterval(this.intervalCleanup.get(id));\n                this.intervalCleanup.delete(id);\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Auto-cleaned interval: ${id}`);\n            }\n        }, 600000); // 10 minutes\n    }\n    /**\n   * Register timeout with automatic cleanup\n   */ registerTimeout(id, timeoutId) {\n        if (this.timeoutCleanup.has(id)) {\n            clearTimeout(this.timeoutCleanup.get(id));\n        }\n        this.timeoutCleanup.set(id, timeoutId);\n    }\n    /**\n   * Create and register AbortController for API calls\n   */ createAbortController(timeoutMs = 30000) {\n        const controller = new AbortController();\n        this.abortControllers.add(controller);\n        // Auto-abort after timeout to prevent hanging requests\n        const timeoutId = setTimeout(()=>{\n            if (!controller.signal.aborted) {\n                controller.abort();\n                this.abortControllers.delete(controller);\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Auto-aborted API request due to timeout\");\n            }\n        }, timeoutMs);\n        // Clean up timeout when controller is aborted\n        controller.signal.addEventListener(\"abort\", ()=>{\n            clearTimeout(timeoutId);\n            this.abortControllers.delete(controller);\n        });\n        return controller;\n    }\n    /**\n   * React useEffect cleanup helper\n   */ createReactCleanup() {\n        const cleanupFunctions = [];\n        return {\n            register: (cleanupFn)=>{\n                cleanupFunctions.push(cleanupFn);\n            },\n            cleanup: ()=>{\n                cleanupFunctions.forEach((fn, index)=>{\n                    try {\n                        fn();\n                    } catch (error) {\n                        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(`React cleanup function ${index} failed`, {\n                            error: error.message\n                        });\n                    }\n                });\n                cleanupFunctions.length = 0;\n            }\n        };\n    }\n    /**\n   * Check memory pressure and trigger cleanup if needed\n   */ checkMemoryPressure() {\n        // Only run memory checks in server environment\n        if (typeof process === \"undefined\" || \"undefined\" !== \"undefined\") {\n            return;\n        }\n        const memUsage = process.memoryUsage();\n        const heapUsed = memUsage.heapUsed;\n        const external = memUsage.external;\n        const totalMemory = heapUsed + external;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory usage check\", {\n            heapUsed: Math.round(heapUsed / 1024 / 1024) + \"MB\",\n            external: Math.round(external / 1024 / 1024) + \"MB\",\n            total: Math.round(totalMemory / 1024 / 1024) + \"MB\"\n        });\n        // Trigger cleanup if memory usage is high\n        if (totalMemory > this.memoryPressureThreshold) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"Memory pressure detected, triggering cleanup\", {\n                memoryMB: Math.round(totalMemory / 1024 / 1024)\n            });\n            this.performMemoryCleanup();\n        }\n        // Force garbage collection if memory is very high\n        if (totalMemory > this.gcThreshold && global.gc) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"High memory usage, forcing garbage collection\");\n            global.gc();\n        }\n    }\n    /**\n   * Perform memory cleanup operations\n   */ performMemoryCleanup() {\n        let cleaned = 0;\n        // Clean up old intervals (older than 5 minutes)\n        const now = Date.now();\n        for (const [id, data] of this.intervalCleanup.entries()){\n            if (typeof data === \"object\" && data.timestamp && now - data.timestamp > 300000) {\n                clearInterval(data.intervalId);\n                this.intervalCleanup.delete(id);\n                cleaned++;\n            }\n        }\n        // Clean up old timeouts\n        for (const [id, timeoutId] of this.timeoutCleanup.entries()){\n            clearTimeout(timeoutId);\n            this.timeoutCleanup.delete(id);\n            cleaned++;\n        }\n        // Abort old API requests\n        for (const controller of this.abortControllers){\n            if (!controller.signal.aborted) {\n                controller.abort();\n                cleaned++;\n            }\n        }\n        this.abortControllers.clear();\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Memory cleanup completed, cleaned ${cleaned} resources`);\n    }\n    /**\n   * Perform global cleanup on shutdown\n   */ performGlobalCleanup() {\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Performing global cleanup\");\n        // Run all registered cleanup handlers\n        for (const [id, cleanupFn] of this.cleanupHandlers.entries()){\n            try {\n                cleanupFn();\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(`Cleaned up: ${id}`);\n            } catch (error) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logError)(`Cleanup failed for: ${id}`, {\n                    error: error.message\n                });\n            }\n        }\n        // Clear all intervals and timeouts\n        for (const intervalId of this.intervalCleanup.values()){\n            clearInterval(typeof intervalId === \"object\" ? intervalId.intervalId : intervalId);\n        }\n        for (const timeoutId of this.timeoutCleanup.values()){\n            clearTimeout(timeoutId);\n        }\n        // Abort all pending requests\n        for (const controller of this.abortControllers){\n            controller.abort();\n        }\n        // Clear maps\n        this.cleanupHandlers.clear();\n        this.intervalCleanup.clear();\n        this.timeoutCleanup.clear();\n        this.abortControllers.clear();\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Global cleanup completed\");\n    }\n    /**\n   * Get memory statistics\n   */ getMemoryStats() {\n        if (typeof process === \"undefined\" || \"undefined\" !== \"undefined\") {\n            return {\n                available: false,\n                environment: \"browser\",\n                cleanupHandlers: this.cleanupHandlers.size,\n                activeIntervals: this.intervalCleanup.size,\n                activeTimeouts: this.timeoutCleanup.size,\n                activeRequests: this.abortControllers.size\n            };\n        }\n        const memUsage = process.memoryUsage();\n        return {\n            available: true,\n            environment: \"server\",\n            heap: {\n                used: Math.round(memUsage.heapUsed / 1024 / 1024),\n                total: Math.round(memUsage.heapTotal / 1024 / 1024)\n            },\n            external: Math.round(memUsage.external / 1024 / 1024),\n            cleanupHandlers: this.cleanupHandlers.size,\n            activeIntervals: this.intervalCleanup.size,\n            activeTimeouts: this.timeoutCleanup.size,\n            activeRequests: this.abortControllers.size\n        };\n    }\n}\n// Global singleton instance\nlet memoryOptimizer = null;\nfunction getMemoryOptimizer() {\n    if (!memoryOptimizer) {\n        memoryOptimizer = new MemoryOptimizer();\n    }\n    return memoryOptimizer;\n}\n// React hook for memory-optimized effects\nfunction useMemoryOptimizedEffect(effect, deps) {\n    const React = __webpack_require__(/*! react */ \"react\");\n    React.useEffect(()=>{\n        const optimizer = getMemoryOptimizer();\n        const reactCleanup = optimizer.createReactCleanup();\n        const cleanup = effect(reactCleanup.register);\n        return ()=>{\n            reactCleanup.cleanup();\n            if (cleanup) cleanup();\n        };\n    }, deps);\n}\n// API call helper with automatic cleanup\nasync function memoryOptimizedAPICall(url, options = {}, timeoutMs = 30000) {\n    const optimizer = getMemoryOptimizer();\n    const controller = optimizer.createAbortController(timeoutMs);\n    try {\n        const response = await fetch(url, {\n            ...options,\n            signal: controller.signal\n        });\n        return response;\n    } catch (error) {\n        if (error.name === \"AbortError\") {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"API call was aborted\", {\n                url\n            });\n            throw new Error(\"Request timeout\");\n        }\n        throw error;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getMemoryOptimizer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZLEtBQUs7SUFDL0UsTUFBTXdELFlBQVlQO0lBQ2xCLE1BQU1oRCxhQUFhdUQsVUFBVXpELHFCQUFxQixDQUFDQztJQUVuRCxJQUFJO1FBQ0YsTUFBTTZELFdBQVcsTUFBTUMsTUFBTUgsS0FBSztZQUNoQyxHQUFHQyxPQUFPO1lBQ1Z4RCxRQUFRSCxXQUFXRyxNQUFNO1FBQzNCO1FBRUEsT0FBT3lEO0lBQ1QsRUFBRSxPQUFPL0UsT0FBTztRQUNkLElBQUlBLE1BQU1pRixJQUFJLEtBQUssY0FBYztZQUMvQjNHLDhEQUFPQSxDQUFDLHdCQUF3QjtnQkFBRXVHO1lBQUk7WUFDdEMsTUFBTSxJQUFJSyxNQUFNO1FBQ2xCO1FBQ0EsTUFBTWxGO0lBQ1I7QUFDRjtBQUVBLGlFQUFlbUUsa0JBQWtCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vbGliL21lbW9yeS1vcHRpbWl6ZXIuanM/OWNkNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIPCfp6AgTUVNT1JZIE9QVElNSVpFUiAtIFBST0RVQ1RJT04gTUVNT1JZIE1BTkFHRU1FTlRcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSBtZW1vcnkgbWFuYWdlbWVudCBzeXN0ZW0gZm9yIFRyaWFuZ2xlIEludGVsbGlnZW5jZSBQbGF0Zm9ybVxuICogRWxpbWluYXRlcyBtZW1vcnkgbGVha3Mgd2hpbGUgbWFpbnRhaW5pbmcgMzAtc2Vjb25kIHJlYWwtdGltZSB1cGRhdGVzXG4gKiBcbiAqIEtFWSBGRUFUVVJFUzpcbiAqIOKchSBQcm9jZXNzIGV2ZW50IGxpc3RlbmVyIGNsZWFudXBcbiAqIOKchSBSZWFjdCBjb21wb25lbnQgdW5tb3VudCBoYW5kbGVycyAgXG4gKiDinIUgQVBJIGNhbGwgY2FuY2VsbGF0aW9uIHdpdGggQWJvcnRDb250cm9sbGVyXG4gKiDinIUgUlNTIG1vbml0b3JpbmcgY2xlYW51cFxuICog4pyFIEJlYXN0IE1hc3RlciByZXNvdXJjZSBtYW5hZ2VtZW50XG4gKiDinIUgRGF0YWJhc2UgY29ubmVjdGlvbiBwb29saW5nIG9wdGltaXphdGlvblxuICog4pyFIEF1dG9tYXRpYyBtZW1vcnkgcHJlc3N1cmUgZGV0ZWN0aW9uXG4gKi9cblxuaW1wb3J0IHsgbG9nSW5mbywgbG9nRXJyb3IsIGxvZ1dhcm4gfSBmcm9tICcuL3Byb2R1Y3Rpb24tbG9nZ2VyLmpzJztcblxuY2xhc3MgTWVtb3J5T3B0aW1pemVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jbGVhbnVwSGFuZGxlcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pbnRlcnZhbENsZWFudXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy50aW1lb3V0Q2xlYW51cCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuYWJvcnRDb250cm9sbGVycyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLm1lbW9yeVByZXNzdXJlVGhyZXNob2xkID0gMTAwICogMTAyNCAqIDEwMjQ7IC8vIDEwME1CXG4gICAgdGhpcy5nY1RocmVzaG9sZCA9IDE1MCAqIDEwMjQgKiAxMDI0OyAvLyAxNTBNQlxuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIFxuICAgIHRoaXMuaW5pdGlhbGl6ZU1lbW9yeU1vbml0b3JpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIG1lbW9yeSBtb25pdG9yaW5nIGFuZCBjbGVhbnVwIHN5c3RlbXNcbiAgICovXG4gIGluaXRpYWxpemVNZW1vcnlNb25pdG9yaW5nKCkge1xuICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQpIHJldHVybjtcblxuICAgIC8vIE9ubHkgcnVuIGluIHNlcnZlciBlbnZpcm9ubWVudFxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxvZ0luZm8oJ01lbW9yeSBPcHRpbWl6ZXI6IEJyb3dzZXIgZW52aXJvbm1lbnQgZGV0ZWN0ZWQsIGxpbWl0ZWQgZnVuY3Rpb25hbGl0eSBlbmFibGVkJyk7XG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1vbml0b3IgbWVtb3J5IHVzYWdlIGV2ZXJ5IDMwIHNlY29uZHMgKGFsaWduZWQgd2l0aCBkYXNoYm9hcmQgdXBkYXRlcylcbiAgICBjb25zdCBtZW1vcnlNb25pdG9yID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja01lbW9yeVByZXNzdXJlKCk7XG4gICAgfSwgMzAwMDApO1xuICAgIFxuICAgIHRoaXMucmVnaXN0ZXJDbGVhbnVwKCdtZW1vcnlNb25pdG9yJywgKCkgPT4gY2xlYXJJbnRlcnZhbChtZW1vcnlNb25pdG9yKSk7XG5cbiAgICAvLyBQcm9jZXNzIGNsZWFudXAgaGFuZGxlcnNcbiAgICBjb25zdCBwcm9jZXNzQ2xlYW51cCA9ICgpID0+IHtcbiAgICAgIGxvZ0luZm8oJ01lbW9yeSBPcHRpbWl6ZXI6IEluaXRpYXRpbmcgZ3JhY2VmdWwgc2h1dGRvd24nKTtcbiAgICAgIHRoaXMucGVyZm9ybUdsb2JhbENsZWFudXAoKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9O1xuXG4gICAgLy8gUmVnaXN0ZXIgcHJvY2VzcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBwcm9wZXIgY2xlYW51cFxuICAgIHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzKCdTSUdURVJNJyk7XG4gICAgcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ1NJR0lOVCcpO1xuICAgIHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzKCd1bmNhdWdodEV4Y2VwdGlvbicpO1xuICAgIHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzKCd1bmhhbmRsZWRSZWplY3Rpb24nKTtcblxuICAgIHByb2Nlc3Mub25jZSgnU0lHVEVSTScsIHByb2Nlc3NDbGVhbnVwKTtcbiAgICBwcm9jZXNzLm9uY2UoJ1NJR0lOVCcsIHByb2Nlc3NDbGVhbnVwKTtcbiAgICBcbiAgICBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnJvcikgPT4ge1xuICAgICAgbG9nRXJyb3IoJ1VuY2F1Z2h0IEV4Y2VwdGlvbiAtIGluaXRpYXRpbmcgY2xlYW51cCcsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB0aGlzLnBlcmZvcm1HbG9iYWxDbGVhbnVwKCk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG5cbiAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICBsb2dFcnJvcignVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uIC0gY2xlYW5pbmcgdXAnLCB7IFxuICAgICAgICByZWFzb246IHJlYXNvbj8ubWVzc2FnZSB8fCByZWFzb24sXG4gICAgICAgIHN0YWNrOiByZWFzb24/LnN0YWNrIFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIGxvZ0luZm8oJ01lbW9yeSBPcHRpbWl6ZXIgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgY2xlYW51cCBoYW5kbGVyIGZvciBhIHNwZWNpZmljIHJlc291cmNlXG4gICAqL1xuICByZWdpc3RlckNsZWFudXAoaWQsIGNsZWFudXBGdW5jdGlvbikge1xuICAgIGlmICh0aGlzLmNsZWFudXBIYW5kbGVycy5oYXMoaWQpKSB7XG4gICAgICBsb2dXYXJuKGBDbGVhbnVwIGhhbmRsZXIgYWxyZWFkeSByZWdpc3RlcmVkIGZvcjogJHtpZH1gKTtcbiAgICAgIHRoaXMuY2xlYW51cEhhbmRsZXJzLmdldChpZCkoKTsgLy8gQ2xlYW4gdXAgb2xkIG9uZSBmaXJzdFxuICAgIH1cbiAgICBcbiAgICB0aGlzLmNsZWFudXBIYW5kbGVycy5zZXQoaWQsIGNsZWFudXBGdW5jdGlvbik7XG4gICAgbG9nSW5mbyhgUmVnaXN0ZXJlZCBjbGVhbnVwIGhhbmRsZXI6ICR7aWR9YCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgaW50ZXJ2YWwgd2l0aCBhdXRvbWF0aWMgY2xlYW51cFxuICAgKi9cbiAgcmVnaXN0ZXJJbnRlcnZhbChpZCwgaW50ZXJ2YWxJZCkge1xuICAgIGlmICh0aGlzLmludGVydmFsQ2xlYW51cC5oYXMoaWQpKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmdldChpZCkpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmludGVydmFsQ2xlYW51cC5zZXQoaWQsIGludGVydmFsSWQpO1xuICAgIFxuICAgIC8vIEF1dG8tY2xlYW51cCBhZnRlciAxMCBtaW51dGVzIHRvIHByZXZlbnQgYWNjdW11bGF0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5pbnRlcnZhbENsZWFudXAuaGFzKGlkKSkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxDbGVhbnVwLmdldChpZCkpO1xuICAgICAgICB0aGlzLmludGVydmFsQ2xlYW51cC5kZWxldGUoaWQpO1xuICAgICAgICBsb2dJbmZvKGBBdXRvLWNsZWFuZWQgaW50ZXJ2YWw6ICR7aWR9YCk7XG4gICAgICB9XG4gICAgfSwgNjAwMDAwKTsgLy8gMTAgbWludXRlc1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHRpbWVvdXQgd2l0aCBhdXRvbWF0aWMgY2xlYW51cFxuICAgKi9cbiAgcmVnaXN0ZXJUaW1lb3V0KGlkLCB0aW1lb3V0SWQpIHtcbiAgICBpZiAodGhpcy50aW1lb3V0Q2xlYW51cC5oYXMoaWQpKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0Q2xlYW51cC5nZXQoaWQpKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy50aW1lb3V0Q2xlYW51cC5zZXQoaWQsIHRpbWVvdXRJZCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuZCByZWdpc3RlciBBYm9ydENvbnRyb2xsZXIgZm9yIEFQSSBjYWxsc1xuICAgKi9cbiAgY3JlYXRlQWJvcnRDb250cm9sbGVyKHRpbWVvdXRNcyA9IDMwMDAwKSB7XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuYWRkKGNvbnRyb2xsZXIpO1xuXG4gICAgLy8gQXV0by1hYm9ydCBhZnRlciB0aW1lb3V0IHRvIHByZXZlbnQgaGFuZ2luZyByZXF1ZXN0c1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFjb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmRlbGV0ZShjb250cm9sbGVyKTtcbiAgICAgICAgbG9nSW5mbygnQXV0by1hYm9ydGVkIEFQSSByZXF1ZXN0IGR1ZSB0byB0aW1lb3V0Jyk7XG4gICAgICB9XG4gICAgfSwgdGltZW91dE1zKTtcblxuICAgIC8vIENsZWFuIHVwIHRpbWVvdXQgd2hlbiBjb250cm9sbGVyIGlzIGFib3J0ZWRcbiAgICBjb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmRlbGV0ZShjb250cm9sbGVyKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb250cm9sbGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWN0IHVzZUVmZmVjdCBjbGVhbnVwIGhlbHBlclxuICAgKi9cbiAgY3JlYXRlUmVhY3RDbGVhbnVwKCkge1xuICAgIGNvbnN0IGNsZWFudXBGdW5jdGlvbnMgPSBbXTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcmVnaXN0ZXI6IChjbGVhbnVwRm4pID0+IHtcbiAgICAgICAgY2xlYW51cEZ1bmN0aW9ucy5wdXNoKGNsZWFudXBGbik7XG4gICAgICB9LFxuICAgICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgICBjbGVhbnVwRnVuY3Rpb25zLmZvckVhY2goKGZuLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dFcnJvcihgUmVhY3QgY2xlYW51cCBmdW5jdGlvbiAke2luZGV4fSBmYWlsZWRgLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNsZWFudXBGdW5jdGlvbnMubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIG1lbW9yeSBwcmVzc3VyZSBhbmQgdHJpZ2dlciBjbGVhbnVwIGlmIG5lZWRlZFxuICAgKi9cbiAgY2hlY2tNZW1vcnlQcmVzc3VyZSgpIHtcbiAgICAvLyBPbmx5IHJ1biBtZW1vcnkgY2hlY2tzIGluIHNlcnZlciBlbnZpcm9ubWVudFxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZW1Vc2FnZSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKTtcbiAgICBjb25zdCBoZWFwVXNlZCA9IG1lbVVzYWdlLmhlYXBVc2VkO1xuICAgIGNvbnN0IGV4dGVybmFsID0gbWVtVXNhZ2UuZXh0ZXJuYWw7XG4gICAgY29uc3QgdG90YWxNZW1vcnkgPSBoZWFwVXNlZCArIGV4dGVybmFsO1xuXG4gICAgbG9nSW5mbygnTWVtb3J5IHVzYWdlIGNoZWNrJywge1xuICAgICAgaGVhcFVzZWQ6IE1hdGgucm91bmQoaGVhcFVzZWQgLyAxMDI0IC8gMTAyNCkgKyAnTUInLFxuICAgICAgZXh0ZXJuYWw6IE1hdGgucm91bmQoZXh0ZXJuYWwgLyAxMDI0IC8gMTAyNCkgKyAnTUInLFxuICAgICAgdG90YWw6IE1hdGgucm91bmQodG90YWxNZW1vcnkgLyAxMDI0IC8gMTAyNCkgKyAnTUInXG4gICAgfSk7XG5cbiAgICAvLyBUcmlnZ2VyIGNsZWFudXAgaWYgbWVtb3J5IHVzYWdlIGlzIGhpZ2hcbiAgICBpZiAodG90YWxNZW1vcnkgPiB0aGlzLm1lbW9yeVByZXNzdXJlVGhyZXNob2xkKSB7XG4gICAgICBsb2dXYXJuKCdNZW1vcnkgcHJlc3N1cmUgZGV0ZWN0ZWQsIHRyaWdnZXJpbmcgY2xlYW51cCcsIHtcbiAgICAgICAgbWVtb3J5TUI6IE1hdGgucm91bmQodG90YWxNZW1vcnkgLyAxMDI0IC8gMTAyNClcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wZXJmb3JtTWVtb3J5Q2xlYW51cCgpO1xuICAgIH1cblxuICAgIC8vIEZvcmNlIGdhcmJhZ2UgY29sbGVjdGlvbiBpZiBtZW1vcnkgaXMgdmVyeSBoaWdoXG4gICAgaWYgKHRvdGFsTWVtb3J5ID4gdGhpcy5nY1RocmVzaG9sZCAmJiBnbG9iYWwuZ2MpIHtcbiAgICAgIGxvZ1dhcm4oJ0hpZ2ggbWVtb3J5IHVzYWdlLCBmb3JjaW5nIGdhcmJhZ2UgY29sbGVjdGlvbicpO1xuICAgICAgZ2xvYmFsLmdjKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gbWVtb3J5IGNsZWFudXAgb3BlcmF0aW9uc1xuICAgKi9cbiAgcGVyZm9ybU1lbW9yeUNsZWFudXAoKSB7XG4gICAgbGV0IGNsZWFuZWQgPSAwO1xuXG4gICAgLy8gQ2xlYW4gdXAgb2xkIGludGVydmFscyAob2xkZXIgdGhhbiA1IG1pbnV0ZXMpXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBmb3IgKGNvbnN0IFtpZCwgZGF0YV0gb2YgdGhpcy5pbnRlcnZhbENsZWFudXAuZW50cmllcygpKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEudGltZXN0YW1wICYmIG5vdyAtIGRhdGEudGltZXN0YW1wID4gMzAwMDAwKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoZGF0YS5pbnRlcnZhbElkKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbENsZWFudXAuZGVsZXRlKGlkKTtcbiAgICAgICAgY2xlYW5lZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIG9sZCB0aW1lb3V0c1xuICAgIGZvciAoY29uc3QgW2lkLCB0aW1lb3V0SWRdIG9mIHRoaXMudGltZW91dENsZWFudXAuZW50cmllcygpKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIHRoaXMudGltZW91dENsZWFudXAuZGVsZXRlKGlkKTtcbiAgICAgIGNsZWFuZWQrKztcbiAgICB9XG5cbiAgICAvLyBBYm9ydCBvbGQgQVBJIHJlcXVlc3RzXG4gICAgZm9yIChjb25zdCBjb250cm9sbGVyIG9mIHRoaXMuYWJvcnRDb250cm9sbGVycykge1xuICAgICAgaWYgKCFjb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgY2xlYW5lZCsrO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFib3J0Q29udHJvbGxlcnMuY2xlYXIoKTtcblxuICAgIGxvZ0luZm8oYE1lbW9yeSBjbGVhbnVwIGNvbXBsZXRlZCwgY2xlYW5lZCAke2NsZWFuZWR9IHJlc291cmNlc2ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gZ2xvYmFsIGNsZWFudXAgb24gc2h1dGRvd25cbiAgICovXG4gIHBlcmZvcm1HbG9iYWxDbGVhbnVwKCkge1xuICAgIGxvZ0luZm8oJ1BlcmZvcm1pbmcgZ2xvYmFsIGNsZWFudXAnKTtcblxuICAgIC8vIFJ1biBhbGwgcmVnaXN0ZXJlZCBjbGVhbnVwIGhhbmRsZXJzXG4gICAgZm9yIChjb25zdCBbaWQsIGNsZWFudXBGbl0gb2YgdGhpcy5jbGVhbnVwSGFuZGxlcnMuZW50cmllcygpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjbGVhbnVwRm4oKTtcbiAgICAgICAgbG9nSW5mbyhgQ2xlYW5lZCB1cDogJHtpZH1gKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ0Vycm9yKGBDbGVhbnVwIGZhaWxlZCBmb3I6ICR7aWR9YCwgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhciBhbGwgaW50ZXJ2YWxzIGFuZCB0aW1lb3V0c1xuICAgIGZvciAoY29uc3QgaW50ZXJ2YWxJZCBvZiB0aGlzLmludGVydmFsQ2xlYW51cC52YWx1ZXMoKSkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0eXBlb2YgaW50ZXJ2YWxJZCA9PT0gJ29iamVjdCcgPyBpbnRlcnZhbElkLmludGVydmFsSWQgOiBpbnRlcnZhbElkKTtcbiAgICB9XG4gICAgXG4gICAgZm9yIChjb25zdCB0aW1lb3V0SWQgb2YgdGhpcy50aW1lb3V0Q2xlYW51cC52YWx1ZXMoKSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuXG4gICAgLy8gQWJvcnQgYWxsIHBlbmRpbmcgcmVxdWVzdHNcbiAgICBmb3IgKGNvbnN0IGNvbnRyb2xsZXIgb2YgdGhpcy5hYm9ydENvbnRyb2xsZXJzKSB7XG4gICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgbWFwc1xuICAgIHRoaXMuY2xlYW51cEhhbmRsZXJzLmNsZWFyKCk7XG4gICAgdGhpcy5pbnRlcnZhbENsZWFudXAuY2xlYXIoKTtcbiAgICB0aGlzLnRpbWVvdXRDbGVhbnVwLmNsZWFyKCk7XG4gICAgdGhpcy5hYm9ydENvbnRyb2xsZXJzLmNsZWFyKCk7XG5cbiAgICBsb2dJbmZvKCdHbG9iYWwgY2xlYW51cCBjb21wbGV0ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbWVtb3J5IHN0YXRpc3RpY3NcbiAgICovXG4gIGdldE1lbW9yeVN0YXRzKCkge1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBhdmFpbGFibGU6IGZhbHNlLFxuICAgICAgICBlbnZpcm9ubWVudDogJ2Jyb3dzZXInLFxuICAgICAgICBjbGVhbnVwSGFuZGxlcnM6IHRoaXMuY2xlYW51cEhhbmRsZXJzLnNpemUsXG4gICAgICAgIGFjdGl2ZUludGVydmFsczogdGhpcy5pbnRlcnZhbENsZWFudXAuc2l6ZSxcbiAgICAgICAgYWN0aXZlVGltZW91dHM6IHRoaXMudGltZW91dENsZWFudXAuc2l6ZSxcbiAgICAgICAgYWN0aXZlUmVxdWVzdHM6IHRoaXMuYWJvcnRDb250cm9sbGVycy5zaXplXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IG1lbVVzYWdlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICBlbnZpcm9ubWVudDogJ3NlcnZlcicsXG4gICAgICBoZWFwOiB7XG4gICAgICAgIHVzZWQ6IE1hdGgucm91bmQobWVtVXNhZ2UuaGVhcFVzZWQgLyAxMDI0IC8gMTAyNCksXG4gICAgICAgIHRvdGFsOiBNYXRoLnJvdW5kKG1lbVVzYWdlLmhlYXBUb3RhbCAvIDEwMjQgLyAxMDI0KVxuICAgICAgfSxcbiAgICAgIGV4dGVybmFsOiBNYXRoLnJvdW5kKG1lbVVzYWdlLmV4dGVybmFsIC8gMTAyNCAvIDEwMjQpLFxuICAgICAgY2xlYW51cEhhbmRsZXJzOiB0aGlzLmNsZWFudXBIYW5kbGVycy5zaXplLFxuICAgICAgYWN0aXZlSW50ZXJ2YWxzOiB0aGlzLmludGVydmFsQ2xlYW51cC5zaXplLFxuICAgICAgYWN0aXZlVGltZW91dHM6IHRoaXMudGltZW91dENsZWFudXAuc2l6ZSxcbiAgICAgIGFjdGl2ZVJlcXVlc3RzOiB0aGlzLmFib3J0Q29udHJvbGxlcnMuc2l6ZVxuICAgIH07XG4gIH1cbn1cblxuLy8gR2xvYmFsIHNpbmdsZXRvbiBpbnN0YW5jZVxubGV0IG1lbW9yeU9wdGltaXplciA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZW1vcnlPcHRpbWl6ZXIoKSB7XG4gIGlmICghbWVtb3J5T3B0aW1pemVyKSB7XG4gICAgbWVtb3J5T3B0aW1pemVyID0gbmV3IE1lbW9yeU9wdGltaXplcigpO1xuICB9XG4gIHJldHVybiBtZW1vcnlPcHRpbWl6ZXI7XG59XG5cbi8vIFJlYWN0IGhvb2sgZm9yIG1lbW9yeS1vcHRpbWl6ZWQgZWZmZWN0c1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU1lbW9yeU9wdGltaXplZEVmZmVjdChlZmZlY3QsIGRlcHMpIHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvcHRpbWl6ZXIgPSBnZXRNZW1vcnlPcHRpbWl6ZXIoKTtcbiAgICBjb25zdCByZWFjdENsZWFudXAgPSBvcHRpbWl6ZXIuY3JlYXRlUmVhY3RDbGVhbnVwKCk7XG4gICAgXG4gICAgY29uc3QgY2xlYW51cCA9IGVmZmVjdChyZWFjdENsZWFudXAucmVnaXN0ZXIpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZWFjdENsZWFudXAuY2xlYW51cCgpO1xuICAgICAgaWYgKGNsZWFudXApIGNsZWFudXAoKTtcbiAgICB9O1xuICB9LCBkZXBzKTtcbn1cblxuLy8gQVBJIGNhbGwgaGVscGVyIHdpdGggYXV0b21hdGljIGNsZWFudXBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtZW1vcnlPcHRpbWl6ZWRBUElDYWxsKHVybCwgb3B0aW9ucyA9IHt9LCB0aW1lb3V0TXMgPSAzMDAwMCkge1xuICBjb25zdCBvcHRpbWl6ZXIgPSBnZXRNZW1vcnlPcHRpbWl6ZXIoKTtcbiAgY29uc3QgY29udHJvbGxlciA9IG9wdGltaXplci5jcmVhdGVBYm9ydENvbnRyb2xsZXIodGltZW91dE1zKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGxvZ1dhcm4oJ0FQSSBjYWxsIHdhcyBhYm9ydGVkJywgeyB1cmwgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZW91dCcpO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRNZW1vcnlPcHRpbWl6ZXI7Il0sIm5hbWVzIjpbImxvZ0luZm8iLCJsb2dFcnJvciIsImxvZ1dhcm4iLCJNZW1vcnlPcHRpbWl6ZXIiLCJjb25zdHJ1Y3RvciIsImNsZWFudXBIYW5kbGVycyIsIk1hcCIsImludGVydmFsQ2xlYW51cCIsInRpbWVvdXRDbGVhbnVwIiwiZXZlbnRMaXN0ZW5lcnMiLCJhYm9ydENvbnRyb2xsZXJzIiwiU2V0IiwibWVtb3J5UHJlc3N1cmVUaHJlc2hvbGQiLCJnY1RocmVzaG9sZCIsImlzSW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplTWVtb3J5TW9uaXRvcmluZyIsInByb2Nlc3MiLCJtZW1vcnlNb25pdG9yIiwic2V0SW50ZXJ2YWwiLCJjaGVja01lbW9yeVByZXNzdXJlIiwicmVnaXN0ZXJDbGVhbnVwIiwiY2xlYXJJbnRlcnZhbCIsInByb2Nlc3NDbGVhbnVwIiwicGVyZm9ybUdsb2JhbENsZWFudXAiLCJleGl0IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib25jZSIsIm9uIiwiZXJyb3IiLCJtZXNzYWdlIiwicmVhc29uIiwicHJvbWlzZSIsInN0YWNrIiwiaWQiLCJjbGVhbnVwRnVuY3Rpb24iLCJoYXMiLCJnZXQiLCJzZXQiLCJyZWdpc3RlckludGVydmFsIiwiaW50ZXJ2YWxJZCIsInNldFRpbWVvdXQiLCJkZWxldGUiLCJyZWdpc3RlclRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJjbGVhclRpbWVvdXQiLCJjcmVhdGVBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0TXMiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiYWRkIiwic2lnbmFsIiwiYWJvcnRlZCIsImFib3J0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZVJlYWN0Q2xlYW51cCIsImNsZWFudXBGdW5jdGlvbnMiLCJyZWdpc3RlciIsImNsZWFudXBGbiIsInB1c2giLCJjbGVhbnVwIiwiZm9yRWFjaCIsImZuIiwiaW5kZXgiLCJsZW5ndGgiLCJtZW1Vc2FnZSIsIm1lbW9yeVVzYWdlIiwiaGVhcFVzZWQiLCJleHRlcm5hbCIsInRvdGFsTWVtb3J5IiwiTWF0aCIsInJvdW5kIiwidG90YWwiLCJtZW1vcnlNQiIsInBlcmZvcm1NZW1vcnlDbGVhbnVwIiwiZ2xvYmFsIiwiZ2MiLCJjbGVhbmVkIiwibm93IiwiRGF0ZSIsImRhdGEiLCJlbnRyaWVzIiwidGltZXN0YW1wIiwiY2xlYXIiLCJ2YWx1ZXMiLCJnZXRNZW1vcnlTdGF0cyIsImF2YWlsYWJsZSIsImVudmlyb25tZW50Iiwic2l6ZSIsImFjdGl2ZUludGVydmFscyIsImFjdGl2ZVRpbWVvdXRzIiwiYWN0aXZlUmVxdWVzdHMiLCJoZWFwIiwidXNlZCIsImhlYXBUb3RhbCIsIm1lbW9yeU9wdGltaXplciIsImdldE1lbW9yeU9wdGltaXplciIsInVzZU1lbW9yeU9wdGltaXplZEVmZmVjdCIsImVmZmVjdCIsImRlcHMiLCJSZWFjdCIsInJlcXVpcmUiLCJ1c2VFZmZlY3QiLCJvcHRpbWl6ZXIiLCJyZWFjdENsZWFudXAiLCJtZW1vcnlPcHRpbWl6ZWRBUElDYWxsIiwidXJsIiwib3B0aW9ucyIsInJlc3BvbnNlIiwiZmV0Y2giLCJuYW1lIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/memory-optimizer.js\n");

/***/ }),

/***/ "(api)/./lib/production-logger.js":
/*!**********************************!*\
  !*** ./lib/production-logger.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logAPICall: () => (/* binding */ logAPICall),\n/* harmony export */   logBusiness: () => (/* binding */ logBusiness),\n/* harmony export */   logDBQuery: () => (/* binding */ logDBQuery),\n/* harmony export */   logDebug: () => (/* binding */ logDebug),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logInfo: () => (/* binding */ logInfo),\n/* harmony export */   logPerformance: () => (/* binding */ logPerformance),\n/* harmony export */   logSecurity: () => (/* binding */ logSecurity),\n/* harmony export */   logWarn: () => (/* binding */ logWarn),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var _environment_validation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./environment-validation.js */ \"(api)/./lib/environment-validation.js\");\n/**\n * Production-Safe Logging System\n * Handles logging with environment awareness and security\n */ \n// Log levels\nconst LOG_LEVELS = {\n    ERROR: 0,\n    WARN: 1,\n    INFO: 2,\n    DEBUG: 3,\n    TRACE: 4\n};\nclass ProductionLogger {\n    constructor(){\n        this.level = (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? LOG_LEVELS.WARN : LOG_LEVELS.DEBUG;\n        this.sensitivePatterns = [\n            /sk-[a-zA-Z0-9_-]+/,\n            /pk_[a-zA-Z0-9_-]+/,\n            /eyJ[a-zA-Z0-9_-]+/,\n            /password/i,\n            /secret/i,\n            /token/i,\n            /key.*=.*[a-zA-Z0-9_-]{20,}/ // Key-value pairs with long values\n        ];\n    }\n    /**\n   * Sanitize sensitive data from logs\n   */ sanitize(data) {\n        if (typeof data === \"string\") {\n            let sanitized = data;\n            this.sensitivePatterns.forEach((pattern)=>{\n                sanitized = sanitized.replace(pattern, \"[REDACTED]\");\n            });\n            return sanitized;\n        }\n        if (typeof data === \"object\" && data !== null) {\n            const sanitized = Array.isArray(data) ? [] : {};\n            for (const [key, value] of Object.entries(data)){\n                const keyLower = key.toLowerCase();\n                if (keyLower.includes(\"password\") || keyLower.includes(\"secret\") || keyLower.includes(\"token\") || keyLower.includes(\"key\")) {\n                    sanitized[key] = \"[REDACTED]\";\n                } else {\n                    sanitized[key] = this.sanitize(value);\n                }\n            }\n            return sanitized;\n        }\n        return data;\n    }\n    /**\n   * Format log message\n   */ formatMessage(level, message, data, metadata) {\n        const timestamp = new Date().toISOString();\n        const sanitizedData = data ? this.sanitize(data) : null;\n        const logEntry = {\n            timestamp,\n            level,\n            message,\n            ...sanitizedData && {\n                data: sanitizedData\n            },\n            ...metadata && {\n                metadata\n            }\n        };\n        return (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? JSON.stringify(logEntry) : logEntry;\n    }\n    /**\n   * Log error messages\n   */ error(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.ERROR) {\n            const formatted = this.formatMessage(\"ERROR\", message, data, metadata);\n            console.error((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"❌\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log warning messages\n   */ warn(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.WARN) {\n            const formatted = this.formatMessage(\"WARN\", message, data, metadata);\n            console.warn((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"⚠️\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log info messages\n   */ info(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.INFO) {\n            const formatted = this.formatMessage(\"INFO\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"ℹ️\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log debug messages (only in development)\n   */ debug(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.DEBUG && (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) {\n            const formatted = this.formatMessage(\"DEBUG\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"\\uD83D\\uDC1B\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log trace messages (only in development)\n   */ trace(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.TRACE && (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) {\n            const formatted = this.formatMessage(\"TRACE\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"\\uD83D\\uDD0D\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log performance metrics\n   */ performance(operation, duration, metadata = null) {\n        this.info(`Performance: ${operation}`, {\n            duration: `${duration}ms`\n        }, metadata);\n    }\n    /**\n   * Log API calls\n   */ apiCall(method, endpoint, duration, status) {\n        this.info(`API: ${method} ${endpoint}`, {\n            duration: `${duration}ms`,\n            status,\n            type: \"api_call\"\n        });\n    }\n    /**\n   * Log database queries\n   */ dbQuery(table, operation, duration, recordCount = null) {\n        this.debug(`DB: ${operation} on ${table}`, {\n            duration: `${duration}ms`,\n            recordCount,\n            type: \"db_query\"\n        });\n    }\n    /**\n   * Log security events\n   */ security(event, details = null) {\n        this.warn(`Security: ${event}`, details, {\n            type: \"security_event\"\n        });\n    }\n    /**\n   * Log business events\n   */ business(event, details = null) {\n        this.info(`Business: ${event}`, details, {\n            type: \"business_event\"\n        });\n    }\n}\n// Create singleton instance\nconst logger = new ProductionLogger();\n// Convenience functions for common use cases\nconst logError = (message, data, metadata)=>logger.error(message, data, metadata);\nconst logWarn = (message, data, metadata)=>logger.warn(message, data, metadata);\nconst logInfo = (message, data, metadata)=>logger.info(message, data, metadata);\nconst logDebug = (message, data, metadata)=>logger.debug(message, data, metadata);\nconst logPerformance = (operation, duration, metadata)=>logger.performance(operation, duration, metadata);\nconst logAPICall = (method, endpoint, duration, status)=>logger.apiCall(method, endpoint, duration, status);\nconst logDBQuery = (table, operation, duration, recordCount)=>logger.dbQuery(table, operation, duration, recordCount);\nconst logSecurity = (event, details)=>logger.security(event, details);\nconst logBusiness = (event, details)=>logger.business(event, details);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaWFuZ2xlLWludGVsbGlnZW5jZS1wbGF0Zm9ybS8uL2xpYi9wcm9kdWN0aW9uLWxvZ2dlci5qcz9lODNiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvZHVjdGlvbi1TYWZlIExvZ2dpbmcgU3lzdGVtXG4gKiBIYW5kbGVzIGxvZ2dpbmcgd2l0aCBlbnZpcm9ubWVudCBhd2FyZW5lc3MgYW5kIHNlY3VyaXR5XG4gKi9cblxuaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgaXNQcm9kdWN0aW9uIH0gZnJvbSAnLi9lbnZpcm9ubWVudC12YWxpZGF0aW9uLmpzJ1xuXG4vLyBMb2cgbGV2ZWxzXG5jb25zdCBMT0dfTEVWRUxTID0ge1xuICBFUlJPUjogMCxcbiAgV0FSTjogMSxcbiAgSU5GTzogMixcbiAgREVCVUc6IDMsXG4gIFRSQUNFOiA0XG59XG5cbmNsYXNzIFByb2R1Y3Rpb25Mb2dnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxldmVsID0gaXNQcm9kdWN0aW9uKCkgPyBMT0dfTEVWRUxTLldBUk4gOiBMT0dfTEVWRUxTLkRFQlVHXG4gICAgdGhpcy5zZW5zaXRpdmVQYXR0ZXJucyA9IFtcbiAgICAgIC9zay1bYS16QS1aMC05Xy1dKy8sIC8vIEFQSSBrZXlzIHN0YXJ0aW5nIHdpdGggc2stXG4gICAgICAvcGtfW2EtekEtWjAtOV8tXSsvLCAvLyBTdHJpcGUgcHVibGljIGtleXNcbiAgICAgIC9leUpbYS16QS1aMC05Xy1dKy8sIC8vIEpXVCB0b2tlbnNcbiAgICAgIC9wYXNzd29yZC9pLFxuICAgICAgL3NlY3JldC9pLFxuICAgICAgL3Rva2VuL2ksXG4gICAgICAva2V5Lio9LipbYS16QS1aMC05Xy1dezIwLH0vIC8vIEtleS12YWx1ZSBwYWlycyB3aXRoIGxvbmcgdmFsdWVzXG4gICAgXVxuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXplIHNlbnNpdGl2ZSBkYXRhIGZyb20gbG9nc1xuICAgKi9cbiAgc2FuaXRpemUoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCBzYW5pdGl6ZWQgPSBkYXRhXG4gICAgICB0aGlzLnNlbnNpdGl2ZVBhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XG4gICAgICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKHBhdHRlcm4sICdbUkVEQUNURURdJylcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2FuaXRpemVkXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gW10gOiB7fVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBjb25zdCBrZXlMb3dlciA9IGtleS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIFxuICAgICAgICBpZiAoa2V5TG93ZXIuaW5jbHVkZXMoJ3Bhc3N3b3JkJykgfHwgXG4gICAgICAgICAgICBrZXlMb3dlci5pbmNsdWRlcygnc2VjcmV0JykgfHwgXG4gICAgICAgICAgICBrZXlMb3dlci5pbmNsdWRlcygndG9rZW4nKSB8fFxuICAgICAgICAgICAga2V5TG93ZXIuaW5jbHVkZXMoJ2tleScpKSB7XG4gICAgICAgICAgc2FuaXRpemVkW2tleV0gPSAnW1JFREFDVEVEXSdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYW5pdGl6ZWRba2V5XSA9IHRoaXMuc2FuaXRpemUodmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHNhbml0aXplZFxuICAgIH1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGxvZyBtZXNzYWdlXG4gICAqL1xuICBmb3JtYXRNZXNzYWdlKGxldmVsLCBtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIGNvbnN0IHNhbml0aXplZERhdGEgPSBkYXRhID8gdGhpcy5zYW5pdGl6ZShkYXRhKSA6IG51bGxcbiAgICBcbiAgICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICAgIHRpbWVzdGFtcCxcbiAgICAgIGxldmVsLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIC4uLihzYW5pdGl6ZWREYXRhICYmIHsgZGF0YTogc2FuaXRpemVkRGF0YSB9KSxcbiAgICAgIC4uLihtZXRhZGF0YSAmJiB7IG1ldGFkYXRhIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGlzUHJvZHVjdGlvbigpID8gSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpIDogbG9nRW50cnlcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZXJyb3IgbWVzc2FnZXNcbiAgICovXG4gIGVycm9yKG1lc3NhZ2UsIGRhdGEgPSBudWxsLCBtZXRhZGF0YSA9IG51bGwpIHtcbiAgICBpZiAodGhpcy5sZXZlbCA+PSBMT0dfTEVWRUxTLkVSUk9SKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0VSUk9SJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLmVycm9yKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ+KdjCcsIGlzUHJvZHVjdGlvbigpID8gJycgOiBtZXNzYWdlLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIHdhcm5pbmcgbWVzc2FnZXNcbiAgICovXG4gIHdhcm4obWVzc2FnZSwgZGF0YSA9IG51bGwsIG1ldGFkYXRhID0gbnVsbCkge1xuICAgIGlmICh0aGlzLmxldmVsID49IExPR19MRVZFTFMuV0FSTikge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdXQVJOJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLndhcm4oaXNQcm9kdWN0aW9uKCkgPyBmb3JtYXR0ZWQgOiAn4pqg77iPJywgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IG1lc3NhZ2UsIGlzUHJvZHVjdGlvbigpID8gJycgOiB0aGlzLnNhbml0aXplKGRhdGEpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgaW5mbyBtZXNzYWdlc1xuICAgKi9cbiAgaW5mbyhtZXNzYWdlLCBkYXRhID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPj0gTE9HX0xFVkVMUy5JTkZPKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0lORk8nLCBtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ+KEue+4jycsIGlzUHJvZHVjdGlvbigpID8gJycgOiBtZXNzYWdlLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlYnVnIG1lc3NhZ2VzIChvbmx5IGluIGRldmVsb3BtZW50KVxuICAgKi9cbiAgZGVidWcobWVzc2FnZSwgZGF0YSA9IG51bGwsIG1ldGFkYXRhID0gbnVsbCkge1xuICAgIGlmICh0aGlzLmxldmVsID49IExPR19MRVZFTFMuREVCVUcgJiYgaXNEZXZlbG9wbWVudCgpKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0RFQlVHJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLmxvZyhpc1Byb2R1Y3Rpb24oKSA/IGZvcm1hdHRlZCA6ICfwn5CbJywgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IG1lc3NhZ2UsIGlzUHJvZHVjdGlvbigpID8gJycgOiB0aGlzLnNhbml0aXplKGRhdGEpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgdHJhY2UgbWVzc2FnZXMgKG9ubHkgaW4gZGV2ZWxvcG1lbnQpXG4gICAqL1xuICB0cmFjZShtZXNzYWdlLCBkYXRhID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPj0gTE9HX0xFVkVMUy5UUkFDRSAmJiBpc0RldmVsb3BtZW50KCkpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnVFJBQ0UnLCBtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ/CflI0nLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogbWVzc2FnZSwgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IHRoaXMuc2FuaXRpemUoZGF0YSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAqL1xuICBwZXJmb3JtYW5jZShvcGVyYXRpb24sIGR1cmF0aW9uLCBtZXRhZGF0YSA9IG51bGwpIHtcbiAgICB0aGlzLmluZm8oYFBlcmZvcm1hbmNlOiAke29wZXJhdGlvbn1gLCB7IGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AgfSwgbWV0YWRhdGEpXG4gIH1cblxuICAvKipcbiAgICogTG9nIEFQSSBjYWxsc1xuICAgKi9cbiAgYXBpQ2FsbChtZXRob2QsIGVuZHBvaW50LCBkdXJhdGlvbiwgc3RhdHVzKSB7XG4gICAgdGhpcy5pbmZvKGBBUEk6ICR7bWV0aG9kfSAke2VuZHBvaW50fWAsIHtcbiAgICAgIGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AsXG4gICAgICBzdGF0dXMsXG4gICAgICB0eXBlOiAnYXBpX2NhbGwnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZGF0YWJhc2UgcXVlcmllc1xuICAgKi9cbiAgZGJRdWVyeSh0YWJsZSwgb3BlcmF0aW9uLCBkdXJhdGlvbiwgcmVjb3JkQ291bnQgPSBudWxsKSB7XG4gICAgdGhpcy5kZWJ1ZyhgREI6ICR7b3BlcmF0aW9ufSBvbiAke3RhYmxlfWAsIHtcbiAgICAgIGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AsXG4gICAgICByZWNvcmRDb3VudCxcbiAgICAgIHR5cGU6ICdkYl9xdWVyeSdcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBzZWN1cml0eSBldmVudHNcbiAgICovXG4gIHNlY3VyaXR5KGV2ZW50LCBkZXRhaWxzID0gbnVsbCkge1xuICAgIHRoaXMud2FybihgU2VjdXJpdHk6ICR7ZXZlbnR9YCwgZGV0YWlscywgeyB0eXBlOiAnc2VjdXJpdHlfZXZlbnQnIH0pXG4gIH1cblxuICAvKipcbiAgICogTG9nIGJ1c2luZXNzIGV2ZW50c1xuICAgKi9cbiAgYnVzaW5lc3MoZXZlbnQsIGRldGFpbHMgPSBudWxsKSB7XG4gICAgdGhpcy5pbmZvKGBCdXNpbmVzczogJHtldmVudH1gLCBkZXRhaWxzLCB7IHR5cGU6ICdidXNpbmVzc19ldmVudCcgfSlcbiAgfVxufVxuXG4vLyBDcmVhdGUgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gbmV3IFByb2R1Y3Rpb25Mb2dnZXIoKVxuXG4vLyBDb252ZW5pZW5jZSBmdW5jdGlvbnMgZm9yIGNvbW1vbiB1c2UgY2FzZXNcbmV4cG9ydCBjb25zdCBsb2dFcnJvciA9IChtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSkgPT4gbG9nZ2VyLmVycm9yKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ1dhcm4gPSAobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpID0+IGxvZ2dlci53YXJuKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ0luZm8gPSAobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpID0+IGxvZ2dlci5pbmZvKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ0RlYnVnID0gKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKSA9PiBsb2dnZXIuZGVidWcobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG5leHBvcnQgY29uc3QgbG9nUGVyZm9ybWFuY2UgPSAob3BlcmF0aW9uLCBkdXJhdGlvbiwgbWV0YWRhdGEpID0+IGxvZ2dlci5wZXJmb3JtYW5jZShvcGVyYXRpb24sIGR1cmF0aW9uLCBtZXRhZGF0YSlcbmV4cG9ydCBjb25zdCBsb2dBUElDYWxsID0gKG1ldGhvZCwgZW5kcG9pbnQsIGR1cmF0aW9uLCBzdGF0dXMpID0+IGxvZ2dlci5hcGlDYWxsKG1ldGhvZCwgZW5kcG9pbnQsIGR1cmF0aW9uLCBzdGF0dXMpXG5leHBvcnQgY29uc3QgbG9nREJRdWVyeSA9ICh0YWJsZSwgb3BlcmF0aW9uLCBkdXJhdGlvbiwgcmVjb3JkQ291bnQpID0+IGxvZ2dlci5kYlF1ZXJ5KHRhYmxlLCBvcGVyYXRpb24sIGR1cmF0aW9uLCByZWNvcmRDb3VudClcbmV4cG9ydCBjb25zdCBsb2dTZWN1cml0eSA9IChldmVudCwgZGV0YWlscykgPT4gbG9nZ2VyLnNlY3VyaXR5KGV2ZW50LCBkZXRhaWxzKVxuZXhwb3J0IGNvbnN0IGxvZ0J1c2luZXNzID0gKGV2ZW50LCBkZXRhaWxzKSA9PiBsb2dnZXIuYnVzaW5lc3MoZXZlbnQsIGRldGFpbHMpXG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlciJdLCJuYW1lcyI6WyJpc0RldmVsb3BtZW50IiwiaXNQcm9kdWN0aW9uIiwiTE9HX0xFVkVMUyIsIkVSUk9SIiwiV0FSTiIsIklORk8iLCJERUJVRyIsIlRSQUNFIiwiUHJvZHVjdGlvbkxvZ2dlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJzZW5zaXRpdmVQYXR0ZXJucyIsInNhbml0aXplIiwiZGF0YSIsInNhbml0aXplZCIsImZvckVhY2giLCJwYXR0ZXJuIiwicmVwbGFjZSIsIkFycmF5IiwiaXNBcnJheSIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImtleUxvd2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImZvcm1hdE1lc3NhZ2UiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzYW5pdGl6ZWREYXRhIiwibG9nRW50cnkiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJmb3JtYXR0ZWQiLCJjb25zb2xlIiwid2FybiIsImluZm8iLCJsb2ciLCJkZWJ1ZyIsInRyYWNlIiwicGVyZm9ybWFuY2UiLCJvcGVyYXRpb24iLCJkdXJhdGlvbiIsImFwaUNhbGwiLCJtZXRob2QiLCJlbmRwb2ludCIsInN0YXR1cyIsInR5cGUiLCJkYlF1ZXJ5IiwidGFibGUiLCJyZWNvcmRDb3VudCIsInNlY3VyaXR5IiwiZXZlbnQiLCJkZXRhaWxzIiwiYnVzaW5lc3MiLCJsb2dnZXIiLCJsb2dFcnJvciIsImxvZ1dhcm4iLCJsb2dJbmZvIiwibG9nRGVidWciLCJsb2dQZXJmb3JtYW5jZSIsImxvZ0FQSUNhbGwiLCJsb2dEQlF1ZXJ5IiwibG9nU2VjdXJpdHkiLCJsb2dCdXNpbmVzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/production-logger.js\n");

/***/ }),

/***/ "(api)/./lib/supabase-client.js":
/*!********************************!*\
  !*** ./lib/supabase-client.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   executeOptimizedQuery: () => (/* binding */ executeOptimizedQuery),\n/* harmony export */   getConnectionStats: () => (/* binding */ getConnectionStats),\n/* harmony export */   getServerSupabaseClient: () => (/* binding */ getServerSupabaseClient),\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   shutdownConnections: () => (/* binding */ shutdownConnections),\n/* harmony export */   testSupabaseConnection: () => (/* binding */ testSupabaseConnection)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _production_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./production-logger.js */ \"(api)/./lib/production-logger.js\");\n/* harmony import */ var _memory_optimizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./memory-optimizer.js */ \"(api)/./lib/memory-optimizer.js\");\n/**\n * SHARED SUPABASE CLIENT WITH SERVER/CLIENT SEPARATION\n * Ensures service keys are NEVER exposed client-side\n * Single instance pattern to avoid conflicts\n */ \n\n\nlet supabaseInstance = null;\nlet supabaseServerInstance = null;\nlet connectionPool = {\n    activeConnections: 0,\n    maxConnections: 50,\n    connectionQueue: [],\n    lastCleanup: Date.now(),\n    peakConnections: 0,\n    totalQueries: 0\n};\n/**\n * Get Supabase client appropriate for the environment\n * Client-side: Uses anonymous key (safe for browser)\n * Server-side: Uses service role key (never exposed to browser)\n */ const getSupabaseClient = ()=>{\n    // Check if we're on the server or client\n    const isServer = \"undefined\" === \"undefined\";\n    if (isServer) {\n        // SERVER-SIDE: Use service role key for full access\n        if (!supabaseServerInstance) {\n            const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n            if (!serviceKey) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"SUPABASE_SERVICE_ROLE_KEY not found in server environment\");\n                throw new Error(\"Server configuration error: Missing service key\");\n            }\n            supabaseServerInstance = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mrwitpgbcaxgnirqtavt.supabase.co\", serviceKey, {\n                auth: {\n                    autoRefreshToken: false,\n                    persistSession: false\n                },\n                db: {\n                    schema: \"public\"\n                },\n                global: {\n                    headers: {\n                        \"User-Agent\": \"Triangle-Intelligence-Platform/1.0\"\n                    }\n                }\n            });\n            // Register cleanup with memory optimizer\n            const memoryOptimizer = (0,_memory_optimizer_js__WEBPACK_IMPORTED_MODULE_2__.getMemoryOptimizer)();\n            memoryOptimizer.registerCleanup(\"supabase-server-client\", ()=>{\n                if (supabaseServerInstance) {\n                    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Cleaning up Supabase server connections\");\n                    supabaseServerInstance = null;\n                }\n            });\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Created server-side Supabase client with service role and memory optimization\");\n        }\n        return supabaseServerInstance;\n    } else {\n        // CLIENT-SIDE: Use anonymous key only\n        if (!supabaseInstance) {\n            const anonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yd2l0cGdiY2F4Z25pcnF0YXZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjUxMzQsImV4cCI6MjA2NTQwMTEzNH0.5g-eaUIwy4VQD2YfNC2sFNoZYF1HdUzVTNJZvtuVSI8\";\n            if (!anonKey) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"NEXT_PUBLIC_SUPABASE_ANON_KEY not found\");\n                throw new Error(\"Client configuration error: Missing anonymous key\");\n            }\n            supabaseInstance = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mrwitpgbcaxgnirqtavt.supabase.co\", anonKey);\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Created client-side Supabase client with anonymous key\");\n        }\n        return supabaseInstance;\n    }\n};\n/**\n * Get server-only Supabase client with service role\n * CRITICAL: Only use in API routes, never in components\n */ const getServerSupabaseClient = ()=>{\n    if (false) {}\n    if (!supabaseServerInstance) {\n        const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n        if (!serviceKey) {\n            throw new Error(\"SUPABASE_SERVICE_ROLE_KEY not configured\");\n        }\n        supabaseServerInstance = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mrwitpgbcaxgnirqtavt.supabase.co\", serviceKey, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Created dedicated server Supabase client\");\n    }\n    return supabaseServerInstance;\n};\n// Test database connection\nconst testSupabaseConnection = async ()=>{\n    try {\n        const client = getSupabaseClient();\n        const { data, error } = await client.from(\"translations\").select(\"*\").limit(1);\n        if (error) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"Supabase connection test failed\", {\n                error: error.message\n            });\n            return false;\n        }\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Supabase connection test successful\");\n        return true;\n    } catch (error) {\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(\"Supabase connection test error\", {\n            error: error.message\n        });\n        return false;\n    }\n};\n/**\n * Memory-optimized database query wrapper\n */ const executeOptimizedQuery = async (queryFn, queryName = \"unknown\")=>{\n    const startTime = Date.now();\n    connectionPool.activeConnections++;\n    connectionPool.totalQueries++;\n    // Track peak connections for monitoring\n    if (connectionPool.activeConnections > connectionPool.peakConnections) {\n        connectionPool.peakConnections = connectionPool.activeConnections;\n    }\n    try {\n        // Check if we need cleanup\n        if (Date.now() - connectionPool.lastCleanup > 300000) {\n            cleanupConnections();\n        }\n        const result = await queryFn();\n        const duration = Date.now() - startTime;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(`Optimized query executed: ${queryName}`, {\n            duration: `${duration}ms`,\n            activeConnections: connectionPool.activeConnections,\n            peakConnections: connectionPool.peakConnections\n        });\n        return result;\n    } catch (error) {\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logError)(`Optimized query failed: ${queryName}`, {\n            error: error.message,\n            duration: `${Date.now() - startTime}ms`\n        });\n        throw error;\n    } finally{\n        connectionPool.activeConnections--;\n    }\n};\n/**\n * Clean up connection pool\n */ const cleanupConnections = ()=>{\n    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Cleaning up Supabase connection pool\", {\n        activeConnections: connectionPool.activeConnections,\n        queueSize: connectionPool.connectionQueue.length\n    });\n    // Reset connection tracking\n    connectionPool.activeConnections = Math.max(0, connectionPool.activeConnections);\n    connectionPool.connectionQueue = connectionPool.connectionQueue.filter((conn)=>Date.now() - conn.created < 300000 // 5 minutes\n    );\n    connectionPool.lastCleanup = Date.now();\n};\n/**\n * Get connection pool statistics\n */ const getConnectionStats = ()=>{\n    return {\n        activeConnections: connectionPool.activeConnections,\n        maxConnections: connectionPool.maxConnections,\n        peakConnections: connectionPool.peakConnections,\n        totalQueries: connectionPool.totalQueries,\n        queueSize: connectionPool.connectionQueue.length,\n        lastCleanup: new Date(connectionPool.lastCleanup).toISOString(),\n        utilizationPercent: Math.round(connectionPool.activeConnections / connectionPool.maxConnections * 100),\n        status: connectionPool.activeConnections < connectionPool.maxConnections * 0.8 ? \"healthy\" : \"high_load\"\n    };\n};\n/**\n * Graceful shutdown - cleanup all connections\n */ const shutdownConnections = ()=>{\n    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"Shutting down all Supabase connections\");\n    supabaseInstance = null;\n    supabaseServerInstance = null;\n    connectionPool.activeConnections = 0;\n    connectionPool.connectionQueue = [];\n    (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_1__.logInfo)(\"All Supabase connections shut down successfully\");\n};\n// Register shutdown handler\nconst memoryOptimizer = (0,_memory_optimizer_js__WEBPACK_IMPORTED_MODULE_2__.getMemoryOptimizer)();\nmemoryOptimizer.registerCleanup(\"supabase-connections\", shutdownConnections);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getSupabaseClient);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXBhYmFzZS1jbGllbnQuanM/MDkzMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNIQVJFRCBTVVBBQkFTRSBDTElFTlQgV0lUSCBTRVJWRVIvQ0xJRU5UIFNFUEFSQVRJT05cbiAqIEVuc3VyZXMgc2VydmljZSBrZXlzIGFyZSBORVZFUiBleHBvc2VkIGNsaWVudC1zaWRlXG4gKiBTaW5nbGUgaW5zdGFuY2UgcGF0dGVybiB0byBhdm9pZCBjb25mbGljdHNcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5pbXBvcnQgeyBsb2dJbmZvLCBsb2dFcnJvciB9IGZyb20gJy4vcHJvZHVjdGlvbi1sb2dnZXIuanMnXG5pbXBvcnQgeyBnZXRNZW1vcnlPcHRpbWl6ZXIgfSBmcm9tICcuL21lbW9yeS1vcHRpbWl6ZXIuanMnXG5cbmxldCBzdXBhYmFzZUluc3RhbmNlID0gbnVsbFxubGV0IHN1cGFiYXNlU2VydmVySW5zdGFuY2UgPSBudWxsXG5sZXQgY29ubmVjdGlvblBvb2wgPSB7XG4gIGFjdGl2ZUNvbm5lY3Rpb25zOiAwLFxuICBtYXhDb25uZWN0aW9uczogNTAsIC8vIFNjYWxlZCBmb3IgcHJvZHVjdGlvbiBjb25jdXJyZW50IHVzZXJzXG4gIGNvbm5lY3Rpb25RdWV1ZTogW10sXG4gIGxhc3RDbGVhbnVwOiBEYXRlLm5vdygpLFxuICBwZWFrQ29ubmVjdGlvbnM6IDAsXG4gIHRvdGFsUXVlcmllczogMFxufVxuXG4vKipcbiAqIEdldCBTdXBhYmFzZSBjbGllbnQgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnZpcm9ubWVudFxuICogQ2xpZW50LXNpZGU6IFVzZXMgYW5vbnltb3VzIGtleSAoc2FmZSBmb3IgYnJvd3NlcilcbiAqIFNlcnZlci1zaWRlOiBVc2VzIHNlcnZpY2Ugcm9sZSBrZXkgKG5ldmVyIGV4cG9zZWQgdG8gYnJvd3NlcilcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFN1cGFiYXNlQ2xpZW50ID0gKCkgPT4ge1xuICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgc2VydmVyIG9yIGNsaWVudFxuICBjb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXG4gIFxuICBpZiAoaXNTZXJ2ZXIpIHtcbiAgICAvLyBTRVJWRVItU0lERTogVXNlIHNlcnZpY2Ugcm9sZSBrZXkgZm9yIGZ1bGwgYWNjZXNzXG4gICAgaWYgKCFzdXBhYmFzZVNlcnZlckluc3RhbmNlKSB7XG4gICAgICBjb25zdCBzZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVxuICAgICAgaWYgKCFzZXJ2aWNlS2V5KSB7XG4gICAgICAgIGxvZ0Vycm9yKCdTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIG5vdCBmb3VuZCBpbiBzZXJ2ZXIgZW52aXJvbm1lbnQnKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcnZlciBjb25maWd1cmF0aW9uIGVycm9yOiBNaXNzaW5nIHNlcnZpY2Uga2V5JylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSA9IGNyZWF0ZUNsaWVudChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgICAgICBzZXJ2aWNlS2V5LFxuICAgICAgICB7XG4gICAgICAgICAgYXV0aDoge1xuICAgICAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7XG4gICAgICAgICAgICBzY2hlbWE6ICdwdWJsaWMnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnbG9iYWw6IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnVHJpYW5nbGUtSW50ZWxsaWdlbmNlLVBsYXRmb3JtLzEuMCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gUmVnaXN0ZXIgY2xlYW51cCB3aXRoIG1lbW9yeSBvcHRpbWl6ZXJcbiAgICAgIGNvbnN0IG1lbW9yeU9wdGltaXplciA9IGdldE1lbW9yeU9wdGltaXplcigpXG4gICAgICBtZW1vcnlPcHRpbWl6ZXIucmVnaXN0ZXJDbGVhbnVwKCdzdXBhYmFzZS1zZXJ2ZXItY2xpZW50JywgKCkgPT4ge1xuICAgICAgICBpZiAoc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSkge1xuICAgICAgICAgIGxvZ0luZm8oJ0NsZWFuaW5nIHVwIFN1cGFiYXNlIHNlcnZlciBjb25uZWN0aW9ucycpXG4gICAgICAgICAgc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgbG9nSW5mbygnQ3JlYXRlZCBzZXJ2ZXItc2lkZSBTdXBhYmFzZSBjbGllbnQgd2l0aCBzZXJ2aWNlIHJvbGUgYW5kIG1lbW9yeSBvcHRpbWl6YXRpb24nKVxuICAgIH1cbiAgICByZXR1cm4gc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZVxuICB9IGVsc2Uge1xuICAgIC8vIENMSUVOVC1TSURFOiBVc2UgYW5vbnltb3VzIGtleSBvbmx5XG4gICAgaWYgKCFzdXBhYmFzZUluc3RhbmNlKSB7XG4gICAgICBjb25zdCBhbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVlcbiAgICAgIGlmICghYW5vbktleSkge1xuICAgICAgICBsb2dFcnJvcignTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgbm90IGZvdW5kJylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgY29uZmlndXJhdGlvbiBlcnJvcjogTWlzc2luZyBhbm9ueW1vdXMga2V5JylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3VwYWJhc2VJbnN0YW5jZSA9IGNyZWF0ZUNsaWVudChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgICAgICBhbm9uS2V5XG4gICAgICApXG4gICAgICBsb2dJbmZvKCdDcmVhdGVkIGNsaWVudC1zaWRlIFN1cGFiYXNlIGNsaWVudCB3aXRoIGFub255bW91cyBrZXknKVxuICAgIH1cbiAgICByZXR1cm4gc3VwYWJhc2VJbnN0YW5jZVxuICB9XG59XG5cbi8qKlxuICogR2V0IHNlcnZlci1vbmx5IFN1cGFiYXNlIGNsaWVudCB3aXRoIHNlcnZpY2Ugcm9sZVxuICogQ1JJVElDQUw6IE9ubHkgdXNlIGluIEFQSSByb3V0ZXMsIG5ldmVyIGluIGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclN1cGFiYXNlQ2xpZW50ID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NFQ1VSSVRZIFZJT0xBVElPTjogQXR0ZW1wdGVkIHRvIHVzZSBzZXJ2ZXIgY2xpZW50IG9uIGNsaWVudC1zaWRlJylcbiAgfVxuICBcbiAgaWYgKCFzdXBhYmFzZVNlcnZlckluc3RhbmNlKSB7XG4gICAgY29uc3Qgc2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVlcbiAgICBpZiAoIXNlcnZpY2VLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBub3QgY29uZmlndXJlZCcpXG4gICAgfVxuICAgIFxuICAgIHN1cGFiYXNlU2VydmVySW5zdGFuY2UgPSBjcmVhdGVDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgICBzZXJ2aWNlS2V5LFxuICAgICAge1xuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gICAgbG9nSW5mbygnQ3JlYXRlZCBkZWRpY2F0ZWQgc2VydmVyIFN1cGFiYXNlIGNsaWVudCcpXG4gIH1cbiAgcmV0dXJuIHN1cGFiYXNlU2VydmVySW5zdGFuY2Vcbn1cblxuLy8gVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXG5leHBvcnQgY29uc3QgdGVzdFN1cGFiYXNlQ29ubmVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBnZXRTdXBhYmFzZUNsaWVudCgpXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LmZyb20oJ3RyYW5zbGF0aW9ucycpLnNlbGVjdCgnKicpLmxpbWl0KDEpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcignU3VwYWJhc2UgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZCcsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICBsb2dJbmZvKCdTdXBhYmFzZSBjb25uZWN0aW9uIHRlc3Qgc3VjY2Vzc2Z1bCcpXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcignU3VwYWJhc2UgY29ubmVjdGlvbiB0ZXN0IGVycm9yJywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbi8qKlxuICogTWVtb3J5LW9wdGltaXplZCBkYXRhYmFzZSBxdWVyeSB3cmFwcGVyXG4gKi9cbmV4cG9ydCBjb25zdCBleGVjdXRlT3B0aW1pemVkUXVlcnkgPSBhc3luYyAocXVlcnlGbiwgcXVlcnlOYW1lID0gJ3Vua25vd24nKSA9PiB7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMrK1xuICBjb25uZWN0aW9uUG9vbC50b3RhbFF1ZXJpZXMrK1xuICBcbiAgLy8gVHJhY2sgcGVhayBjb25uZWN0aW9ucyBmb3IgbW9uaXRvcmluZ1xuICBpZiAoY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMgPiBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnMpIHtcbiAgICBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnMgPSBjb25uZWN0aW9uUG9vbC5hY3RpdmVDb25uZWN0aW9uc1xuICB9XG4gIFxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgY2xlYW51cFxuICAgIGlmIChEYXRlLm5vdygpIC0gY29ubmVjdGlvblBvb2wubGFzdENsZWFudXAgPiAzMDAwMDApIHsgLy8gNSBtaW51dGVzXG4gICAgICBjbGVhbnVwQ29ubmVjdGlvbnMoKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeUZuKClcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICBcbiAgICBsb2dJbmZvKGBPcHRpbWl6ZWQgcXVlcnkgZXhlY3V0ZWQ6ICR7cXVlcnlOYW1lfWAsIHsgXG4gICAgICBkdXJhdGlvbjogYCR7ZHVyYXRpb259bXNgLFxuICAgICAgYWN0aXZlQ29ubmVjdGlvbnM6IGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zLFxuICAgICAgcGVha0Nvbm5lY3Rpb25zOiBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnNcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcihgT3B0aW1pemVkIHF1ZXJ5IGZhaWxlZDogJHtxdWVyeU5hbWV9YCwgeyBcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgZHVyYXRpb246IGAke0RhdGUubm93KCkgLSBzdGFydFRpbWV9bXNgXG4gICAgfSlcbiAgICB0aHJvdyBlcnJvclxuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zLS1cbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGNvbm5lY3Rpb24gcG9vbFxuICovXG5jb25zdCBjbGVhbnVwQ29ubmVjdGlvbnMgPSAoKSA9PiB7XG4gIGxvZ0luZm8oJ0NsZWFuaW5nIHVwIFN1cGFiYXNlIGNvbm5lY3Rpb24gcG9vbCcsIHtcbiAgICBhY3RpdmVDb25uZWN0aW9uczogY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMsXG4gICAgcXVldWVTaXplOiBjb25uZWN0aW9uUG9vbC5jb25uZWN0aW9uUXVldWUubGVuZ3RoXG4gIH0pXG4gIFxuICAvLyBSZXNldCBjb25uZWN0aW9uIHRyYWNraW5nXG4gIGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zID0gTWF0aC5tYXgoMCwgY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMpXG4gIGNvbm5lY3Rpb25Qb29sLmNvbm5lY3Rpb25RdWV1ZSA9IGNvbm5lY3Rpb25Qb29sLmNvbm5lY3Rpb25RdWV1ZS5maWx0ZXIoXG4gICAgY29ubiA9PiBEYXRlLm5vdygpIC0gY29ubi5jcmVhdGVkIDwgMzAwMDAwIC8vIDUgbWludXRlc1xuICApXG4gIGNvbm5lY3Rpb25Qb29sLmxhc3RDbGVhbnVwID0gRGF0ZS5ub3coKVxufVxuXG4vKipcbiAqIEdldCBjb25uZWN0aW9uIHBvb2wgc3RhdGlzdGljc1xuICovXG5leHBvcnQgY29uc3QgZ2V0Q29ubmVjdGlvblN0YXRzID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZUNvbm5lY3Rpb25zOiBjb25uZWN0aW9uUG9vbC5hY3RpdmVDb25uZWN0aW9ucyxcbiAgICBtYXhDb25uZWN0aW9uczogY29ubmVjdGlvblBvb2wubWF4Q29ubmVjdGlvbnMsXG4gICAgcGVha0Nvbm5lY3Rpb25zOiBjb25uZWN0aW9uUG9vbC5wZWFrQ29ubmVjdGlvbnMsXG4gICAgdG90YWxRdWVyaWVzOiBjb25uZWN0aW9uUG9vbC50b3RhbFF1ZXJpZXMsXG4gICAgcXVldWVTaXplOiBjb25uZWN0aW9uUG9vbC5jb25uZWN0aW9uUXVldWUubGVuZ3RoLFxuICAgIGxhc3RDbGVhbnVwOiBuZXcgRGF0ZShjb25uZWN0aW9uUG9vbC5sYXN0Q2xlYW51cCkudG9JU09TdHJpbmcoKSxcbiAgICB1dGlsaXphdGlvblBlcmNlbnQ6IE1hdGgucm91bmQoKGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zIC8gY29ubmVjdGlvblBvb2wubWF4Q29ubmVjdGlvbnMpICogMTAwKSxcbiAgICBzdGF0dXM6IGNvbm5lY3Rpb25Qb29sLmFjdGl2ZUNvbm5lY3Rpb25zIDwgY29ubmVjdGlvblBvb2wubWF4Q29ubmVjdGlvbnMgKiAwLjggPyAnaGVhbHRoeScgOiAnaGlnaF9sb2FkJ1xuICB9XG59XG5cbi8qKlxuICogR3JhY2VmdWwgc2h1dGRvd24gLSBjbGVhbnVwIGFsbCBjb25uZWN0aW9uc1xuICovXG5leHBvcnQgY29uc3Qgc2h1dGRvd25Db25uZWN0aW9ucyA9ICgpID0+IHtcbiAgbG9nSW5mbygnU2h1dHRpbmcgZG93biBhbGwgU3VwYWJhc2UgY29ubmVjdGlvbnMnKVxuICBcbiAgc3VwYWJhc2VJbnN0YW5jZSA9IG51bGxcbiAgc3VwYWJhc2VTZXJ2ZXJJbnN0YW5jZSA9IG51bGxcbiAgY29ubmVjdGlvblBvb2wuYWN0aXZlQ29ubmVjdGlvbnMgPSAwXG4gIGNvbm5lY3Rpb25Qb29sLmNvbm5lY3Rpb25RdWV1ZSA9IFtdXG4gIFxuICBsb2dJbmZvKCdBbGwgU3VwYWJhc2UgY29ubmVjdGlvbnMgc2h1dCBkb3duIHN1Y2Nlc3NmdWxseScpXG59XG5cbi8vIFJlZ2lzdGVyIHNodXRkb3duIGhhbmRsZXJcbmNvbnN0IG1lbW9yeU9wdGltaXplciA9IGdldE1lbW9yeU9wdGltaXplcigpXG5tZW1vcnlPcHRpbWl6ZXIucmVnaXN0ZXJDbGVhbnVwKCdzdXBhYmFzZS1jb25uZWN0aW9ucycsIHNodXRkb3duQ29ubmVjdGlvbnMpXG5cbmV4cG9ydCBkZWZhdWx0IGdldFN1cGFiYXNlQ2xpZW50Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImxvZ0luZm8iLCJsb2dFcnJvciIsImdldE1lbW9yeU9wdGltaXplciIsInN1cGFiYXNlSW5zdGFuY2UiLCJzdXBhYmFzZVNlcnZlckluc3RhbmNlIiwiY29ubmVjdGlvblBvb2wiLCJhY3RpdmVDb25uZWN0aW9ucyIsIm1heENvbm5lY3Rpb25zIiwiY29ubmVjdGlvblF1ZXVlIiwibGFzdENsZWFudXAiLCJEYXRlIiwibm93IiwicGVha0Nvbm5lY3Rpb25zIiwidG90YWxRdWVyaWVzIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJpc1NlcnZlciIsInNlcnZpY2VLZXkiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImRiIiwic2NoZW1hIiwiZ2xvYmFsIiwiaGVhZGVycyIsIm1lbW9yeU9wdGltaXplciIsInJlZ2lzdGVyQ2xlYW51cCIsImFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldFNlcnZlclN1cGFiYXNlQ2xpZW50IiwidGVzdFN1cGFiYXNlQ29ubmVjdGlvbiIsImNsaWVudCIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsIm1lc3NhZ2UiLCJleGVjdXRlT3B0aW1pemVkUXVlcnkiLCJxdWVyeUZuIiwicXVlcnlOYW1lIiwic3RhcnRUaW1lIiwiY2xlYW51cENvbm5lY3Rpb25zIiwicmVzdWx0IiwiZHVyYXRpb24iLCJxdWV1ZVNpemUiLCJsZW5ndGgiLCJNYXRoIiwibWF4IiwiZmlsdGVyIiwiY29ubiIsImNyZWF0ZWQiLCJnZXRDb25uZWN0aW9uU3RhdHMiLCJ0b0lTT1N0cmluZyIsInV0aWxpemF0aW9uUGVyY2VudCIsInJvdW5kIiwic3RhdHVzIiwic2h1dGRvd25Db25uZWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/supabase-client.js\n");

/***/ }),

/***/ "(api)/./lib/utils/environment-validation.js":
/*!*********************************************!*\
  !*** ./lib/utils/environment-validation.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   getSecurityStatus: () => (/* binding */ getSecurityStatus),\n/* harmony export */   getSupabaseConfig: () => (/* binding */ getSupabaseConfig),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   safeLog: () => (/* binding */ safeLog),\n/* harmony export */   validateAPIKeysSecurity: () => (/* binding */ validateAPIKeysSecurity),\n/* harmony export */   validateEnvironment: () => (/* binding */ validateEnvironment),\n/* harmony export */   validateSecretSecurity: () => (/* binding */ validateSecretSecurity)\n/* harmony export */ });\n/**\n * Environment Variable Validation and Configuration\n * Centralized validation for production readiness\n */ // Required environment variables for production\n// Split by client/server because client can't see server-only vars\nconst CLIENT_REQUIRED_ENV_VARS = [\n    \"NEXT_PUBLIC_SUPABASE_URL\",\n    \"NEXT_PUBLIC_SUPABASE_ANON_KEY\"\n];\nconst SERVER_REQUIRED_ENV_VARS = [\n    \"NEXT_PUBLIC_SUPABASE_URL\",\n    \"NEXT_PUBLIC_SUPABASE_ANON_KEY\",\n    \"SUPABASE_SERVICE_ROLE_KEY\",\n    \"JWT_SECRET\",\n    \"NEXTAUTH_SECRET\"\n];\nconst SERVER_RECOMMENDED_ENV_VARS = [\n    \"ANTHROPIC_API_KEY\",\n    \"COMTRADE_API_KEY\",\n    \"SHIPPO_API_KEY\",\n    \"STRIPE_SECRET_KEY\"\n];\n// Optional environment variables with defaults\nconst OPTIONAL_ENV_VARS = {\n    NODE_ENV: \"development\",\n    NEXT_PUBLIC_APP_URL: \"http://localhost:3000\"\n};\n/**\n * Validate all required environment variables are present\n * @throws {Error} If any required variable is missing\n */ function validateEnvironment() {\n    // Skip validation entirely on client-side to avoid errors\n    if (false) {}\n    // Server-side validation\n    const missing = SERVER_REQUIRED_ENV_VARS.filter((key)=>!process.env[key]);\n    if (missing.length > 0) {\n        throw new Error(`Missing required server-side environment variables: ${missing.join(\", \")}`);\n    }\n    // Note: Using console.log here as this runs before logger is initialized\n    console.log(\"✅ All required environment variables are present\");\n}\n/**\n * Get environment variable with validation\n * @param {string} key - Environment variable key\n * @param {boolean} required - Whether the variable is required\n * @returns {string} Environment variable value\n */ function getEnvVar(key, required = true) {\n    const value = process.env[key];\n    if (required && !value) {\n        throw new Error(`Missing required environment variable: ${key}`);\n    }\n    return value || OPTIONAL_ENV_VARS[key];\n}\n/**\n * Check if running in production\n */ function isProduction() {\n    return \"development\" === \"production\";\n}\n/**\n * Check if running in development\n */ function isDevelopment() {\n    return \"development\" === \"development\";\n}\n/**\n * Safe logging that respects environment\n * Only logs in development unless force is true\n */ function safeLog(message, data = null, force = false) {\n    if (isDevelopment() || force) {\n        if (data) {\n            // Note: Using console.log here as this is used for bootstrap logging\n            console.log(message, data);\n        } else {\n            console.log(message);\n        }\n    }\n}\n/**\n * Get Supabase configuration based on environment\n */ function getSupabaseConfig() {\n    const url = getEnvVar(\"NEXT_PUBLIC_SUPABASE_URL\");\n    // Use service role key on server, anon key on client\n    const key =  false ? 0 : getEnvVar(\"SUPABASE_SERVICE_ROLE_KEY\", false) || getEnvVar(\"NEXT_PUBLIC_SUPABASE_ANON_KEY\");\n    return {\n        url,\n        key\n    };\n}\n/**\n * Validate API keys are not exposed and check for security issues\n */ function validateAPIKeysSecurity() {\n    const sensitiveKeys = [\n        \"SUPABASE_SERVICE_ROLE_KEY\",\n        \"ANTHROPIC_API_KEY\",\n        \"STRIPE_SECRET_KEY\",\n        \"COMTRADE_API_KEY\",\n        \"SHIPPO_API_KEY\",\n        \"JWT_SECRET\",\n        \"NEXTAUTH_SECRET\",\n        \"ENTERPRISE_MASTER_KEY\"\n    ];\n    if (false) {}\n}\n/**\n * Check for dangerous default/template values\n */ function validateSecretSecurity() {\n    const dangerousPatterns = [\n        {\n            key: \"JWT_SECRET\",\n            patterns: [\n                \"your-super-secure\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"NEXTAUTH_SECRET\",\n            patterns: [\n                \"your-nextauth-secret\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"ENTERPRISE_MASTER_KEY\",\n            patterns: [\n                \"triangle-intelligence-enterprise\",\n                \"generate-new\",\n                \"REPLACE_WITH\"\n            ]\n        },\n        {\n            key: \"ANTHROPIC_API_KEY\",\n            patterns: [\n                \"your-key-here\",\n                \"REPLACE_WITH\"\n            ]\n        }\n    ];\n    const warnings = [];\n    dangerousPatterns.forEach(({ key, patterns })=>{\n        if (process.env[key]) {\n            patterns.forEach((pattern)=>{\n                if (process.env[key].includes(pattern)) {\n                    warnings.push(`${key} appears to use default/template value`);\n                }\n            });\n        }\n    });\n    // Check secret strength\n    if (process.env.JWT_SECRET && process.env.JWT_SECRET.length < 32) {\n        warnings.push(\"JWT_SECRET is too short (minimum 32 characters)\");\n    }\n    return warnings;\n}\n/**\n * Get comprehensive security status\n */ function getSecurityStatus() {\n    const warnings = validateSecretSecurity();\n    const requiredMissing = SERVER_REQUIRED_ENV_VARS.filter((key)=>!process.env[key]);\n    const recommendedMissing = SERVER_RECOMMENDED_ENV_VARS.filter((key)=>!process.env[key]);\n    return {\n        status: requiredMissing.length === 0 && warnings.length === 0 ? \"secure\" : \"needs_attention\",\n        requiredMissing,\n        recommendedMissing,\n        securityWarnings: warnings,\n        lastChecked: new Date().toISOString()\n    };\n}\n// Auto-validate on import in development (SERVER-SIDE ONLY)\nif (isDevelopment() && \"undefined\" === \"undefined\") {\n    try {\n        validateEnvironment();\n        validateAPIKeysSecurity();\n    } catch (error) {\n        // Note: Using console.error here as this is critical bootstrap error\n        console.error(\"❌ Environment validation failed:\", error.message);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMvZW52aXJvbm1lbnQtdmFsaWRhdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFRCxnREFBZ0Q7QUFDaEQsbUVBQW1FO0FBQ25FLE1BQU1BLDJCQUEyQjtJQUMvQjtJQUNBO0NBQ0Q7QUFFRCxNQUFNQywyQkFBMkI7SUFDL0I7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNEO0FBRUQsTUFBTUMsOEJBQThCO0lBQ2xDO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFRCwrQ0FBK0M7QUFDL0MsTUFBTUMsb0JBQW9CO0lBQ3hCQyxVQUFVO0lBQ1ZDLHFCQUFxQjtBQUN2QjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNDO0lBQ2QsMERBQTBEO0lBQzFELElBQUksS0FBa0IsRUFBYSxFQUdsQztJQUVELHlCQUF5QjtJQUN6QixNQUFNRyxVQUFVUix5QkFBeUJTLE1BQU0sQ0FBQ0MsQ0FBQUEsTUFBTyxDQUFDQyxRQUFRQyxHQUFHLENBQUNGLElBQUk7SUFFeEUsSUFBSUYsUUFBUUssTUFBTSxHQUFHLEdBQUc7UUFDdEIsTUFBTSxJQUFJQyxNQUFNLENBQUMsb0RBQW9ELEVBQUVOLFFBQVFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDN0Y7SUFFQSx5RUFBeUU7SUFDekVULFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRUE7Ozs7O0NBS0MsR0FDTSxTQUFTUyxVQUFVTixHQUFHLEVBQUVPLFdBQVcsSUFBSTtJQUM1QyxNQUFNQyxRQUFRUCxRQUFRQyxHQUFHLENBQUNGLElBQUk7SUFFOUIsSUFBSU8sWUFBWSxDQUFDQyxPQUFPO1FBQ3RCLE1BQU0sSUFBSUosTUFBTSxDQUFDLHVDQUF1QyxFQUFFSixJQUFJLENBQUM7SUFDakU7SUFFQSxPQUFPUSxTQUFTaEIsaUJBQWlCLENBQUNRLElBQUk7QUFDeEM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNTO0lBQ2QsT0FBT1Isa0JBQXlCO0FBQ2xDO0FBRUE7O0NBRUMsR0FDTSxTQUFTUztJQUNkLE9BQU9ULGtCQUF5QjtBQUNsQztBQUVBOzs7Q0FHQyxHQUNNLFNBQVNVLFFBQVFDLE9BQU8sRUFBRUMsT0FBTyxJQUFJLEVBQUVDLFFBQVEsS0FBSztJQUN6RCxJQUFJSixtQkFBbUJJLE9BQU87UUFDNUIsSUFBSUQsTUFBTTtZQUNSLHFFQUFxRTtZQUNyRWpCLFFBQVFDLEdBQUcsQ0FBQ2UsU0FBU0M7UUFDdkIsT0FBTztZQUNMakIsUUFBUUMsR0FBRyxDQUFDZTtRQUNkO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0c7SUFDZCxNQUFNQyxNQUFNVixVQUFVO0lBRXRCLHFEQUFxRDtJQUNyRCxNQUFNTixNQUFNLE1BQWtCLEdBQzFCTSxDQUFVLEdBQ1ZBLFVBQVUsNkJBQTZCLFVBQVVBLFVBQVU7SUFFL0QsT0FBTztRQUFFVTtRQUFLaEI7SUFBSTtBQUNwQjtBQUVBOztDQUVDLEdBQ00sU0FBU2lCO0lBQ2QsTUFBTUMsZ0JBQWdCO1FBQ3BCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUVELElBQUksS0FBa0IsRUFBYSxFQU9sQztBQUNIO0FBRUE7O0NBRUMsR0FDTSxTQUFTRztJQUNkLE1BQU1DLG9CQUFvQjtRQUN4QjtZQUFFdEIsS0FBSztZQUFjdUIsVUFBVTtnQkFBQztnQkFBcUI7Z0JBQWdCO2FBQWU7UUFBQztRQUNyRjtZQUFFdkIsS0FBSztZQUFtQnVCLFVBQVU7Z0JBQUM7Z0JBQXdCO2dCQUFnQjthQUFlO1FBQUM7UUFDN0Y7WUFBRXZCLEtBQUs7WUFBeUJ1QixVQUFVO2dCQUFDO2dCQUFvQztnQkFBZ0I7YUFBZTtRQUFDO1FBQy9HO1lBQUV2QixLQUFLO1lBQXFCdUIsVUFBVTtnQkFBQztnQkFBaUI7YUFBZTtRQUFDO0tBQ3pFO0lBRUQsTUFBTUMsV0FBVyxFQUFFO0lBRW5CRixrQkFBa0JHLE9BQU8sQ0FBQyxDQUFDLEVBQUV6QixHQUFHLEVBQUV1QixRQUFRLEVBQUU7UUFDMUMsSUFBSXRCLFFBQVFDLEdBQUcsQ0FBQ0YsSUFBSSxFQUFFO1lBQ3BCdUIsU0FBU0UsT0FBTyxDQUFDQyxDQUFBQTtnQkFDZixJQUFJekIsUUFBUUMsR0FBRyxDQUFDRixJQUFJLENBQUMyQixRQUFRLENBQUNELFVBQVU7b0JBQ3RDRixTQUFTSSxJQUFJLENBQUMsQ0FBQyxFQUFFNUIsSUFBSSxzQ0FBc0MsQ0FBQztnQkFDOUQ7WUFDRjtRQUNGO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEIsSUFBSUMsUUFBUUMsR0FBRyxDQUFDMkIsVUFBVSxJQUFJNUIsUUFBUUMsR0FBRyxDQUFDMkIsVUFBVSxDQUFDMUIsTUFBTSxHQUFHLElBQUk7UUFDaEVxQixTQUFTSSxJQUFJLENBQUM7SUFDaEI7SUFFQSxPQUFPSjtBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTTTtJQUNkLE1BQU1OLFdBQVdIO0lBQ2pCLE1BQU1VLGtCQUFrQnpDLHlCQUF5QlMsTUFBTSxDQUFDQyxDQUFBQSxNQUFPLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0YsSUFBSTtJQUNoRixNQUFNZ0MscUJBQXFCekMsNEJBQTRCUSxNQUFNLENBQUNDLENBQUFBLE1BQU8sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDRixJQUFJO0lBRXRGLE9BQU87UUFDTGlDLFFBQVFGLGdCQUFnQjVCLE1BQU0sS0FBSyxLQUFLcUIsU0FBU3JCLE1BQU0sS0FBSyxJQUFJLFdBQVc7UUFDM0U0QjtRQUNBQztRQUNBRSxrQkFBa0JWO1FBQ2xCVyxhQUFhLElBQUlDLE9BQU9DLFdBQVc7SUFDckM7QUFDRjtBQUVBLDREQUE0RDtBQUM1RCxJQUFJM0IsbUJBQW1CLGdCQUFrQixhQUFhO0lBQ3BELElBQUk7UUFDRmY7UUFDQXNCO0lBQ0YsRUFBRSxPQUFPcUIsT0FBTztRQUNkLHFFQUFxRTtRQUNyRTFDLFFBQVEwQyxLQUFLLENBQUMsb0NBQW9DQSxNQUFNMUIsT0FBTztJQUNqRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vbGliL3V0aWxzL2Vudmlyb25tZW50LXZhbGlkYXRpb24uanM/NzE3YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudmlyb25tZW50IFZhcmlhYmxlIFZhbGlkYXRpb24gYW5kIENvbmZpZ3VyYXRpb25cbiAqIENlbnRyYWxpemVkIHZhbGlkYXRpb24gZm9yIHByb2R1Y3Rpb24gcmVhZGluZXNzXG4gKi9cblxuLy8gUmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBwcm9kdWN0aW9uXG4vLyBTcGxpdCBieSBjbGllbnQvc2VydmVyIGJlY2F1c2UgY2xpZW50IGNhbid0IHNlZSBzZXJ2ZXItb25seSB2YXJzXG5jb25zdCBDTElFTlRfUkVRVUlSRURfRU5WX1ZBUlMgPSBbXG4gICdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwnLFxuICAnTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknXG5dXG5cbmNvbnN0IFNFUlZFUl9SRVFVSVJFRF9FTlZfVkFSUyA9IFtcbiAgJ05FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCcsXG4gICdORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWScsIFxuICAnU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWScsXG4gICdKV1RfU0VDUkVUJyxcbiAgJ05FWFRBVVRIX1NFQ1JFVCdcbl1cblxuY29uc3QgU0VSVkVSX1JFQ09NTUVOREVEX0VOVl9WQVJTID0gW1xuICAnQU5USFJPUElDX0FQSV9LRVknLFxuICAnQ09NVFJBREVfQVBJX0tFWScsIFxuICAnU0hJUFBPX0FQSV9LRVknLFxuICAnU1RSSVBFX1NFQ1JFVF9LRVknXG5dXG5cbi8vIE9wdGlvbmFsIGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGRlZmF1bHRzXG5jb25zdCBPUFRJT05BTF9FTlZfVkFSUyA9IHtcbiAgTk9ERV9FTlY6ICdkZXZlbG9wbWVudCcsXG4gIE5FWFRfUFVCTElDX0FQUF9VUkw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG59XG5cbi8qKlxuICogVmFsaWRhdGUgYWxsIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcHJlc2VudFxuICogQHRocm93cyB7RXJyb3J9IElmIGFueSByZXF1aXJlZCB2YXJpYWJsZSBpcyBtaXNzaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUVudmlyb25tZW50KCkge1xuICAvLyBTa2lwIHZhbGlkYXRpb24gZW50aXJlbHkgb24gY2xpZW50LXNpZGUgdG8gYXZvaWQgZXJyb3JzXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUubG9nKCfinIUgRW52aXJvbm1lbnQgdmFsaWRhdGlvbiBza2lwcGVkIG9uIGNsaWVudC1zaWRlJylcbiAgICByZXR1cm5cbiAgfVxuICBcbiAgLy8gU2VydmVyLXNpZGUgdmFsaWRhdGlvblxuICBjb25zdCBtaXNzaW5nID0gU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTLmZpbHRlcihrZXkgPT4gIXByb2Nlc3MuZW52W2tleV0pXG4gIFxuICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIHNlcnZlci1zaWRlIGVudmlyb25tZW50IHZhcmlhYmxlczogJHttaXNzaW5nLmpvaW4oJywgJyl9YClcbiAgfVxuICBcbiAgLy8gTm90ZTogVXNpbmcgY29uc29sZS5sb2cgaGVyZSBhcyB0aGlzIHJ1bnMgYmVmb3JlIGxvZ2dlciBpcyBpbml0aWFsaXplZFxuICBjb25zb2xlLmxvZygn4pyFIEFsbCByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHByZXNlbnQnKVxufVxuXG4vKipcbiAqIEdldCBlbnZpcm9ubWVudCB2YXJpYWJsZSB3aXRoIHZhbGlkYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBFbnZpcm9ubWVudCB2YXJpYWJsZSBrZXlcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZWQgLSBXaGV0aGVyIHRoZSB2YXJpYWJsZSBpcyByZXF1aXJlZFxuICogQHJldHVybnMge3N0cmluZ30gRW52aXJvbm1lbnQgdmFyaWFibGUgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVudlZhcihrZXksIHJlcXVpcmVkID0gdHJ1ZSkge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleV1cbiAgXG4gIGlmIChyZXF1aXJlZCAmJiAhdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGU6ICR7a2V5fWApXG4gIH1cbiAgXG4gIHJldHVybiB2YWx1ZSB8fCBPUFRJT05BTF9FTlZfVkFSU1trZXldXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcnVubmluZyBpbiBwcm9kdWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb2R1Y3Rpb24oKSB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgcnVubmluZyBpbiBkZXZlbG9wbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEZXZlbG9wbWVudCgpIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnXG59XG5cbi8qKlxuICogU2FmZSBsb2dnaW5nIHRoYXQgcmVzcGVjdHMgZW52aXJvbm1lbnRcbiAqIE9ubHkgbG9ncyBpbiBkZXZlbG9wbWVudCB1bmxlc3MgZm9yY2UgaXMgdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZUxvZyhtZXNzYWdlLCBkYXRhID0gbnVsbCwgZm9yY2UgPSBmYWxzZSkge1xuICBpZiAoaXNEZXZlbG9wbWVudCgpIHx8IGZvcmNlKSB7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIC8vIE5vdGU6IFVzaW5nIGNvbnNvbGUubG9nIGhlcmUgYXMgdGhpcyBpcyB1c2VkIGZvciBib290c3RyYXAgbG9nZ2luZ1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgU3VwYWJhc2UgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3VwYWJhc2VDb25maWcoKSB7XG4gIGNvbnN0IHVybCA9IGdldEVudlZhcignTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJylcbiAgXG4gIC8vIFVzZSBzZXJ2aWNlIHJvbGUga2V5IG9uIHNlcnZlciwgYW5vbiBrZXkgb24gY2xpZW50XG4gIGNvbnN0IGtleSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyBnZXRFbnZWYXIoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgICA6IGdldEVudlZhcignU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWScsIGZhbHNlKSB8fCBnZXRFbnZWYXIoJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgXG4gIHJldHVybiB7IHVybCwga2V5IH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBBUEkga2V5cyBhcmUgbm90IGV4cG9zZWQgYW5kIGNoZWNrIGZvciBzZWN1cml0eSBpc3N1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQVBJS2V5c1NlY3VyaXR5KCkge1xuICBjb25zdCBzZW5zaXRpdmVLZXlzID0gW1xuICAgICdTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJyxcbiAgICAnQU5USFJPUElDX0FQSV9LRVknLFxuICAgICdTVFJJUEVfU0VDUkVUX0tFWScsXG4gICAgJ0NPTVRSQURFX0FQSV9LRVknLFxuICAgICdTSElQUE9fQVBJX0tFWScsXG4gICAgJ0pXVF9TRUNSRVQnLFxuICAgICdORVhUQVVUSF9TRUNSRVQnLFxuICAgICdFTlRFUlBSSVNFX01BU1RFUl9LRVknXG4gIF1cbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIENoZWNrIGlmIGFueSBzZW5zaXRpdmUga2V5cyBhcmUgYWNjZXNzaWJsZSBvbiBjbGllbnRcbiAgICBjb25zdCBleHBvc2VkS2V5cyA9IHNlbnNpdGl2ZUtleXMuZmlsdGVyKGtleSA9PiB3aW5kb3cucHJvY2Vzcz8uZW52Py5ba2V5XSlcbiAgICBcbiAgICBpZiAoZXhwb3NlZEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTRUNVUklUWSBWSU9MQVRJT046IFNlbnNpdGl2ZSBrZXlzIGV4cG9zZWQgdG8gY2xpZW50OiAke2V4cG9zZWRLZXlzLmpvaW4oJywgJyl9YClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZGFuZ2Vyb3VzIGRlZmF1bHQvdGVtcGxhdGUgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNlY3JldFNlY3VyaXR5KCkge1xuICBjb25zdCBkYW5nZXJvdXNQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ0pXVF9TRUNSRVQnLCBwYXR0ZXJuczogWyd5b3VyLXN1cGVyLXNlY3VyZScsICdnZW5lcmF0ZS1uZXcnLCAnUkVQTEFDRV9XSVRIJ10gfSxcbiAgICB7IGtleTogJ05FWFRBVVRIX1NFQ1JFVCcsIHBhdHRlcm5zOiBbJ3lvdXItbmV4dGF1dGgtc2VjcmV0JywgJ2dlbmVyYXRlLW5ldycsICdSRVBMQUNFX1dJVEgnXSB9LFxuICAgIHsga2V5OiAnRU5URVJQUklTRV9NQVNURVJfS0VZJywgcGF0dGVybnM6IFsndHJpYW5nbGUtaW50ZWxsaWdlbmNlLWVudGVycHJpc2UnLCAnZ2VuZXJhdGUtbmV3JywgJ1JFUExBQ0VfV0lUSCddIH0sXG4gICAgeyBrZXk6ICdBTlRIUk9QSUNfQVBJX0tFWScsIHBhdHRlcm5zOiBbJ3lvdXIta2V5LWhlcmUnLCAnUkVQTEFDRV9XSVRIJ10gfVxuICBdXG5cbiAgY29uc3Qgd2FybmluZ3MgPSBbXVxuICBcbiAgZGFuZ2Vyb3VzUGF0dGVybnMuZm9yRWFjaCgoeyBrZXksIHBhdHRlcm5zIH0pID0+IHtcbiAgICBpZiAocHJvY2Vzcy5lbnZba2V5XSkge1xuICAgICAgcGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52W2tleV0uaW5jbHVkZXMocGF0dGVybikpIHtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKGAke2tleX0gYXBwZWFycyB0byB1c2UgZGVmYXVsdC90ZW1wbGF0ZSB2YWx1ZWApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxuXG4gIC8vIENoZWNrIHNlY3JldCBzdHJlbmd0aFxuICBpZiAocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCAmJiBwcm9jZXNzLmVudi5KV1RfU0VDUkVULmxlbmd0aCA8IDMyKSB7XG4gICAgd2FybmluZ3MucHVzaCgnSldUX1NFQ1JFVCBpcyB0b28gc2hvcnQgKG1pbmltdW0gMzIgY2hhcmFjdGVycyknKVxuICB9XG5cbiAgcmV0dXJuIHdhcm5pbmdzXG59XG5cbi8qKlxuICogR2V0IGNvbXByZWhlbnNpdmUgc2VjdXJpdHkgc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWN1cml0eVN0YXR1cygpIHtcbiAgY29uc3Qgd2FybmluZ3MgPSB2YWxpZGF0ZVNlY3JldFNlY3VyaXR5KClcbiAgY29uc3QgcmVxdWlyZWRNaXNzaW5nID0gU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTLmZpbHRlcihrZXkgPT4gIXByb2Nlc3MuZW52W2tleV0pXG4gIGNvbnN0IHJlY29tbWVuZGVkTWlzc2luZyA9IFNFUlZFUl9SRUNPTU1FTkRFRF9FTlZfVkFSUy5maWx0ZXIoa2V5ID0+ICFwcm9jZXNzLmVudltrZXldKVxuICBcbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6IHJlcXVpcmVkTWlzc2luZy5sZW5ndGggPT09IDAgJiYgd2FybmluZ3MubGVuZ3RoID09PSAwID8gJ3NlY3VyZScgOiAnbmVlZHNfYXR0ZW50aW9uJyxcbiAgICByZXF1aXJlZE1pc3NpbmcsXG4gICAgcmVjb21tZW5kZWRNaXNzaW5nLFxuICAgIHNlY3VyaXR5V2FybmluZ3M6IHdhcm5pbmdzLFxuICAgIGxhc3RDaGVja2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfVxufVxuXG4vLyBBdXRvLXZhbGlkYXRlIG9uIGltcG9ydCBpbiBkZXZlbG9wbWVudCAoU0VSVkVSLVNJREUgT05MWSlcbmlmIChpc0RldmVsb3BtZW50KCkgJiYgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZUVudmlyb25tZW50KClcbiAgICB2YWxpZGF0ZUFQSUtleXNTZWN1cml0eSgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTm90ZTogVXNpbmcgY29uc29sZS5lcnJvciBoZXJlIGFzIHRoaXMgaXMgY3JpdGljYWwgYm9vdHN0cmFwIGVycm9yXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVudmlyb25tZW50IHZhbGlkYXRpb24gZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpXG4gIH1cbn0iXSwibmFtZXMiOlsiQ0xJRU5UX1JFUVVJUkVEX0VOVl9WQVJTIiwiU0VSVkVSX1JFUVVJUkVEX0VOVl9WQVJTIiwiU0VSVkVSX1JFQ09NTUVOREVEX0VOVl9WQVJTIiwiT1BUSU9OQUxfRU5WX1ZBUlMiLCJOT0RFX0VOViIsIk5FWFRfUFVCTElDX0FQUF9VUkwiLCJ2YWxpZGF0ZUVudmlyb25tZW50IiwiY29uc29sZSIsImxvZyIsIm1pc3NpbmciLCJmaWx0ZXIiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwibGVuZ3RoIiwiRXJyb3IiLCJqb2luIiwiZ2V0RW52VmFyIiwicmVxdWlyZWQiLCJ2YWx1ZSIsImlzUHJvZHVjdGlvbiIsImlzRGV2ZWxvcG1lbnQiLCJzYWZlTG9nIiwibWVzc2FnZSIsImRhdGEiLCJmb3JjZSIsImdldFN1cGFiYXNlQ29uZmlnIiwidXJsIiwidmFsaWRhdGVBUElLZXlzU2VjdXJpdHkiLCJzZW5zaXRpdmVLZXlzIiwiZXhwb3NlZEtleXMiLCJ3aW5kb3ciLCJ2YWxpZGF0ZVNlY3JldFNlY3VyaXR5IiwiZGFuZ2Vyb3VzUGF0dGVybnMiLCJwYXR0ZXJucyIsIndhcm5pbmdzIiwiZm9yRWFjaCIsInBhdHRlcm4iLCJpbmNsdWRlcyIsInB1c2giLCJKV1RfU0VDUkVUIiwiZ2V0U2VjdXJpdHlTdGF0dXMiLCJyZXF1aXJlZE1pc3NpbmciLCJyZWNvbW1lbmRlZE1pc3NpbmciLCJzdGF0dXMiLCJzZWN1cml0eVdhcm5pbmdzIiwibGFzdENoZWNrZWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils/environment-validation.js\n");

/***/ }),

/***/ "(api)/./lib/utils/memory-cache-fallback.js":
/*!********************************************!*\
  !*** ./lib/utils/memory-cache-fallback.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   memoryCacheFallback: () => (/* binding */ memoryCacheFallback),\n/* harmony export */   universalCache: () => (/* binding */ universalCache)\n/* harmony export */ });\n/* harmony import */ var _production_logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./production-logger.js */ \"(api)/./lib/utils/production-logger.js\");\n/**\n * Memory Cache Fallback System for Triangle Intelligence Platform\n * Provides high-performance caching when Redis is not available\n * Critical for production readiness and performance optimization\n */ \nclass MemoryCacheFallback {\n    constructor(){\n        this.cache = new Map();\n        this.keyTTL = new Map() // Track TTL for each key\n        ;\n        this.stats = {\n            hits: 0,\n            misses: 0,\n            sets: 0,\n            evictions: 0,\n            totalRequests: 0\n        };\n        this.maxSize = 10000 // Maximum cache entries\n        ;\n        this.defaultTTL = 3600000 // 1 hour in milliseconds\n        ;\n        // Start cleanup interval\n        this.startCleanupInterval();\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory cache fallback initialized\", {\n            maxSize: this.maxSize,\n            defaultTTL: this.defaultTTL / 1000 + \"s\",\n            status: \"READY\"\n        });\n    }\n    /**\n   * Get value from cache\n   */ async get(key) {\n        this.stats.totalRequests++;\n        const startTime = Date.now();\n        if (!this.cache.has(key)) {\n            this.stats.misses++;\n            return null;\n        }\n        // Check if expired\n        const ttl = this.keyTTL.get(key);\n        if (ttl && Date.now() > ttl) {\n            this.cache.delete(key);\n            this.keyTTL.delete(key);\n            this.stats.misses++;\n            return null;\n        }\n        this.stats.hits++;\n        const value = this.cache.get(key);\n        const duration = Date.now() - startTime;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logPerformance)(\"memory_cache_get\", duration, {\n            key: key.substring(0, 50) + \"...\",\n            hit: true,\n            hitRate: (this.stats.hits / this.stats.totalRequests * 100).toFixed(1) + \"%\"\n        });\n        return value;\n    }\n    /**\n   * Set value in cache with optional TTL\n   */ async set(key, value, ttlSeconds = null) {\n        const startTime = Date.now();\n        // Evict oldest entries if cache is full\n        if (this.cache.size >= this.maxSize) {\n            this.evictOldest();\n        }\n        const ttl = ttlSeconds ? Date.now() + ttlSeconds * 1000 : Date.now() + this.defaultTTL;\n        this.cache.set(key, value);\n        this.keyTTL.set(key, ttl);\n        this.stats.sets++;\n        const duration = Date.now() - startTime;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logPerformance)(\"memory_cache_set\", duration, {\n            key: key.substring(0, 50) + \"...\",\n            ttl: ttlSeconds || this.defaultTTL / 1000 + \"s\",\n            cacheSize: this.cache.size\n        });\n    }\n    /**\n   * Delete key from cache\n   */ async del(key) {\n        const deleted = this.cache.delete(key);\n        this.keyTTL.delete(key);\n        return deleted ? 1 : 0;\n    }\n    /**\n   * Check if key exists (and is not expired)\n   */ async exists(key) {\n        if (!this.cache.has(key)) return false;\n        const ttl = this.keyTTL.get(key);\n        if (ttl && Date.now() > ttl) {\n            this.cache.delete(key);\n            this.keyTTL.delete(key);\n            return false;\n        }\n        return true;\n    }\n    /**\n   * Get cache statistics\n   */ getStats() {\n        return {\n            ...this.stats,\n            cacheSize: this.cache.size,\n            maxSize: this.maxSize,\n            hitRate: this.stats.totalRequests > 0 ? (this.stats.hits / this.stats.totalRequests * 100).toFixed(2) + \"%\" : \"0%\",\n            memoryUsage: process.memoryUsage()\n        };\n    }\n    /**\n   * Evict oldest entries when cache is full\n   */ evictOldest() {\n        const oldestKeys = Array.from(this.cache.keys()).slice(0, Math.floor(this.maxSize * 0.1));\n        for (const key of oldestKeys){\n            this.cache.delete(key);\n            this.keyTTL.delete(key);\n            this.stats.evictions++;\n        }\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory cache eviction completed\", {\n            evictedKeys: oldestKeys.length,\n            remainingSize: this.cache.size\n        });\n    }\n    /**\n   * Clean up expired entries periodically\n   */ startCleanupInterval() {\n        setInterval(()=>{\n            const now = Date.now();\n            let expiredCount = 0;\n            for (const [key, ttl] of this.keyTTL.entries()){\n                if (ttl < now) {\n                    this.cache.delete(key);\n                    this.keyTTL.delete(key);\n                    expiredCount++;\n                }\n            }\n            if (expiredCount > 0) {\n                (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory cache cleanup completed\", {\n                    expiredKeys: expiredCount,\n                    cacheSize: this.cache.size\n                });\n            }\n        }, 60000) // Every minute\n        ;\n    }\n    /**\n   * Clear all cache\n   */ async flushall() {\n        this.cache.clear();\n        this.keyTTL.clear();\n        this.stats.evictions += this.cache.size;\n        (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"Memory cache flushed completely\");\n    }\n    /**\n   * Get multiple keys at once\n   */ async mget(keys) {\n        const results = [];\n        for (const key of keys){\n            results.push(await this.get(key));\n        }\n        return results;\n    }\n    /**\n   * Set multiple key-value pairs\n   */ async mset(keyValuePairs) {\n        for(let i = 0; i < keyValuePairs.length; i += 2){\n            await this.set(keyValuePairs[i], keyValuePairs[i + 1]);\n        }\n    }\n    /**\n   * Increment a numeric value\n   */ async incr(key) {\n        const current = await this.get(key) || 0;\n        const newValue = parseInt(current) + 1;\n        await this.set(key, newValue);\n        return newValue;\n    }\n    /**\n   * Set expiry for existing key\n   */ async expire(key, ttlSeconds) {\n        if (this.cache.has(key)) {\n            this.keyTTL.set(key, Date.now() + ttlSeconds * 1000);\n            return true;\n        }\n        return false;\n    }\n}\n// Singleton instance\nconst memoryCacheFallback = new MemoryCacheFallback();\n/**\n * Universal cache interface that works with both Redis and memory fallback\n */ class UniversalCache {\n    constructor(){\n        this.redis = null;\n        this.usingFallback = true;\n        this.initializeRedis();\n    }\n    async initializeRedis() {\n        try {\n            const { getRedisClient } = await __webpack_require__.e(/*! import() */ \"_api_lib_redis-client_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../redis-client.js */ \"(api)/./lib/redis-client.js\"));\n            this.redis = await getRedisClient();\n            this.usingFallback = false;\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logInfo)(\"UniversalCache: Redis connected successfully\");\n        } catch (error) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"UniversalCache: Redis unavailable, using memory fallback\", {\n                error: error.message\n            });\n            this.usingFallback = true;\n        }\n    }\n    async get(key) {\n        if (this.usingFallback || !this.redis) {\n            return await memoryCacheFallback.get(key);\n        }\n        try {\n            const result = await this.redis.get(key);\n            return result ? JSON.parse(result) : null;\n        } catch (error) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"Redis get failed, falling back to memory\", {\n                key,\n                error: error.message\n            });\n            return await memoryCacheFallback.get(key);\n        }\n    }\n    async set(key, value, ttlSeconds = 3600) {\n        if (this.usingFallback || !this.redis) {\n            return await memoryCacheFallback.set(key, value, ttlSeconds);\n        }\n        try {\n            await this.redis.setex(key, ttlSeconds, JSON.stringify(value));\n        } catch (error) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"Redis set failed, falling back to memory\", {\n                key,\n                error: error.message\n            });\n            await memoryCacheFallback.set(key, value, ttlSeconds);\n        }\n    }\n    async del(key) {\n        if (this.usingFallback || !this.redis) {\n            return await memoryCacheFallback.del(key);\n        }\n        try {\n            return await this.redis.del(key);\n        } catch (error) {\n            (0,_production_logger_js__WEBPACK_IMPORTED_MODULE_0__.logWarn)(\"Redis del failed, falling back to memory\", {\n                key,\n                error: error.message\n            });\n            return await memoryCacheFallback.del(key);\n        }\n    }\n    getStats() {\n        return {\n            usingFallback: this.usingFallback,\n            redisConnected: !this.usingFallback && !!this.redis,\n            fallbackStats: memoryCacheFallback.getStats()\n        };\n    }\n}\n// Export singleton instance\nconst universalCache = new UniversalCache();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (universalCache);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMvbWVtb3J5LWNhY2hlLWZhbGxiYWNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztDQUlDLEdBRWtGO0FBRW5GLE1BQU1JO0lBQ0pDLGFBQWM7UUFDWixJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJQztRQUNqQixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJRCxNQUFNLHlCQUF5Qjs7UUFDakQsSUFBSSxDQUFDRSxLQUFLLEdBQUc7WUFDWEMsTUFBTTtZQUNOQyxRQUFRO1lBQ1JDLE1BQU07WUFDTkMsV0FBVztZQUNYQyxlQUFlO1FBQ2pCO1FBQ0EsSUFBSSxDQUFDQyxPQUFPLEdBQUcsTUFBTSx3QkFBd0I7O1FBQzdDLElBQUksQ0FBQ0MsVUFBVSxHQUFHLFFBQVEseUJBQXlCOztRQUVuRCx5QkFBeUI7UUFDekIsSUFBSSxDQUFDQyxvQkFBb0I7UUFFekJqQiw4REFBT0EsQ0FBQyxxQ0FBcUM7WUFDM0NlLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCQyxZQUFZLElBQUksQ0FBQ0EsVUFBVSxHQUFHLE9BQU87WUFDckNFLFFBQVE7UUFDVjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFNQyxJQUFJQyxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUNYLEtBQUssQ0FBQ0ssYUFBYTtRQUN4QixNQUFNTyxZQUFZQyxLQUFLQyxHQUFHO1FBRTFCLElBQUksQ0FBQyxJQUFJLENBQUNqQixLQUFLLENBQUNrQixHQUFHLENBQUNKLE1BQU07WUFDeEIsSUFBSSxDQUFDWCxLQUFLLENBQUNFLE1BQU07WUFDakIsT0FBTztRQUNUO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU1jLE1BQU0sSUFBSSxDQUFDakIsTUFBTSxDQUFDVyxHQUFHLENBQUNDO1FBQzVCLElBQUlLLE9BQU9ILEtBQUtDLEdBQUcsS0FBS0UsS0FBSztZQUMzQixJQUFJLENBQUNuQixLQUFLLENBQUNvQixNQUFNLENBQUNOO1lBQ2xCLElBQUksQ0FBQ1osTUFBTSxDQUFDa0IsTUFBTSxDQUFDTjtZQUNuQixJQUFJLENBQUNYLEtBQUssQ0FBQ0UsTUFBTTtZQUNqQixPQUFPO1FBQ1Q7UUFFQSxJQUFJLENBQUNGLEtBQUssQ0FBQ0MsSUFBSTtRQUNmLE1BQU1pQixRQUFRLElBQUksQ0FBQ3JCLEtBQUssQ0FBQ2EsR0FBRyxDQUFDQztRQUM3QixNQUFNUSxXQUFXTixLQUFLQyxHQUFHLEtBQUtGO1FBRTlCbEIscUVBQWNBLENBQUMsb0JBQW9CeUIsVUFBVTtZQUMzQ1IsS0FBS0EsSUFBSVMsU0FBUyxDQUFDLEdBQUcsTUFBTTtZQUM1QkMsS0FBSztZQUNMQyxTQUFTLENBQUMsSUFBSSxDQUFDdEIsS0FBSyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRCxLQUFLLENBQUNLLGFBQWEsR0FBRyxHQUFFLEVBQUdrQixPQUFPLENBQUMsS0FBSztRQUMzRTtRQUVBLE9BQU9MO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQU1NLElBQUliLEdBQUcsRUFBRU8sS0FBSyxFQUFFTyxhQUFhLElBQUksRUFBRTtRQUN2QyxNQUFNYixZQUFZQyxLQUFLQyxHQUFHO1FBRTFCLHdDQUF3QztRQUN4QyxJQUFJLElBQUksQ0FBQ2pCLEtBQUssQ0FBQzZCLElBQUksSUFBSSxJQUFJLENBQUNwQixPQUFPLEVBQUU7WUFDbkMsSUFBSSxDQUFDcUIsV0FBVztRQUNsQjtRQUVBLE1BQU1YLE1BQU1TLGFBQ1JaLEtBQUtDLEdBQUcsS0FBTVcsYUFBYSxPQUMzQlosS0FBS0MsR0FBRyxLQUFLLElBQUksQ0FBQ1AsVUFBVTtRQUVoQyxJQUFJLENBQUNWLEtBQUssQ0FBQzJCLEdBQUcsQ0FBQ2IsS0FBS087UUFDcEIsSUFBSSxDQUFDbkIsTUFBTSxDQUFDeUIsR0FBRyxDQUFDYixLQUFLSztRQUNyQixJQUFJLENBQUNoQixLQUFLLENBQUNHLElBQUk7UUFFZixNQUFNZ0IsV0FBV04sS0FBS0MsR0FBRyxLQUFLRjtRQUM5QmxCLHFFQUFjQSxDQUFDLG9CQUFvQnlCLFVBQVU7WUFDM0NSLEtBQUtBLElBQUlTLFNBQVMsQ0FBQyxHQUFHLE1BQU07WUFDNUJKLEtBQUtTLGNBQWMsSUFBSyxDQUFDbEIsVUFBVSxHQUFHLE9BQVE7WUFDOUNxQixXQUFXLElBQUksQ0FBQy9CLEtBQUssQ0FBQzZCLElBQUk7UUFDNUI7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTUcsSUFBSWxCLEdBQUcsRUFBRTtRQUNiLE1BQU1tQixVQUFVLElBQUksQ0FBQ2pDLEtBQUssQ0FBQ29CLE1BQU0sQ0FBQ047UUFDbEMsSUFBSSxDQUFDWixNQUFNLENBQUNrQixNQUFNLENBQUNOO1FBQ25CLE9BQU9tQixVQUFVLElBQUk7SUFDdkI7SUFFQTs7R0FFQyxHQUNELE1BQU1DLE9BQU9wQixHQUFHLEVBQUU7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ2QsS0FBSyxDQUFDa0IsR0FBRyxDQUFDSixNQUFNLE9BQU87UUFFakMsTUFBTUssTUFBTSxJQUFJLENBQUNqQixNQUFNLENBQUNXLEdBQUcsQ0FBQ0M7UUFDNUIsSUFBSUssT0FBT0gsS0FBS0MsR0FBRyxLQUFLRSxLQUFLO1lBQzNCLElBQUksQ0FBQ25CLEtBQUssQ0FBQ29CLE1BQU0sQ0FBQ047WUFDbEIsSUFBSSxDQUFDWixNQUFNLENBQUNrQixNQUFNLENBQUNOO1lBQ25CLE9BQU87UUFDVDtRQUVBLE9BQU87SUFDVDtJQUVBOztHQUVDLEdBQ0RxQixXQUFXO1FBQ1QsT0FBTztZQUNMLEdBQUcsSUFBSSxDQUFDaEMsS0FBSztZQUNiNEIsV0FBVyxJQUFJLENBQUMvQixLQUFLLENBQUM2QixJQUFJO1lBQzFCcEIsU0FBUyxJQUFJLENBQUNBLE9BQU87WUFDckJnQixTQUFTLElBQUksQ0FBQ3RCLEtBQUssQ0FBQ0ssYUFBYSxHQUFHLElBQ2hDLENBQUMsSUFBSSxDQUFDTCxLQUFLLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNELEtBQUssQ0FBQ0ssYUFBYSxHQUFHLEdBQUUsRUFBR2tCLE9BQU8sQ0FBQyxLQUFLLE1BQ2hFO1lBQ0pVLGFBQWFDLFFBQVFELFdBQVc7UUFDbEM7SUFDRjtJQUVBOztHQUVDLEdBQ0ROLGNBQWM7UUFDWixNQUFNUSxhQUFhQyxNQUFNQyxJQUFJLENBQUMsSUFBSSxDQUFDeEMsS0FBSyxDQUFDeUMsSUFBSSxJQUFJQyxLQUFLLENBQUMsR0FBR0MsS0FBS0MsS0FBSyxDQUFDLElBQUksQ0FBQ25DLE9BQU8sR0FBRztRQUVwRixLQUFLLE1BQU1LLE9BQU93QixXQUFZO1lBQzVCLElBQUksQ0FBQ3RDLEtBQUssQ0FBQ29CLE1BQU0sQ0FBQ047WUFDbEIsSUFBSSxDQUFDWixNQUFNLENBQUNrQixNQUFNLENBQUNOO1lBQ25CLElBQUksQ0FBQ1gsS0FBSyxDQUFDSSxTQUFTO1FBQ3RCO1FBRUFiLDhEQUFPQSxDQUFDLG1DQUFtQztZQUN6Q21ELGFBQWFQLFdBQVdRLE1BQU07WUFDOUJDLGVBQWUsSUFBSSxDQUFDL0MsS0FBSyxDQUFDNkIsSUFBSTtRQUNoQztJQUNGO0lBRUE7O0dBRUMsR0FDRGxCLHVCQUF1QjtRQUNyQnFDLFlBQVk7WUFDVixNQUFNL0IsTUFBTUQsS0FBS0MsR0FBRztZQUNwQixJQUFJZ0MsZUFBZTtZQUVuQixLQUFLLE1BQU0sQ0FBQ25DLEtBQUtLLElBQUksSUFBSSxJQUFJLENBQUNqQixNQUFNLENBQUNnRCxPQUFPLEdBQUk7Z0JBQzlDLElBQUkvQixNQUFNRixLQUFLO29CQUNiLElBQUksQ0FBQ2pCLEtBQUssQ0FBQ29CLE1BQU0sQ0FBQ047b0JBQ2xCLElBQUksQ0FBQ1osTUFBTSxDQUFDa0IsTUFBTSxDQUFDTjtvQkFDbkJtQztnQkFDRjtZQUNGO1lBRUEsSUFBSUEsZUFBZSxHQUFHO2dCQUNwQnZELDhEQUFPQSxDQUFDLGtDQUFrQztvQkFDeEN5RCxhQUFhRjtvQkFDYmxCLFdBQVcsSUFBSSxDQUFDL0IsS0FBSyxDQUFDNkIsSUFBSTtnQkFDNUI7WUFDRjtRQUNGLEdBQUcsT0FBTyxlQUFlOztJQUMzQjtJQUVBOztHQUVDLEdBQ0QsTUFBTXVCLFdBQVc7UUFDZixJQUFJLENBQUNwRCxLQUFLLENBQUNxRCxLQUFLO1FBQ2hCLElBQUksQ0FBQ25ELE1BQU0sQ0FBQ21ELEtBQUs7UUFDakIsSUFBSSxDQUFDbEQsS0FBSyxDQUFDSSxTQUFTLElBQUksSUFBSSxDQUFDUCxLQUFLLENBQUM2QixJQUFJO1FBQ3ZDbkMsOERBQU9BLENBQUM7SUFDVjtJQUVBOztHQUVDLEdBQ0QsTUFBTTRELEtBQUtiLElBQUksRUFBRTtRQUNmLE1BQU1jLFVBQVUsRUFBRTtRQUNsQixLQUFLLE1BQU16QyxPQUFPMkIsS0FBTTtZQUN0QmMsUUFBUUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDM0MsR0FBRyxDQUFDQztRQUM5QjtRQUNBLE9BQU95QztJQUNUO0lBRUE7O0dBRUMsR0FDRCxNQUFNRSxLQUFLQyxhQUFhLEVBQUU7UUFDeEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlELGNBQWNaLE1BQU0sRUFBRWEsS0FBSyxFQUFHO1lBQ2hELE1BQU0sSUFBSSxDQUFDaEMsR0FBRyxDQUFDK0IsYUFBYSxDQUFDQyxFQUFFLEVBQUVELGFBQWEsQ0FBQ0MsSUFBSSxFQUFFO1FBQ3ZEO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQU1DLEtBQUs5QyxHQUFHLEVBQUU7UUFDZCxNQUFNK0MsVUFBVSxNQUFPLElBQUksQ0FBQ2hELEdBQUcsQ0FBQ0MsUUFBUztRQUN6QyxNQUFNZ0QsV0FBV0MsU0FBU0YsV0FBVztRQUNyQyxNQUFNLElBQUksQ0FBQ2xDLEdBQUcsQ0FBQ2IsS0FBS2dEO1FBQ3BCLE9BQU9BO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQU1FLE9BQU9sRCxHQUFHLEVBQUVjLFVBQVUsRUFBRTtRQUM1QixJQUFJLElBQUksQ0FBQzVCLEtBQUssQ0FBQ2tCLEdBQUcsQ0FBQ0osTUFBTTtZQUN2QixJQUFJLENBQUNaLE1BQU0sQ0FBQ3lCLEdBQUcsQ0FBQ2IsS0FBS0UsS0FBS0MsR0FBRyxLQUFNVyxhQUFhO1lBQ2hELE9BQU87UUFDVDtRQUNBLE9BQU87SUFDVDtBQUNGO0FBRUEscUJBQXFCO0FBQ3JCLE1BQU1xQyxzQkFBc0IsSUFBSW5FO0FBRWhDOztDQUVDLEdBQ0QsTUFBTW9FO0lBQ0puRSxhQUFjO1FBQ1osSUFBSSxDQUFDb0UsS0FBSyxHQUFHO1FBQ2IsSUFBSSxDQUFDQyxhQUFhLEdBQUc7UUFDckIsSUFBSSxDQUFDQyxlQUFlO0lBQ3RCO0lBRUEsTUFBTUEsa0JBQWtCO1FBQ3RCLElBQUk7WUFDRixNQUFNLEVBQUVDLGNBQWMsRUFBRSxHQUFHLE1BQU0sOEtBQU87WUFDeEMsSUFBSSxDQUFDSCxLQUFLLEdBQUcsTUFBTUc7WUFDbkIsSUFBSSxDQUFDRixhQUFhLEdBQUc7WUFDckIxRSw4REFBT0EsQ0FBQztRQUNWLEVBQUUsT0FBTzZFLE9BQU87WUFDZDVFLDhEQUFPQSxDQUFDLDREQUE0RDtnQkFDbEU0RSxPQUFPQSxNQUFNQyxPQUFPO1lBQ3RCO1lBQ0EsSUFBSSxDQUFDSixhQUFhLEdBQUc7UUFDdkI7SUFDRjtJQUVBLE1BQU12RCxJQUFJQyxHQUFHLEVBQUU7UUFDYixJQUFJLElBQUksQ0FBQ3NELGFBQWEsSUFBSSxDQUFDLElBQUksQ0FBQ0QsS0FBSyxFQUFFO1lBQ3JDLE9BQU8sTUFBTUYsb0JBQW9CcEQsR0FBRyxDQUFDQztRQUN2QztRQUVBLElBQUk7WUFDRixNQUFNMkQsU0FBUyxNQUFNLElBQUksQ0FBQ04sS0FBSyxDQUFDdEQsR0FBRyxDQUFDQztZQUNwQyxPQUFPMkQsU0FBU0MsS0FBS0MsS0FBSyxDQUFDRixVQUFVO1FBQ3ZDLEVBQUUsT0FBT0YsT0FBTztZQUNkNUUsOERBQU9BLENBQUMsNENBQTRDO2dCQUFFbUI7Z0JBQUt5RCxPQUFPQSxNQUFNQyxPQUFPO1lBQUM7WUFDaEYsT0FBTyxNQUFNUCxvQkFBb0JwRCxHQUFHLENBQUNDO1FBQ3ZDO0lBQ0Y7SUFFQSxNQUFNYSxJQUFJYixHQUFHLEVBQUVPLEtBQUssRUFBRU8sYUFBYSxJQUFJLEVBQUU7UUFDdkMsSUFBSSxJQUFJLENBQUN3QyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUNELEtBQUssRUFBRTtZQUNyQyxPQUFPLE1BQU1GLG9CQUFvQnRDLEdBQUcsQ0FBQ2IsS0FBS08sT0FBT087UUFDbkQ7UUFFQSxJQUFJO1lBQ0YsTUFBTSxJQUFJLENBQUN1QyxLQUFLLENBQUNTLEtBQUssQ0FBQzlELEtBQUtjLFlBQVk4QyxLQUFLRyxTQUFTLENBQUN4RDtRQUN6RCxFQUFFLE9BQU9rRCxPQUFPO1lBQ2Q1RSw4REFBT0EsQ0FBQyw0Q0FBNEM7Z0JBQUVtQjtnQkFBS3lELE9BQU9BLE1BQU1DLE9BQU87WUFBQztZQUNoRixNQUFNUCxvQkFBb0J0QyxHQUFHLENBQUNiLEtBQUtPLE9BQU9PO1FBQzVDO0lBQ0Y7SUFFQSxNQUFNSSxJQUFJbEIsR0FBRyxFQUFFO1FBQ2IsSUFBSSxJQUFJLENBQUNzRCxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUNELEtBQUssRUFBRTtZQUNyQyxPQUFPLE1BQU1GLG9CQUFvQmpDLEdBQUcsQ0FBQ2xCO1FBQ3ZDO1FBRUEsSUFBSTtZQUNGLE9BQU8sTUFBTSxJQUFJLENBQUNxRCxLQUFLLENBQUNuQyxHQUFHLENBQUNsQjtRQUM5QixFQUFFLE9BQU95RCxPQUFPO1lBQ2Q1RSw4REFBT0EsQ0FBQyw0Q0FBNEM7Z0JBQUVtQjtnQkFBS3lELE9BQU9BLE1BQU1DLE9BQU87WUFBQztZQUNoRixPQUFPLE1BQU1QLG9CQUFvQmpDLEdBQUcsQ0FBQ2xCO1FBQ3ZDO0lBQ0Y7SUFFQXFCLFdBQVc7UUFDVCxPQUFPO1lBQ0xpQyxlQUFlLElBQUksQ0FBQ0EsYUFBYTtZQUNqQ1UsZ0JBQWdCLENBQUMsSUFBSSxDQUFDVixhQUFhLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQ0QsS0FBSztZQUNuRFksZUFBZWQsb0JBQW9COUIsUUFBUTtRQUM3QztJQUNGO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDckIsTUFBTTZDLGlCQUFpQixJQUFJZCxpQkFBZ0I7QUFDcEI7QUFDOUIsaUVBQWVjLGNBQWNBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlhbmdsZS1pbnRlbGxpZ2VuY2UtcGxhdGZvcm0vLi9saWIvdXRpbHMvbWVtb3J5LWNhY2hlLWZhbGxiYWNrLmpzP2MzMGQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNZW1vcnkgQ2FjaGUgRmFsbGJhY2sgU3lzdGVtIGZvciBUcmlhbmdsZSBJbnRlbGxpZ2VuY2UgUGxhdGZvcm1cbiAqIFByb3ZpZGVzIGhpZ2gtcGVyZm9ybWFuY2UgY2FjaGluZyB3aGVuIFJlZGlzIGlzIG5vdCBhdmFpbGFibGVcbiAqIENyaXRpY2FsIGZvciBwcm9kdWN0aW9uIHJlYWRpbmVzcyBhbmQgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uXG4gKi9cblxuaW1wb3J0IHsgbG9nSW5mbywgbG9nV2FybiwgbG9nRXJyb3IsIGxvZ1BlcmZvcm1hbmNlIH0gZnJvbSAnLi9wcm9kdWN0aW9uLWxvZ2dlci5qcydcblxuY2xhc3MgTWVtb3J5Q2FjaGVGYWxsYmFjayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKClcbiAgICB0aGlzLmtleVRUTCA9IG5ldyBNYXAoKSAvLyBUcmFjayBUVEwgZm9yIGVhY2gga2V5XG4gICAgdGhpcy5zdGF0cyA9IHtcbiAgICAgIGhpdHM6IDAsXG4gICAgICBtaXNzZXM6IDAsXG4gICAgICBzZXRzOiAwLFxuICAgICAgZXZpY3Rpb25zOiAwLFxuICAgICAgdG90YWxSZXF1ZXN0czogMFxuICAgIH1cbiAgICB0aGlzLm1heFNpemUgPSAxMDAwMCAvLyBNYXhpbXVtIGNhY2hlIGVudHJpZXNcbiAgICB0aGlzLmRlZmF1bHRUVEwgPSAzNjAwMDAwIC8vIDEgaG91ciBpbiBtaWxsaXNlY29uZHNcbiAgICBcbiAgICAvLyBTdGFydCBjbGVhbnVwIGludGVydmFsXG4gICAgdGhpcy5zdGFydENsZWFudXBJbnRlcnZhbCgpXG4gICAgXG4gICAgbG9nSW5mbygnTWVtb3J5IGNhY2hlIGZhbGxiYWNrIGluaXRpYWxpemVkJywge1xuICAgICAgbWF4U2l6ZTogdGhpcy5tYXhTaXplLFxuICAgICAgZGVmYXVsdFRUTDogdGhpcy5kZWZhdWx0VFRMIC8gMTAwMCArICdzJyxcbiAgICAgIHN0YXR1czogJ1JFQURZJ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIGZyb20gY2FjaGVcbiAgICovXG4gIGFzeW5jIGdldChrZXkpIHtcbiAgICB0aGlzLnN0YXRzLnRvdGFsUmVxdWVzdHMrK1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgICBcbiAgICBpZiAoIXRoaXMuY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMuc3RhdHMubWlzc2VzKytcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgZXhwaXJlZFxuICAgIGNvbnN0IHR0bCA9IHRoaXMua2V5VFRMLmdldChrZXkpXG4gICAgaWYgKHR0bCAmJiBEYXRlLm5vdygpID4gdHRsKSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpXG4gICAgICB0aGlzLmtleVRUTC5kZWxldGUoa2V5KVxuICAgICAgdGhpcy5zdGF0cy5taXNzZXMrK1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRzLmhpdHMrK1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jYWNoZS5nZXQoa2V5KVxuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIFxuICAgIGxvZ1BlcmZvcm1hbmNlKCdtZW1vcnlfY2FjaGVfZ2V0JywgZHVyYXRpb24sIHtcbiAgICAgIGtleToga2V5LnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyxcbiAgICAgIGhpdDogdHJ1ZSxcbiAgICAgIGhpdFJhdGU6ICh0aGlzLnN0YXRzLmhpdHMgLyB0aGlzLnN0YXRzLnRvdGFsUmVxdWVzdHMgKiAxMDApLnRvRml4ZWQoMSkgKyAnJSdcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2YWx1ZSBpbiBjYWNoZSB3aXRoIG9wdGlvbmFsIFRUTFxuICAgKi9cbiAgYXN5bmMgc2V0KGtleSwgdmFsdWUsIHR0bFNlY29uZHMgPSBudWxsKSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIFxuICAgIC8vIEV2aWN0IG9sZGVzdCBlbnRyaWVzIGlmIGNhY2hlIGlzIGZ1bGxcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgdGhpcy5ldmljdE9sZGVzdCgpXG4gICAgfVxuXG4gICAgY29uc3QgdHRsID0gdHRsU2Vjb25kcyBcbiAgICAgID8gRGF0ZS5ub3coKSArICh0dGxTZWNvbmRzICogMTAwMClcbiAgICAgIDogRGF0ZS5ub3coKSArIHRoaXMuZGVmYXVsdFRUTFxuICAgIFxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpXG4gICAgdGhpcy5rZXlUVEwuc2V0KGtleSwgdHRsKVxuICAgIHRoaXMuc3RhdHMuc2V0cysrXG4gICAgXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgbG9nUGVyZm9ybWFuY2UoJ21lbW9yeV9jYWNoZV9zZXQnLCBkdXJhdGlvbiwge1xuICAgICAga2V5OiBrZXkuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nLFxuICAgICAgdHRsOiB0dGxTZWNvbmRzIHx8ICh0aGlzLmRlZmF1bHRUVEwgLyAxMDAwKSArICdzJyxcbiAgICAgIGNhY2hlU2l6ZTogdGhpcy5jYWNoZS5zaXplXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUga2V5IGZyb20gY2FjaGVcbiAgICovXG4gIGFzeW5jIGRlbChrZXkpIHtcbiAgICBjb25zdCBkZWxldGVkID0gdGhpcy5jYWNoZS5kZWxldGUoa2V5KVxuICAgIHRoaXMua2V5VFRMLmRlbGV0ZShrZXkpXG4gICAgcmV0dXJuIGRlbGV0ZWQgPyAxIDogMFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGtleSBleGlzdHMgKGFuZCBpcyBub3QgZXhwaXJlZClcbiAgICovXG4gIGFzeW5jIGV4aXN0cyhrZXkpIHtcbiAgICBpZiAoIXRoaXMuY2FjaGUuaGFzKGtleSkpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGNvbnN0IHR0bCA9IHRoaXMua2V5VFRMLmdldChrZXkpXG4gICAgaWYgKHR0bCAmJiBEYXRlLm5vdygpID4gdHRsKSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpXG4gICAgICB0aGlzLmtleVRUTC5kZWxldGUoa2V5KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvKipcbiAgICogR2V0IGNhY2hlIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLnN0YXRzLFxuICAgICAgY2FjaGVTaXplOiB0aGlzLmNhY2hlLnNpemUsXG4gICAgICBtYXhTaXplOiB0aGlzLm1heFNpemUsXG4gICAgICBoaXRSYXRlOiB0aGlzLnN0YXRzLnRvdGFsUmVxdWVzdHMgPiAwIFxuICAgICAgICA/ICh0aGlzLnN0YXRzLmhpdHMgLyB0aGlzLnN0YXRzLnRvdGFsUmVxdWVzdHMgKiAxMDApLnRvRml4ZWQoMikgKyAnJSdcbiAgICAgICAgOiAnMCUnLFxuICAgICAgbWVtb3J5VXNhZ2U6IHByb2Nlc3MubWVtb3J5VXNhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFdmljdCBvbGRlc3QgZW50cmllcyB3aGVuIGNhY2hlIGlzIGZ1bGxcbiAgICovXG4gIGV2aWN0T2xkZXN0KCkge1xuICAgIGNvbnN0IG9sZGVzdEtleXMgPSBBcnJheS5mcm9tKHRoaXMuY2FjaGUua2V5cygpKS5zbGljZSgwLCBNYXRoLmZsb29yKHRoaXMubWF4U2l6ZSAqIDAuMSkpXG4gICAgXG4gICAgZm9yIChjb25zdCBrZXkgb2Ygb2xkZXN0S2V5cykge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KVxuICAgICAgdGhpcy5rZXlUVEwuZGVsZXRlKGtleSlcbiAgICAgIHRoaXMuc3RhdHMuZXZpY3Rpb25zKytcbiAgICB9XG4gICAgXG4gICAgbG9nSW5mbygnTWVtb3J5IGNhY2hlIGV2aWN0aW9uIGNvbXBsZXRlZCcsIHtcbiAgICAgIGV2aWN0ZWRLZXlzOiBvbGRlc3RLZXlzLmxlbmd0aCxcbiAgICAgIHJlbWFpbmluZ1NpemU6IHRoaXMuY2FjaGUuc2l6ZVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgZXhwaXJlZCBlbnRyaWVzIHBlcmlvZGljYWxseVxuICAgKi9cbiAgc3RhcnRDbGVhbnVwSW50ZXJ2YWwoKSB7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgICAgbGV0IGV4cGlyZWRDb3VudCA9IDBcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBba2V5LCB0dGxdIG9mIHRoaXMua2V5VFRMLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAodHRsIDwgbm93KSB7XG4gICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KVxuICAgICAgICAgIHRoaXMua2V5VFRMLmRlbGV0ZShrZXkpXG4gICAgICAgICAgZXhwaXJlZENvdW50KytcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZXhwaXJlZENvdW50ID4gMCkge1xuICAgICAgICBsb2dJbmZvKCdNZW1vcnkgY2FjaGUgY2xlYW51cCBjb21wbGV0ZWQnLCB7XG4gICAgICAgICAgZXhwaXJlZEtleXM6IGV4cGlyZWRDb3VudCxcbiAgICAgICAgICBjYWNoZVNpemU6IHRoaXMuY2FjaGUuc2l6ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIDYwMDAwKSAvLyBFdmVyeSBtaW51dGVcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgY2FjaGVcbiAgICovXG4gIGFzeW5jIGZsdXNoYWxsKCkge1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKVxuICAgIHRoaXMua2V5VFRMLmNsZWFyKClcbiAgICB0aGlzLnN0YXRzLmV2aWN0aW9ucyArPSB0aGlzLmNhY2hlLnNpemVcbiAgICBsb2dJbmZvKCdNZW1vcnkgY2FjaGUgZmx1c2hlZCBjb21wbGV0ZWx5JylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbXVsdGlwbGUga2V5cyBhdCBvbmNlXG4gICAqL1xuICBhc3luYyBtZ2V0KGtleXMpIHtcbiAgICBjb25zdCByZXN1bHRzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICByZXN1bHRzLnB1c2goYXdhaXQgdGhpcy5nZXQoa2V5KSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbXVsdGlwbGUga2V5LXZhbHVlIHBhaXJzXG4gICAqL1xuICBhc3luYyBtc2V0KGtleVZhbHVlUGFpcnMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleVZhbHVlUGFpcnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0KGtleVZhbHVlUGFpcnNbaV0sIGtleVZhbHVlUGFpcnNbaSArIDFdKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbmNyZW1lbnQgYSBudW1lcmljIHZhbHVlXG4gICAqL1xuICBhc3luYyBpbmNyKGtleSkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSAoYXdhaXQgdGhpcy5nZXQoa2V5KSkgfHwgMFxuICAgIGNvbnN0IG5ld1ZhbHVlID0gcGFyc2VJbnQoY3VycmVudCkgKyAxXG4gICAgYXdhaXQgdGhpcy5zZXQoa2V5LCBuZXdWYWx1ZSlcbiAgICByZXR1cm4gbmV3VmFsdWVcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZXhwaXJ5IGZvciBleGlzdGluZyBrZXlcbiAgICovXG4gIGFzeW5jIGV4cGlyZShrZXksIHR0bFNlY29uZHMpIHtcbiAgICBpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkge1xuICAgICAgdGhpcy5rZXlUVEwuc2V0KGtleSwgRGF0ZS5ub3coKSArICh0dGxTZWNvbmRzICogMTAwMCkpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2VcbmNvbnN0IG1lbW9yeUNhY2hlRmFsbGJhY2sgPSBuZXcgTWVtb3J5Q2FjaGVGYWxsYmFjaygpXG5cbi8qKlxuICogVW5pdmVyc2FsIGNhY2hlIGludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBSZWRpcyBhbmQgbWVtb3J5IGZhbGxiYWNrXG4gKi9cbmNsYXNzIFVuaXZlcnNhbENhY2hlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZWRpcyA9IG51bGxcbiAgICB0aGlzLnVzaW5nRmFsbGJhY2sgPSB0cnVlXG4gICAgdGhpcy5pbml0aWFsaXplUmVkaXMoKVxuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZVJlZGlzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFJlZGlzQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uL3JlZGlzLWNsaWVudC5qcycpXG4gICAgICB0aGlzLnJlZGlzID0gYXdhaXQgZ2V0UmVkaXNDbGllbnQoKVxuICAgICAgdGhpcy51c2luZ0ZhbGxiYWNrID0gZmFsc2VcbiAgICAgIGxvZ0luZm8oJ1VuaXZlcnNhbENhY2hlOiBSZWRpcyBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nV2FybignVW5pdmVyc2FsQ2FjaGU6IFJlZGlzIHVuYXZhaWxhYmxlLCB1c2luZyBtZW1vcnkgZmFsbGJhY2snLCB7IFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSBcbiAgICAgIH0pXG4gICAgICB0aGlzLnVzaW5nRmFsbGJhY2sgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0KGtleSkge1xuICAgIGlmICh0aGlzLnVzaW5nRmFsbGJhY2sgfHwgIXRoaXMucmVkaXMpIHtcbiAgICAgIHJldHVybiBhd2FpdCBtZW1vcnlDYWNoZUZhbGxiYWNrLmdldChrZXkpXG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlZGlzLmdldChrZXkpXG4gICAgICByZXR1cm4gcmVzdWx0ID8gSlNPTi5wYXJzZShyZXN1bHQpIDogbnVsbFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dXYXJuKCdSZWRpcyBnZXQgZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gbWVtb3J5JywgeyBrZXksIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pXG4gICAgICByZXR1cm4gYXdhaXQgbWVtb3J5Q2FjaGVGYWxsYmFjay5nZXQoa2V5KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldChrZXksIHZhbHVlLCB0dGxTZWNvbmRzID0gMzYwMCkge1xuICAgIGlmICh0aGlzLnVzaW5nRmFsbGJhY2sgfHwgIXRoaXMucmVkaXMpIHtcbiAgICAgIHJldHVybiBhd2FpdCBtZW1vcnlDYWNoZUZhbGxiYWNrLnNldChrZXksIHZhbHVlLCB0dGxTZWNvbmRzKVxuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5yZWRpcy5zZXRleChrZXksIHR0bFNlY29uZHMsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nV2FybignUmVkaXMgc2V0IGZhaWxlZCwgZmFsbGluZyBiYWNrIHRvIG1lbW9yeScsIHsga2V5LCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KVxuICAgICAgYXdhaXQgbWVtb3J5Q2FjaGVGYWxsYmFjay5zZXQoa2V5LCB2YWx1ZSwgdHRsU2Vjb25kcylcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWwoa2V5KSB7XG4gICAgaWYgKHRoaXMudXNpbmdGYWxsYmFjayB8fCAhdGhpcy5yZWRpcykge1xuICAgICAgcmV0dXJuIGF3YWl0IG1lbW9yeUNhY2hlRmFsbGJhY2suZGVsKGtleSlcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlZGlzLmRlbChrZXkpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ1dhcm4oJ1JlZGlzIGRlbCBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBtZW1vcnknLCB7IGtleSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcbiAgICAgIHJldHVybiBhd2FpdCBtZW1vcnlDYWNoZUZhbGxiYWNrLmRlbChrZXkpXG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzaW5nRmFsbGJhY2s6IHRoaXMudXNpbmdGYWxsYmFjayxcbiAgICAgIHJlZGlzQ29ubmVjdGVkOiAhdGhpcy51c2luZ0ZhbGxiYWNrICYmICEhdGhpcy5yZWRpcyxcbiAgICAgIGZhbGxiYWNrU3RhdHM6IG1lbW9yeUNhY2hlRmFsbGJhY2suZ2V0U3RhdHMoKVxuICAgIH1cbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgdW5pdmVyc2FsQ2FjaGUgPSBuZXcgVW5pdmVyc2FsQ2FjaGUoKVxuZXhwb3J0IHsgbWVtb3J5Q2FjaGVGYWxsYmFjayB9XG5leHBvcnQgZGVmYXVsdCB1bml2ZXJzYWxDYWNoZSJdLCJuYW1lcyI6WyJsb2dJbmZvIiwibG9nV2FybiIsImxvZ0Vycm9yIiwibG9nUGVyZm9ybWFuY2UiLCJNZW1vcnlDYWNoZUZhbGxiYWNrIiwiY29uc3RydWN0b3IiLCJjYWNoZSIsIk1hcCIsImtleVRUTCIsInN0YXRzIiwiaGl0cyIsIm1pc3NlcyIsInNldHMiLCJldmljdGlvbnMiLCJ0b3RhbFJlcXVlc3RzIiwibWF4U2l6ZSIsImRlZmF1bHRUVEwiLCJzdGFydENsZWFudXBJbnRlcnZhbCIsInN0YXR1cyIsImdldCIsImtleSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJoYXMiLCJ0dGwiLCJkZWxldGUiLCJ2YWx1ZSIsImR1cmF0aW9uIiwic3Vic3RyaW5nIiwiaGl0IiwiaGl0UmF0ZSIsInRvRml4ZWQiLCJzZXQiLCJ0dGxTZWNvbmRzIiwic2l6ZSIsImV2aWN0T2xkZXN0IiwiY2FjaGVTaXplIiwiZGVsIiwiZGVsZXRlZCIsImV4aXN0cyIsImdldFN0YXRzIiwibWVtb3J5VXNhZ2UiLCJwcm9jZXNzIiwib2xkZXN0S2V5cyIsIkFycmF5IiwiZnJvbSIsImtleXMiLCJzbGljZSIsIk1hdGgiLCJmbG9vciIsImV2aWN0ZWRLZXlzIiwibGVuZ3RoIiwicmVtYWluaW5nU2l6ZSIsInNldEludGVydmFsIiwiZXhwaXJlZENvdW50IiwiZW50cmllcyIsImV4cGlyZWRLZXlzIiwiZmx1c2hhbGwiLCJjbGVhciIsIm1nZXQiLCJyZXN1bHRzIiwicHVzaCIsIm1zZXQiLCJrZXlWYWx1ZVBhaXJzIiwiaSIsImluY3IiLCJjdXJyZW50IiwibmV3VmFsdWUiLCJwYXJzZUludCIsImV4cGlyZSIsIm1lbW9yeUNhY2hlRmFsbGJhY2siLCJVbml2ZXJzYWxDYWNoZSIsInJlZGlzIiwidXNpbmdGYWxsYmFjayIsImluaXRpYWxpemVSZWRpcyIsImdldFJlZGlzQ2xpZW50IiwiZXJyb3IiLCJtZXNzYWdlIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwic2V0ZXgiLCJzdHJpbmdpZnkiLCJyZWRpc0Nvbm5lY3RlZCIsImZhbGxiYWNrU3RhdHMiLCJ1bml2ZXJzYWxDYWNoZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils/memory-cache-fallback.js\n");

/***/ }),

/***/ "(api)/./lib/utils/production-logger.js":
/*!****************************************!*\
  !*** ./lib/utils/production-logger.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logAPICall: () => (/* binding */ logAPICall),\n/* harmony export */   logBusiness: () => (/* binding */ logBusiness),\n/* harmony export */   logDBQuery: () => (/* binding */ logDBQuery),\n/* harmony export */   logDebug: () => (/* binding */ logDebug),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logInfo: () => (/* binding */ logInfo),\n/* harmony export */   logPerformance: () => (/* binding */ logPerformance),\n/* harmony export */   logSecurity: () => (/* binding */ logSecurity),\n/* harmony export */   logWarn: () => (/* binding */ logWarn),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var _environment_validation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./environment-validation.js */ \"(api)/./lib/utils/environment-validation.js\");\n/**\n * Production-Safe Logging System\n * Handles logging with environment awareness and security\n */ \n// Log levels\nconst LOG_LEVELS = {\n    ERROR: 0,\n    WARN: 1,\n    INFO: 2,\n    DEBUG: 3,\n    TRACE: 4\n};\nclass ProductionLogger {\n    constructor(){\n        this.level = (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? LOG_LEVELS.WARN : LOG_LEVELS.DEBUG;\n        this.sensitivePatterns = [\n            /sk-[a-zA-Z0-9_-]+/,\n            /pk_[a-zA-Z0-9_-]+/,\n            /eyJ[a-zA-Z0-9_-]+/,\n            /password/i,\n            /secret/i,\n            /token/i,\n            /key.*=.*[a-zA-Z0-9_-]{20,}/ // Key-value pairs with long values\n        ];\n    }\n    /**\n   * Sanitize sensitive data from logs\n   */ sanitize(data) {\n        if (typeof data === \"string\") {\n            let sanitized = data;\n            this.sensitivePatterns.forEach((pattern)=>{\n                sanitized = sanitized.replace(pattern, \"[REDACTED]\");\n            });\n            return sanitized;\n        }\n        if (typeof data === \"object\" && data !== null) {\n            const sanitized = Array.isArray(data) ? [] : {};\n            for (const [key, value] of Object.entries(data)){\n                const keyLower = key.toLowerCase();\n                if (keyLower.includes(\"password\") || keyLower.includes(\"secret\") || keyLower.includes(\"token\") || keyLower.includes(\"key\")) {\n                    sanitized[key] = \"[REDACTED]\";\n                } else {\n                    sanitized[key] = this.sanitize(value);\n                }\n            }\n            return sanitized;\n        }\n        return data;\n    }\n    /**\n   * Format log message\n   */ formatMessage(level, message, data, metadata) {\n        const timestamp = new Date().toISOString();\n        const sanitizedData = data ? this.sanitize(data) : null;\n        const logEntry = {\n            timestamp,\n            level,\n            message,\n            ...sanitizedData && {\n                data: sanitizedData\n            },\n            ...metadata && {\n                metadata\n            }\n        };\n        return (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? JSON.stringify(logEntry) : logEntry;\n    }\n    /**\n   * Log error messages\n   */ error(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.ERROR) {\n            const formatted = this.formatMessage(\"ERROR\", message, data, metadata);\n            console.error((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"❌\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log warning messages\n   */ warn(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.WARN) {\n            const formatted = this.formatMessage(\"WARN\", message, data, metadata);\n            console.warn((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"⚠️\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log info messages\n   */ info(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.INFO) {\n            const formatted = this.formatMessage(\"INFO\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"ℹ️\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log debug messages (only in development)\n   */ debug(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.DEBUG && (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) {\n            const formatted = this.formatMessage(\"DEBUG\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"\\uD83D\\uDC1B\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log trace messages (only in development)\n   */ trace(message, data = null, metadata = null) {\n        if (this.level >= LOG_LEVELS.TRACE && (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) {\n            const formatted = this.formatMessage(\"TRACE\", message, data, metadata);\n            console.log((0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? formatted : \"\\uD83D\\uDD0D\", (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : message, (0,_environment_validation_js__WEBPACK_IMPORTED_MODULE_0__.isProduction)() ? \"\" : this.sanitize(data));\n        }\n    }\n    /**\n   * Log performance metrics\n   */ performance(operation, duration, metadata = null) {\n        this.info(`Performance: ${operation}`, {\n            duration: `${duration}ms`\n        }, metadata);\n    }\n    /**\n   * Log API calls\n   */ apiCall(method, endpoint, duration, status) {\n        this.info(`API: ${method} ${endpoint}`, {\n            duration: `${duration}ms`,\n            status,\n            type: \"api_call\"\n        });\n    }\n    /**\n   * Log database queries\n   */ dbQuery(table, operation, duration, recordCount = null) {\n        this.debug(`DB: ${operation} on ${table}`, {\n            duration: `${duration}ms`,\n            recordCount,\n            type: \"db_query\"\n        });\n    }\n    /**\n   * Log security events\n   */ security(event, details = null) {\n        this.warn(`Security: ${event}`, details, {\n            type: \"security_event\"\n        });\n    }\n    /**\n   * Log business events\n   */ business(event, details = null) {\n        this.info(`Business: ${event}`, details, {\n            type: \"business_event\"\n        });\n    }\n}\n// Create singleton instance\nconst logger = new ProductionLogger();\n// Convenience functions for common use cases\nconst logError = (message, data, metadata)=>logger.error(message, data, metadata);\nconst logWarn = (message, data, metadata)=>logger.warn(message, data, metadata);\nconst logInfo = (message, data, metadata)=>logger.info(message, data, metadata);\nconst logDebug = (message, data, metadata)=>logger.debug(message, data, metadata);\nconst logPerformance = (operation, duration, metadata)=>logger.performance(operation, duration, metadata);\nconst logAPICall = (method, endpoint, duration, status)=>logger.apiCall(method, endpoint, duration, status);\nconst logDBQuery = (table, operation, duration, recordCount)=>logger.dbQuery(table, operation, duration, recordCount);\nconst logSecurity = (event, details)=>logger.security(event, details);\nconst logBusiness = (event, details)=>logger.business(event, details);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaWFuZ2xlLWludGVsbGlnZW5jZS1wbGF0Zm9ybS8uL2xpYi91dGlscy9wcm9kdWN0aW9uLWxvZ2dlci5qcz9mZjY2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvZHVjdGlvbi1TYWZlIExvZ2dpbmcgU3lzdGVtXG4gKiBIYW5kbGVzIGxvZ2dpbmcgd2l0aCBlbnZpcm9ubWVudCBhd2FyZW5lc3MgYW5kIHNlY3VyaXR5XG4gKi9cblxuaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgaXNQcm9kdWN0aW9uIH0gZnJvbSAnLi9lbnZpcm9ubWVudC12YWxpZGF0aW9uLmpzJ1xuXG4vLyBMb2cgbGV2ZWxzXG5jb25zdCBMT0dfTEVWRUxTID0ge1xuICBFUlJPUjogMCxcbiAgV0FSTjogMSxcbiAgSU5GTzogMixcbiAgREVCVUc6IDMsXG4gIFRSQUNFOiA0XG59XG5cbmNsYXNzIFByb2R1Y3Rpb25Mb2dnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxldmVsID0gaXNQcm9kdWN0aW9uKCkgPyBMT0dfTEVWRUxTLldBUk4gOiBMT0dfTEVWRUxTLkRFQlVHXG4gICAgdGhpcy5zZW5zaXRpdmVQYXR0ZXJucyA9IFtcbiAgICAgIC9zay1bYS16QS1aMC05Xy1dKy8sIC8vIEFQSSBrZXlzIHN0YXJ0aW5nIHdpdGggc2stXG4gICAgICAvcGtfW2EtekEtWjAtOV8tXSsvLCAvLyBTdHJpcGUgcHVibGljIGtleXNcbiAgICAgIC9leUpbYS16QS1aMC05Xy1dKy8sIC8vIEpXVCB0b2tlbnNcbiAgICAgIC9wYXNzd29yZC9pLFxuICAgICAgL3NlY3JldC9pLFxuICAgICAgL3Rva2VuL2ksXG4gICAgICAva2V5Lio9LipbYS16QS1aMC05Xy1dezIwLH0vIC8vIEtleS12YWx1ZSBwYWlycyB3aXRoIGxvbmcgdmFsdWVzXG4gICAgXVxuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXplIHNlbnNpdGl2ZSBkYXRhIGZyb20gbG9nc1xuICAgKi9cbiAgc2FuaXRpemUoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCBzYW5pdGl6ZWQgPSBkYXRhXG4gICAgICB0aGlzLnNlbnNpdGl2ZVBhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XG4gICAgICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKHBhdHRlcm4sICdbUkVEQUNURURdJylcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2FuaXRpemVkXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gW10gOiB7fVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBjb25zdCBrZXlMb3dlciA9IGtleS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIFxuICAgICAgICBpZiAoa2V5TG93ZXIuaW5jbHVkZXMoJ3Bhc3N3b3JkJykgfHwgXG4gICAgICAgICAgICBrZXlMb3dlci5pbmNsdWRlcygnc2VjcmV0JykgfHwgXG4gICAgICAgICAgICBrZXlMb3dlci5pbmNsdWRlcygndG9rZW4nKSB8fFxuICAgICAgICAgICAga2V5TG93ZXIuaW5jbHVkZXMoJ2tleScpKSB7XG4gICAgICAgICAgc2FuaXRpemVkW2tleV0gPSAnW1JFREFDVEVEXSdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYW5pdGl6ZWRba2V5XSA9IHRoaXMuc2FuaXRpemUodmFsdWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHNhbml0aXplZFxuICAgIH1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGxvZyBtZXNzYWdlXG4gICAqL1xuICBmb3JtYXRNZXNzYWdlKGxldmVsLCBtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIGNvbnN0IHNhbml0aXplZERhdGEgPSBkYXRhID8gdGhpcy5zYW5pdGl6ZShkYXRhKSA6IG51bGxcbiAgICBcbiAgICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICAgIHRpbWVzdGFtcCxcbiAgICAgIGxldmVsLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIC4uLihzYW5pdGl6ZWREYXRhICYmIHsgZGF0YTogc2FuaXRpemVkRGF0YSB9KSxcbiAgICAgIC4uLihtZXRhZGF0YSAmJiB7IG1ldGFkYXRhIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGlzUHJvZHVjdGlvbigpID8gSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpIDogbG9nRW50cnlcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZXJyb3IgbWVzc2FnZXNcbiAgICovXG4gIGVycm9yKG1lc3NhZ2UsIGRhdGEgPSBudWxsLCBtZXRhZGF0YSA9IG51bGwpIHtcbiAgICBpZiAodGhpcy5sZXZlbCA+PSBMT0dfTEVWRUxTLkVSUk9SKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0VSUk9SJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLmVycm9yKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ+KdjCcsIGlzUHJvZHVjdGlvbigpID8gJycgOiBtZXNzYWdlLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIHdhcm5pbmcgbWVzc2FnZXNcbiAgICovXG4gIHdhcm4obWVzc2FnZSwgZGF0YSA9IG51bGwsIG1ldGFkYXRhID0gbnVsbCkge1xuICAgIGlmICh0aGlzLmxldmVsID49IExPR19MRVZFTFMuV0FSTikge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdXQVJOJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLndhcm4oaXNQcm9kdWN0aW9uKCkgPyBmb3JtYXR0ZWQgOiAn4pqg77iPJywgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IG1lc3NhZ2UsIGlzUHJvZHVjdGlvbigpID8gJycgOiB0aGlzLnNhbml0aXplKGRhdGEpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgaW5mbyBtZXNzYWdlc1xuICAgKi9cbiAgaW5mbyhtZXNzYWdlLCBkYXRhID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPj0gTE9HX0xFVkVMUy5JTkZPKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0lORk8nLCBtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ+KEue+4jycsIGlzUHJvZHVjdGlvbigpID8gJycgOiBtZXNzYWdlLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogdGhpcy5zYW5pdGl6ZShkYXRhKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlYnVnIG1lc3NhZ2VzIChvbmx5IGluIGRldmVsb3BtZW50KVxuICAgKi9cbiAgZGVidWcobWVzc2FnZSwgZGF0YSA9IG51bGwsIG1ldGFkYXRhID0gbnVsbCkge1xuICAgIGlmICh0aGlzLmxldmVsID49IExPR19MRVZFTFMuREVCVUcgJiYgaXNEZXZlbG9wbWVudCgpKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ0RFQlVHJywgbWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG4gICAgICBjb25zb2xlLmxvZyhpc1Byb2R1Y3Rpb24oKSA/IGZvcm1hdHRlZCA6ICfwn5CbJywgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IG1lc3NhZ2UsIGlzUHJvZHVjdGlvbigpID8gJycgOiB0aGlzLnNhbml0aXplKGRhdGEpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgdHJhY2UgbWVzc2FnZXMgKG9ubHkgaW4gZGV2ZWxvcG1lbnQpXG4gICAqL1xuICB0cmFjZShtZXNzYWdlLCBkYXRhID0gbnVsbCwgbWV0YWRhdGEgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPj0gTE9HX0xFVkVMUy5UUkFDRSAmJiBpc0RldmVsb3BtZW50KCkpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnVFJBQ0UnLCBtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKGlzUHJvZHVjdGlvbigpID8gZm9ybWF0dGVkIDogJ/CflI0nLCBpc1Byb2R1Y3Rpb24oKSA/ICcnIDogbWVzc2FnZSwgaXNQcm9kdWN0aW9uKCkgPyAnJyA6IHRoaXMuc2FuaXRpemUoZGF0YSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAqL1xuICBwZXJmb3JtYW5jZShvcGVyYXRpb24sIGR1cmF0aW9uLCBtZXRhZGF0YSA9IG51bGwpIHtcbiAgICB0aGlzLmluZm8oYFBlcmZvcm1hbmNlOiAke29wZXJhdGlvbn1gLCB7IGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AgfSwgbWV0YWRhdGEpXG4gIH1cblxuICAvKipcbiAgICogTG9nIEFQSSBjYWxsc1xuICAgKi9cbiAgYXBpQ2FsbChtZXRob2QsIGVuZHBvaW50LCBkdXJhdGlvbiwgc3RhdHVzKSB7XG4gICAgdGhpcy5pbmZvKGBBUEk6ICR7bWV0aG9kfSAke2VuZHBvaW50fWAsIHtcbiAgICAgIGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AsXG4gICAgICBzdGF0dXMsXG4gICAgICB0eXBlOiAnYXBpX2NhbGwnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgZGF0YWJhc2UgcXVlcmllc1xuICAgKi9cbiAgZGJRdWVyeSh0YWJsZSwgb3BlcmF0aW9uLCBkdXJhdGlvbiwgcmVjb3JkQ291bnQgPSBudWxsKSB7XG4gICAgdGhpcy5kZWJ1ZyhgREI6ICR7b3BlcmF0aW9ufSBvbiAke3RhYmxlfWAsIHtcbiAgICAgIGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AsXG4gICAgICByZWNvcmRDb3VudCxcbiAgICAgIHR5cGU6ICdkYl9xdWVyeSdcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBzZWN1cml0eSBldmVudHNcbiAgICovXG4gIHNlY3VyaXR5KGV2ZW50LCBkZXRhaWxzID0gbnVsbCkge1xuICAgIHRoaXMud2FybihgU2VjdXJpdHk6ICR7ZXZlbnR9YCwgZGV0YWlscywgeyB0eXBlOiAnc2VjdXJpdHlfZXZlbnQnIH0pXG4gIH1cblxuICAvKipcbiAgICogTG9nIGJ1c2luZXNzIGV2ZW50c1xuICAgKi9cbiAgYnVzaW5lc3MoZXZlbnQsIGRldGFpbHMgPSBudWxsKSB7XG4gICAgdGhpcy5pbmZvKGBCdXNpbmVzczogJHtldmVudH1gLCBkZXRhaWxzLCB7IHR5cGU6ICdidXNpbmVzc19ldmVudCcgfSlcbiAgfVxufVxuXG4vLyBDcmVhdGUgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gbmV3IFByb2R1Y3Rpb25Mb2dnZXIoKVxuXG4vLyBDb252ZW5pZW5jZSBmdW5jdGlvbnMgZm9yIGNvbW1vbiB1c2UgY2FzZXNcbmV4cG9ydCBjb25zdCBsb2dFcnJvciA9IChtZXNzYWdlLCBkYXRhLCBtZXRhZGF0YSkgPT4gbG9nZ2VyLmVycm9yKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ1dhcm4gPSAobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpID0+IGxvZ2dlci53YXJuKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ0luZm8gPSAobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpID0+IGxvZ2dlci5pbmZvKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKVxuZXhwb3J0IGNvbnN0IGxvZ0RlYnVnID0gKG1lc3NhZ2UsIGRhdGEsIG1ldGFkYXRhKSA9PiBsb2dnZXIuZGVidWcobWVzc2FnZSwgZGF0YSwgbWV0YWRhdGEpXG5leHBvcnQgY29uc3QgbG9nUGVyZm9ybWFuY2UgPSAob3BlcmF0aW9uLCBkdXJhdGlvbiwgbWV0YWRhdGEpID0+IGxvZ2dlci5wZXJmb3JtYW5jZShvcGVyYXRpb24sIGR1cmF0aW9uLCBtZXRhZGF0YSlcbmV4cG9ydCBjb25zdCBsb2dBUElDYWxsID0gKG1ldGhvZCwgZW5kcG9pbnQsIGR1cmF0aW9uLCBzdGF0dXMpID0+IGxvZ2dlci5hcGlDYWxsKG1ldGhvZCwgZW5kcG9pbnQsIGR1cmF0aW9uLCBzdGF0dXMpXG5leHBvcnQgY29uc3QgbG9nREJRdWVyeSA9ICh0YWJsZSwgb3BlcmF0aW9uLCBkdXJhdGlvbiwgcmVjb3JkQ291bnQpID0+IGxvZ2dlci5kYlF1ZXJ5KHRhYmxlLCBvcGVyYXRpb24sIGR1cmF0aW9uLCByZWNvcmRDb3VudClcbmV4cG9ydCBjb25zdCBsb2dTZWN1cml0eSA9IChldmVudCwgZGV0YWlscykgPT4gbG9nZ2VyLnNlY3VyaXR5KGV2ZW50LCBkZXRhaWxzKVxuZXhwb3J0IGNvbnN0IGxvZ0J1c2luZXNzID0gKGV2ZW50LCBkZXRhaWxzKSA9PiBsb2dnZXIuYnVzaW5lc3MoZXZlbnQsIGRldGFpbHMpXG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlciJdLCJuYW1lcyI6WyJpc0RldmVsb3BtZW50IiwiaXNQcm9kdWN0aW9uIiwiTE9HX0xFVkVMUyIsIkVSUk9SIiwiV0FSTiIsIklORk8iLCJERUJVRyIsIlRSQUNFIiwiUHJvZHVjdGlvbkxvZ2dlciIsImNvbnN0cnVjdG9yIiwibGV2ZWwiLCJzZW5zaXRpdmVQYXR0ZXJucyIsInNhbml0aXplIiwiZGF0YSIsInNhbml0aXplZCIsImZvckVhY2giLCJwYXR0ZXJuIiwicmVwbGFjZSIsIkFycmF5IiwiaXNBcnJheSIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImtleUxvd2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImZvcm1hdE1lc3NhZ2UiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzYW5pdGl6ZWREYXRhIiwibG9nRW50cnkiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJmb3JtYXR0ZWQiLCJjb25zb2xlIiwid2FybiIsImluZm8iLCJsb2ciLCJkZWJ1ZyIsInRyYWNlIiwicGVyZm9ybWFuY2UiLCJvcGVyYXRpb24iLCJkdXJhdGlvbiIsImFwaUNhbGwiLCJtZXRob2QiLCJlbmRwb2ludCIsInN0YXR1cyIsInR5cGUiLCJkYlF1ZXJ5IiwidGFibGUiLCJyZWNvcmRDb3VudCIsInNlY3VyaXR5IiwiZXZlbnQiLCJkZXRhaWxzIiwiYnVzaW5lc3MiLCJsb2dnZXIiLCJsb2dFcnJvciIsImxvZ1dhcm4iLCJsb2dJbmZvIiwibG9nRGVidWciLCJsb2dQZXJmb3JtYW5jZSIsImxvZ0FQSUNhbGwiLCJsb2dEQlF1ZXJ5IiwibG9nU2VjdXJpdHkiLCJsb2dCdXNpbmVzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/utils/production-logger.js\n");

/***/ }),

/***/ "(api)/./pages/api/infrastructure-test.js":
/*!******************************************!*\
  !*** ./pages/api/infrastructure-test.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/utils/memory-cache-fallback.js */ \"(api)/./lib/utils/memory-cache-fallback.js\");\n/* harmony import */ var _lib_database_query_optimizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/database/query-optimizer.js */ \"(api)/./lib/database/query-optimizer.js\");\n/* harmony import */ var _lib_supabase_client_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/supabase-client.js */ \"(api)/./lib/supabase-client.js\");\n/* harmony import */ var _lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/utils/production-logger.js */ \"(api)/./lib/utils/production-logger.js\");\n/**\n * Infrastructure Test API - Production Readiness Check\n * Tests all critical infrastructure components for Triangle Intelligence Platform\n */ \n\n\n\nasync function handler(req, res) {\n    const startTime = Date.now();\n    (0,_lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__.logInfo)(\"Infrastructure test started\", {\n        method: req.method,\n        timestamp: new Date().toISOString()\n    });\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const testResults = {\n        timestamp: new Date().toISOString(),\n        environment: \"development\",\n        tests: {},\n        performance: {},\n        recommendations: []\n    };\n    try {\n        // 1. Test Database Connection\n        (0,_lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__.logInfo)(\"Testing database connection...\");\n        const dbStartTime = Date.now();\n        try {\n            const supabase = (0,_lib_supabase_client_js__WEBPACK_IMPORTED_MODULE_2__.getSupabaseClient)();\n            const { data: dbTest, error: dbError } = await supabase.from(\"countries\").select(\"*\").limit(1);\n            const dbDuration = Date.now() - dbStartTime;\n            testResults.tests.database = {\n                status: dbError ? \"FAILED\" : \"PASS\",\n                duration: dbDuration,\n                error: dbError?.message,\n                recordsFound: dbTest?.length || 0\n            };\n            if (dbDuration > 1000) {\n                testResults.recommendations.push(\"Database query >1s - consider connection optimization\");\n            }\n        } catch (error) {\n            testResults.tests.database = {\n                status: \"FAILED\",\n                error: error.message,\n                duration: Date.now() - dbStartTime\n            };\n        }\n        // 2. Test Cache System (Universal Cache with Redis/Memory fallback)\n        (0,_lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__.logInfo)(\"Testing cache system...\");\n        const cacheStartTime = Date.now();\n        try {\n            const testKey = \"infrastructure_test_\" + Date.now();\n            const testValue = {\n                test: true,\n                timestamp: new Date().toISOString()\n            };\n            // Test SET\n            await _lib_utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_0__.universalCache.set(testKey, testValue, 60);\n            // Test GET\n            const cachedValue = await _lib_utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_0__.universalCache.get(testKey);\n            // Test DELETE\n            await _lib_utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_0__.universalCache.del(testKey);\n            const cacheDuration = Date.now() - cacheStartTime;\n            const cacheStats = _lib_utils_memory_cache_fallback_js__WEBPACK_IMPORTED_MODULE_0__.universalCache.getStats();\n            testResults.tests.cache = {\n                status: cachedValue && cachedValue.test ? \"PASS\" : \"FAILED\",\n                duration: cacheDuration,\n                backend: cacheStats.usingFallback ? \"MEMORY_FALLBACK\" : \"REDIS\",\n                stats: cacheStats\n            };\n            if (cacheStats.usingFallback) {\n                testResults.recommendations.push(\"Using memory cache fallback - deploy Redis for production\");\n            }\n        } catch (error) {\n            testResults.tests.cache = {\n                status: \"FAILED\",\n                error: error.message,\n                duration: Date.now() - cacheStartTime\n            };\n        }\n        // 3. Test Query Optimizer Performance\n        (0,_lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__.logInfo)(\"Testing query optimizer performance...\");\n        const queryStartTime = Date.now();\n        try {\n            const testParams = {\n                origin: \"CN\",\n                destination: \"US\",\n                hsCode: \"8471\",\n                businessType: \"Electronics\"\n            };\n            const queryResult = await _lib_database_query_optimizer_js__WEBPACK_IMPORTED_MODULE_1__.queryOptimizer.getTriangleRoutingData(testParams);\n            const queryDuration = Date.now() - queryStartTime;\n            testResults.tests.queryOptimizer = {\n                status: queryResult ? \"PASS\" : \"FAILED\",\n                duration: queryDuration,\n                recordsAnalyzed: queryResult.totalRecords || 0,\n                triangleRoutes: queryResult.triangleOptions?.length || 0,\n                optimized: queryResult.efficiency?.optimized || false\n            };\n            if (queryDuration > 1000) {\n                testResults.recommendations.push(\"Query optimizer >1s - check database indexes and caching\");\n            }\n        } catch (error) {\n            testResults.tests.queryOptimizer = {\n                status: \"FAILED\",\n                error: error.message,\n                duration: Date.now() - queryStartTime\n            };\n        }\n        // 4. Test Memory Usage\n        const memoryUsage = process.memoryUsage();\n        testResults.tests.memory = {\n            status: memoryUsage.heapUsed < 512 * 1024 * 1024 ? \"PASS\" : \"WARNING\",\n            heapUsed: Math.round(memoryUsage.heapUsed / 1024 / 1024) + \"MB\",\n            heapTotal: Math.round(memoryUsage.heapTotal / 1024 / 1024) + \"MB\",\n            external: Math.round(memoryUsage.external / 1024 / 1024) + \"MB\"\n        };\n        if (memoryUsage.heapUsed > 256 * 1024 * 1024) {\n            testResults.recommendations.push(\"High memory usage detected - implement memory optimization\");\n        }\n        // 5. Overall Performance Assessment\n        const totalDuration = Date.now() - startTime;\n        testResults.performance = {\n            totalTestDuration: totalDuration,\n            status: totalDuration < 2000 ? \"EXCELLENT\" : totalDuration < 5000 ? \"GOOD\" : \"NEEDS_OPTIMIZATION\",\n            target: \"<2000ms for all tests\"\n        };\n        // 6. Production Readiness Score\n        const passedTests = Object.values(testResults.tests).filter((test)=>test.status === \"PASS\").length;\n        const totalTests = Object.keys(testResults.tests).length;\n        const readinessScore = Math.round(passedTests / totalTests * 100);\n        testResults.productionReadiness = {\n            score: readinessScore,\n            level: readinessScore >= 90 ? \"READY\" : readinessScore >= 70 ? \"ALMOST_READY\" : \"NEEDS_WORK\",\n            passedTests,\n            totalTests\n        };\n        // Add specific recommendations based on test results\n        if (testResults.tests.cache?.backend === \"MEMORY_FALLBACK\") {\n            testResults.recommendations.push(\"PRIORITY: Deploy Redis for production-grade caching and rate limiting\");\n        }\n        if (testResults.performance.status !== \"EXCELLENT\") {\n            testResults.recommendations.push(\"Optimize query performance and enable all caching layers\");\n        }\n        // Log performance metrics\n        (0,_lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__.logPerformance)(\"infrastructure_test_complete\", totalDuration, {\n            readinessScore,\n            level: testResults.productionReadiness.level,\n            recommendationsCount: testResults.recommendations.length\n        });\n        res.status(200).json(testResults);\n    } catch (error) {\n        (0,_lib_utils_production_logger_js__WEBPACK_IMPORTED_MODULE_3__.logError)(\"Infrastructure test failed\", {\n            error: error.message\n        });\n        res.status(500).json({\n            error: \"Infrastructure test failed\",\n            message: error.message,\n            timestamp: new Date().toISOString(),\n            recommendations: [\n                \"Check environment variables and database connectivity\",\n                \"Verify all required services are running\",\n                \"Review server logs for detailed error information\"\n            ]\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBbUIsQ0FBQ0UsS0FBSztZQUM1Q0Msc0JBQXNCdkUsWUFBWUksZUFBZSxDQUFDYyxNQUFNO1FBQzFEO1FBRUE1QixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDRTtJQUV2QixFQUFFLE9BQU9ELE9BQU87UUFDZGIseUVBQVFBLENBQUMsOEJBQThCO1lBQUVhLE9BQU9BLE1BQU1pQixPQUFPO1FBQUM7UUFFOUQxQixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25CQyxPQUFPO1lBQ1BpQixTQUFTakIsTUFBTWlCLE9BQU87WUFDdEJyQixXQUFXLElBQUlILE9BQU9JLFdBQVc7WUFDakNRLGlCQUFpQjtnQkFDZjtnQkFDQTtnQkFDQTthQUNEO1FBQ0g7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJpYW5nbGUtaW50ZWxsaWdlbmNlLXBsYXRmb3JtLy4vcGFnZXMvYXBpL2luZnJhc3RydWN0dXJlLXRlc3QuanM/NjA5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEluZnJhc3RydWN0dXJlIFRlc3QgQVBJIC0gUHJvZHVjdGlvbiBSZWFkaW5lc3MgQ2hlY2tcbiAqIFRlc3RzIGFsbCBjcml0aWNhbCBpbmZyYXN0cnVjdHVyZSBjb21wb25lbnRzIGZvciBUcmlhbmdsZSBJbnRlbGxpZ2VuY2UgUGxhdGZvcm1cbiAqL1xuXG5pbXBvcnQgeyB1bml2ZXJzYWxDYWNoZSB9IGZyb20gJy4uLy4uL2xpYi91dGlscy9tZW1vcnktY2FjaGUtZmFsbGJhY2suanMnXG5pbXBvcnQgeyBxdWVyeU9wdGltaXplciB9IGZyb20gJy4uLy4uL2xpYi9kYXRhYmFzZS9xdWVyeS1vcHRpbWl6ZXIuanMnXG5pbXBvcnQgeyBnZXRTdXBhYmFzZUNsaWVudCB9IGZyb20gJy4uLy4uL2xpYi9zdXBhYmFzZS1jbGllbnQuanMnXG5pbXBvcnQgeyBsb2dnZXIsIGxvZ0luZm8sIGxvZ0Vycm9yLCBsb2dQZXJmb3JtYW5jZSB9IGZyb20gJy4uLy4uL2xpYi91dGlscy9wcm9kdWN0aW9uLWxvZ2dlci5qcydcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gIFxuICBsb2dJbmZvKCdJbmZyYXN0cnVjdHVyZSB0ZXN0IHN0YXJ0ZWQnLCB7XG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH0pXG5cbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXG4gIH1cblxuICBjb25zdCB0ZXN0UmVzdWx0cyA9IHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gICAgdGVzdHM6IHt9LFxuICAgIHBlcmZvcm1hbmNlOiB7fSxcbiAgICByZWNvbW1lbmRhdGlvbnM6IFtdXG4gIH1cblxuICB0cnkge1xuICAgIC8vIDEuIFRlc3QgRGF0YWJhc2UgQ29ubmVjdGlvblxuICAgIGxvZ0luZm8oJ1Rlc3RpbmcgZGF0YWJhc2UgY29ubmVjdGlvbi4uLicpXG4gICAgY29uc3QgZGJTdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKVxuICAgICAgY29uc3QgeyBkYXRhOiBkYlRlc3QsIGVycm9yOiBkYkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY291bnRyaWVzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5saW1pdCgxKVxuXG4gICAgICBjb25zdCBkYkR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIGRiU3RhcnRUaW1lXG4gICAgICBcbiAgICAgIHRlc3RSZXN1bHRzLnRlc3RzLmRhdGFiYXNlID0ge1xuICAgICAgICBzdGF0dXM6IGRiRXJyb3IgPyAnRkFJTEVEJyA6ICdQQVNTJyxcbiAgICAgICAgZHVyYXRpb246IGRiRHVyYXRpb24sXG4gICAgICAgIGVycm9yOiBkYkVycm9yPy5tZXNzYWdlLFxuICAgICAgICByZWNvcmRzRm91bmQ6IGRiVGVzdD8ubGVuZ3RoIHx8IDBcbiAgICAgIH1cblxuICAgICAgaWYgKGRiRHVyYXRpb24gPiAxMDAwKSB7XG4gICAgICAgIHRlc3RSZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5wdXNoKCdEYXRhYmFzZSBxdWVyeSA+MXMgLSBjb25zaWRlciBjb25uZWN0aW9uIG9wdGltaXphdGlvbicpXG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGVzdFJlc3VsdHMudGVzdHMuZGF0YWJhc2UgPSB7XG4gICAgICAgIHN0YXR1czogJ0ZBSUxFRCcsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBkdXJhdGlvbjogRGF0ZS5ub3coKSAtIGRiU3RhcnRUaW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMi4gVGVzdCBDYWNoZSBTeXN0ZW0gKFVuaXZlcnNhbCBDYWNoZSB3aXRoIFJlZGlzL01lbW9yeSBmYWxsYmFjaylcbiAgICBsb2dJbmZvKCdUZXN0aW5nIGNhY2hlIHN5c3RlbS4uLicpXG4gICAgY29uc3QgY2FjaGVTdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlc3RLZXkgPSAnaW5mcmFzdHJ1Y3R1cmVfdGVzdF8nICsgRGF0ZS5ub3coKVxuICAgICAgY29uc3QgdGVzdFZhbHVlID0geyB0ZXN0OiB0cnVlLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9XG4gICAgICBcbiAgICAgIC8vIFRlc3QgU0VUXG4gICAgICBhd2FpdCB1bml2ZXJzYWxDYWNoZS5zZXQodGVzdEtleSwgdGVzdFZhbHVlLCA2MClcbiAgICAgIFxuICAgICAgLy8gVGVzdCBHRVRcbiAgICAgIGNvbnN0IGNhY2hlZFZhbHVlID0gYXdhaXQgdW5pdmVyc2FsQ2FjaGUuZ2V0KHRlc3RLZXkpXG4gICAgICBcbiAgICAgIC8vIFRlc3QgREVMRVRFXG4gICAgICBhd2FpdCB1bml2ZXJzYWxDYWNoZS5kZWwodGVzdEtleSlcbiAgICAgIFxuICAgICAgY29uc3QgY2FjaGVEdXJhdGlvbiA9IERhdGUubm93KCkgLSBjYWNoZVN0YXJ0VGltZVxuICAgICAgY29uc3QgY2FjaGVTdGF0cyA9IHVuaXZlcnNhbENhY2hlLmdldFN0YXRzKClcbiAgICAgIFxuICAgICAgdGVzdFJlc3VsdHMudGVzdHMuY2FjaGUgPSB7XG4gICAgICAgIHN0YXR1czogKGNhY2hlZFZhbHVlICYmIGNhY2hlZFZhbHVlLnRlc3QpID8gJ1BBU1MnIDogJ0ZBSUxFRCcsXG4gICAgICAgIGR1cmF0aW9uOiBjYWNoZUR1cmF0aW9uLFxuICAgICAgICBiYWNrZW5kOiBjYWNoZVN0YXRzLnVzaW5nRmFsbGJhY2sgPyAnTUVNT1JZX0ZBTExCQUNLJyA6ICdSRURJUycsXG4gICAgICAgIHN0YXRzOiBjYWNoZVN0YXRzXG4gICAgICB9XG5cbiAgICAgIGlmIChjYWNoZVN0YXRzLnVzaW5nRmFsbGJhY2spIHtcbiAgICAgICAgdGVzdFJlc3VsdHMucmVjb21tZW5kYXRpb25zLnB1c2goJ1VzaW5nIG1lbW9yeSBjYWNoZSBmYWxsYmFjayAtIGRlcGxveSBSZWRpcyBmb3IgcHJvZHVjdGlvbicpXG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGVzdFJlc3VsdHMudGVzdHMuY2FjaGUgPSB7XG4gICAgICAgIHN0YXR1czogJ0ZBSUxFRCcsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBkdXJhdGlvbjogRGF0ZS5ub3coKSAtIGNhY2hlU3RhcnRUaW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMy4gVGVzdCBRdWVyeSBPcHRpbWl6ZXIgUGVyZm9ybWFuY2VcbiAgICBsb2dJbmZvKCdUZXN0aW5nIHF1ZXJ5IG9wdGltaXplciBwZXJmb3JtYW5jZS4uLicpXG4gICAgY29uc3QgcXVlcnlTdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlc3RQYXJhbXMgPSB7XG4gICAgICAgIG9yaWdpbjogJ0NOJyxcbiAgICAgICAgZGVzdGluYXRpb246ICdVUycsIFxuICAgICAgICBoc0NvZGU6ICc4NDcxJyxcbiAgICAgICAgYnVzaW5lc3NUeXBlOiAnRWxlY3Ryb25pY3MnXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gYXdhaXQgcXVlcnlPcHRpbWl6ZXIuZ2V0VHJpYW5nbGVSb3V0aW5nRGF0YSh0ZXN0UGFyYW1zKVxuICAgICAgY29uc3QgcXVlcnlEdXJhdGlvbiA9IERhdGUubm93KCkgLSBxdWVyeVN0YXJ0VGltZVxuICAgICAgXG4gICAgICB0ZXN0UmVzdWx0cy50ZXN0cy5xdWVyeU9wdGltaXplciA9IHtcbiAgICAgICAgc3RhdHVzOiBxdWVyeVJlc3VsdCA/ICdQQVNTJyA6ICdGQUlMRUQnLFxuICAgICAgICBkdXJhdGlvbjogcXVlcnlEdXJhdGlvbixcbiAgICAgICAgcmVjb3Jkc0FuYWx5emVkOiBxdWVyeVJlc3VsdC50b3RhbFJlY29yZHMgfHwgMCxcbiAgICAgICAgdHJpYW5nbGVSb3V0ZXM6IHF1ZXJ5UmVzdWx0LnRyaWFuZ2xlT3B0aW9ucz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIG9wdGltaXplZDogcXVlcnlSZXN1bHQuZWZmaWNpZW5jeT8ub3B0aW1pemVkIHx8IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmIChxdWVyeUR1cmF0aW9uID4gMTAwMCkge1xuICAgICAgICB0ZXN0UmVzdWx0cy5yZWNvbW1lbmRhdGlvbnMucHVzaCgnUXVlcnkgb3B0aW1pemVyID4xcyAtIGNoZWNrIGRhdGFiYXNlIGluZGV4ZXMgYW5kIGNhY2hpbmcnKVxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRlc3RSZXN1bHRzLnRlc3RzLnF1ZXJ5T3B0aW1pemVyID0ge1xuICAgICAgICBzdGF0dXM6ICdGQUlMRUQnLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBxdWVyeVN0YXJ0VGltZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDQuIFRlc3QgTWVtb3J5IFVzYWdlXG4gICAgY29uc3QgbWVtb3J5VXNhZ2UgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKClcbiAgICB0ZXN0UmVzdWx0cy50ZXN0cy5tZW1vcnkgPSB7XG4gICAgICBzdGF0dXM6IG1lbW9yeVVzYWdlLmhlYXBVc2VkIDwgKDUxMiAqIDEwMjQgKiAxMDI0KSA/ICdQQVNTJyA6ICdXQVJOSU5HJywgLy8gNTEyTUIgdGhyZXNob2xkXG4gICAgICBoZWFwVXNlZDogTWF0aC5yb3VuZChtZW1vcnlVc2FnZS5oZWFwVXNlZCAvIDEwMjQgLyAxMDI0KSArICdNQicsXG4gICAgICBoZWFwVG90YWw6IE1hdGgucm91bmQobWVtb3J5VXNhZ2UuaGVhcFRvdGFsIC8gMTAyNCAvIDEwMjQpICsgJ01CJyxcbiAgICAgIGV4dGVybmFsOiBNYXRoLnJvdW5kKG1lbW9yeVVzYWdlLmV4dGVybmFsIC8gMTAyNCAvIDEwMjQpICsgJ01CJ1xuICAgIH1cblxuICAgIGlmIChtZW1vcnlVc2FnZS5oZWFwVXNlZCA+ICgyNTYgKiAxMDI0ICogMTAyNCkpIHtcbiAgICAgIHRlc3RSZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5wdXNoKCdIaWdoIG1lbW9yeSB1c2FnZSBkZXRlY3RlZCAtIGltcGxlbWVudCBtZW1vcnkgb3B0aW1pemF0aW9uJylcbiAgICB9XG5cbiAgICAvLyA1LiBPdmVyYWxsIFBlcmZvcm1hbmNlIEFzc2Vzc21lbnRcbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIHRlc3RSZXN1bHRzLnBlcmZvcm1hbmNlID0ge1xuICAgICAgdG90YWxUZXN0RHVyYXRpb246IHRvdGFsRHVyYXRpb24sXG4gICAgICBzdGF0dXM6IHRvdGFsRHVyYXRpb24gPCAyMDAwID8gJ0VYQ0VMTEVOVCcgOiB0b3RhbER1cmF0aW9uIDwgNTAwMCA/ICdHT09EJyA6ICdORUVEU19PUFRJTUlaQVRJT04nLFxuICAgICAgdGFyZ2V0OiAnPDIwMDBtcyBmb3IgYWxsIHRlc3RzJ1xuICAgIH1cblxuICAgIC8vIDYuIFByb2R1Y3Rpb24gUmVhZGluZXNzIFNjb3JlXG4gICAgY29uc3QgcGFzc2VkVGVzdHMgPSBPYmplY3QudmFsdWVzKHRlc3RSZXN1bHRzLnRlc3RzKS5maWx0ZXIodGVzdCA9PiB0ZXN0LnN0YXR1cyA9PT0gJ1BBU1MnKS5sZW5ndGhcbiAgICBjb25zdCB0b3RhbFRlc3RzID0gT2JqZWN0LmtleXModGVzdFJlc3VsdHMudGVzdHMpLmxlbmd0aFxuICAgIGNvbnN0IHJlYWRpbmVzc1Njb3JlID0gTWF0aC5yb3VuZCgocGFzc2VkVGVzdHMgLyB0b3RhbFRlc3RzKSAqIDEwMClcbiAgICBcbiAgICB0ZXN0UmVzdWx0cy5wcm9kdWN0aW9uUmVhZGluZXNzID0ge1xuICAgICAgc2NvcmU6IHJlYWRpbmVzc1Njb3JlLFxuICAgICAgbGV2ZWw6IHJlYWRpbmVzc1Njb3JlID49IDkwID8gJ1JFQURZJyA6IFxuICAgICAgICAgICAgIHJlYWRpbmVzc1Njb3JlID49IDcwID8gJ0FMTU9TVF9SRUFEWScgOiBcbiAgICAgICAgICAgICAnTkVFRFNfV09SSycsXG4gICAgICBwYXNzZWRUZXN0cyxcbiAgICAgIHRvdGFsVGVzdHNcbiAgICB9XG5cbiAgICAvLyBBZGQgc3BlY2lmaWMgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHRlc3QgcmVzdWx0c1xuICAgIGlmICh0ZXN0UmVzdWx0cy50ZXN0cy5jYWNoZT8uYmFja2VuZCA9PT0gJ01FTU9SWV9GQUxMQkFDSycpIHtcbiAgICAgIHRlc3RSZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5wdXNoKCdQUklPUklUWTogRGVwbG95IFJlZGlzIGZvciBwcm9kdWN0aW9uLWdyYWRlIGNhY2hpbmcgYW5kIHJhdGUgbGltaXRpbmcnKVxuICAgIH1cblxuICAgIGlmICh0ZXN0UmVzdWx0cy5wZXJmb3JtYW5jZS5zdGF0dXMgIT09ICdFWENFTExFTlQnKSB7XG4gICAgICB0ZXN0UmVzdWx0cy5yZWNvbW1lbmRhdGlvbnMucHVzaCgnT3B0aW1pemUgcXVlcnkgcGVyZm9ybWFuY2UgYW5kIGVuYWJsZSBhbGwgY2FjaGluZyBsYXllcnMnKVxuICAgIH1cblxuICAgIC8vIExvZyBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgbG9nUGVyZm9ybWFuY2UoJ2luZnJhc3RydWN0dXJlX3Rlc3RfY29tcGxldGUnLCB0b3RhbER1cmF0aW9uLCB7XG4gICAgICByZWFkaW5lc3NTY29yZSxcbiAgICAgIGxldmVsOiB0ZXN0UmVzdWx0cy5wcm9kdWN0aW9uUmVhZGluZXNzLmxldmVsLFxuICAgICAgcmVjb21tZW5kYXRpb25zQ291bnQ6IHRlc3RSZXN1bHRzLnJlY29tbWVuZGF0aW9ucy5sZW5ndGhcbiAgICB9KVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24odGVzdFJlc3VsdHMpXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcignSW5mcmFzdHJ1Y3R1cmUgdGVzdCBmYWlsZWQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pXG4gICAgXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdJbmZyYXN0cnVjdHVyZSB0ZXN0IGZhaWxlZCcsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgJ0NoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlcyBhbmQgZGF0YWJhc2UgY29ubmVjdGl2aXR5JyxcbiAgICAgICAgJ1ZlcmlmeSBhbGwgcmVxdWlyZWQgc2VydmljZXMgYXJlIHJ1bm5pbmcnLFxuICAgICAgICAnUmV2aWV3IHNlcnZlciBsb2dzIGZvciBkZXRhaWxlZCBlcnJvciBpbmZvcm1hdGlvbidcbiAgICAgIF1cbiAgICB9KVxuICB9XG59Il0sIm5hbWVzIjpbInVuaXZlcnNhbENhY2hlIiwicXVlcnlPcHRpbWl6ZXIiLCJnZXRTdXBhYmFzZUNsaWVudCIsImxvZ2dlciIsImxvZ0luZm8iLCJsb2dFcnJvciIsImxvZ1BlcmZvcm1hbmNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJtZXRob2QiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInRlc3RSZXN1bHRzIiwiZW52aXJvbm1lbnQiLCJ0ZXN0cyIsInBlcmZvcm1hbmNlIiwicmVjb21tZW5kYXRpb25zIiwiZGJTdGFydFRpbWUiLCJzdXBhYmFzZSIsImRhdGEiLCJkYlRlc3QiLCJkYkVycm9yIiwiZnJvbSIsInNlbGVjdCIsImxpbWl0IiwiZGJEdXJhdGlvbiIsImRhdGFiYXNlIiwiZHVyYXRpb24iLCJtZXNzYWdlIiwicmVjb3Jkc0ZvdW5kIiwibGVuZ3RoIiwicHVzaCIsImNhY2hlU3RhcnRUaW1lIiwidGVzdEtleSIsInRlc3RWYWx1ZSIsInRlc3QiLCJzZXQiLCJjYWNoZWRWYWx1ZSIsImdldCIsImRlbCIsImNhY2hlRHVyYXRpb24iLCJjYWNoZVN0YXRzIiwiZ2V0U3RhdHMiLCJjYWNoZSIsImJhY2tlbmQiLCJ1c2luZ0ZhbGxiYWNrIiwic3RhdHMiLCJxdWVyeVN0YXJ0VGltZSIsInRlc3RQYXJhbXMiLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsImhzQ29kZSIsImJ1c2luZXNzVHlwZSIsInF1ZXJ5UmVzdWx0IiwiZ2V0VHJpYW5nbGVSb3V0aW5nRGF0YSIsInF1ZXJ5RHVyYXRpb24iLCJyZWNvcmRzQW5hbHl6ZWQiLCJ0b3RhbFJlY29yZHMiLCJ0cmlhbmdsZVJvdXRlcyIsInRyaWFuZ2xlT3B0aW9ucyIsIm9wdGltaXplZCIsImVmZmljaWVuY3kiLCJtZW1vcnlVc2FnZSIsInByb2Nlc3MiLCJtZW1vcnkiLCJoZWFwVXNlZCIsIk1hdGgiLCJyb3VuZCIsImhlYXBUb3RhbCIsImV4dGVybmFsIiwidG90YWxEdXJhdGlvbiIsInRvdGFsVGVzdER1cmF0aW9uIiwidGFyZ2V0IiwicGFzc2VkVGVzdHMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJ0b3RhbFRlc3RzIiwia2V5cyIsInJlYWRpbmVzc1Njb3JlIiwicHJvZHVjdGlvblJlYWRpbmVzcyIsInNjb3JlIiwibGV2ZWwiLCJyZWNvbW1lbmRhdGlvbnNDb3VudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/infrastructure-test.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Finfrastructure-test&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Finfrastructure-test.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();