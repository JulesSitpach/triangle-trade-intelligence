"use strict";exports.id=8602,exports.ids=[8602],exports.modules={8602:(e,i,t)=>{t.d(i,{Z:()=>s});var a=t(2885);let r=(0,a.createClient)("https://mrwitpgbcaxgnirqtavt.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yd2l0cGdiY2F4Z25pcnF0YXZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjUxMzQsImV4cCI6MjA2NTQwMTEzNH0.5g-eaUIwy4VQD2YfNC2sFNoZYF1HdUzVTNJZvtuVSI8"),s=class{static qualifyLead(e,i){console.log("\uD83D\uDCB0 LEAD QUALIFICATION: Analyzing specialist opportunity value");let t={leadScore:this.calculateLeadScore(e,i),specialistFeeEstimate:this.calculateSpecialistFee(i.totalFinancialBenefit),urgencyScore:this.assessUrgency(e),complexityLevel:this.assessComplexity(e,i),geographicNeeds:this.identifyGeographicNeeds(e),requiredSpecialists:this.identifyRequiredSpecialists(e,i),revenueTier:this.classifyRevenueTier(i.totalFinancialBenefit)};return console.log(`💰 LEAD QUALIFIED: Score ${t.leadScore}/100`),console.log(`💎 SPECIALIST FEE POTENTIAL: $${t.specialistFeeEstimate.toLocaleString()}`),console.log(`🎯 REVENUE TIER: ${t.revenueTier}`),t}static calculateLeadScore(e,i){let t=0,a=i.totalFinancialBenefit;return a>=1e7?t+=40:a>=5e6?t+=35:a>=1e6?t+=30:a>=5e5?t+=25:a>=1e5?t+=20:t+=10,t+=({Electronics:20,Automotive:18,Manufacturing:16,Medical:15,Machinery:14,Textiles:12})[e.businessType]||10,"CN"===e.primarySupplierCountry?t+=15:["TW","KR"].includes(e.primarySupplierCountry)?t+=12:["VN","TH"].includes(e.primarySupplierCountry)?t+=8:t+=5,"SPEED"===e.timelinePriority?t+=15:"CULTURAL"===e.timelinePriority?t+=12:"BALANCED"===e.timelinePriority?t+=10:t+=8,e.companyName&&e.companyName.length>3&&(t+=5),e.timelinePriority&&(t+=5),Math.min(100,t)}static calculateSpecialistFee(e){return e>=1e7?Math.round(.015*e):e>=5e6?Math.round(.02*e):e>=1e6?Math.round(.025*e):e>=5e5?Math.round(.03*e):Math.round(.035*e)}static assessUrgency(e){let i=50;return"SPEED"===e.timelinePriority?i+=30:"BALANCED"===e.timelinePriority&&(i+=15),"CN"===e.primarySupplierCountry&&(i+=20),"Over $25M"===e.importVolume?i+=15:"$5M - $25M"===e.importVolume&&(i+=10),Math.min(100,i)}static assessComplexity(e,i){let t={businessType:{Medical:5,Automotive:4,Electronics:4,Manufacturing:3,Machinery:3,Textiles:2},volume:{"Over $25M":4,"$5M - $25M":3,"$1M - $5M":2,"$500K - $1M":2,"Under $500K":1},supplier:{CN:3,TW:2,KR:2,VN:1,TH:1,MY:1}},a=(t.businessType[e.businessType]||2)+(t.volume[e.importVolume]||2)+(t.supplier[e.primarySupplierCountry]||1);return a>=10?"very_high":a>=8?"high":a>=6?"medium":a>=4?"low":"very_low"}static identifyGeographicNeeds(e){let i={canadaRoute:[],mexicoRoute:[],crossBorder:[]};return["Electronics","Medical"].includes(e.businessType)&&(i.canadaRoute.push("Vancouver port logistics"),i.canadaRoute.push("Health Canada compliance")),e.importVolume.includes("$25M")&&i.canadaRoute.push("Enterprise customs processing"),["Manufacturing","Automotive","Textiles"].includes(e.businessType)&&(i.mexicoRoute.push("Maquiladora setup"),i.mexicoRoute.push("US border crossing optimization")),"CULTURAL"===e.timelinePriority&&(i.crossBorder.push("Bilingual project management"),i.crossBorder.push("Cultural bridge coordination")),i.crossBorder.push("USMCA documentation"),i.crossBorder.push("Multi-country logistics coordination"),i}static identifyRequiredSpecialists(e,i){let t=[];return t.push({type:{Electronics:"Electronics Trade Specialist",Automotive:"Automotive Logistics Expert",Manufacturing:"Industrial Trade Consultant",Medical:"Medical Device Trade Expert",Machinery:"Heavy Machinery Logistics Specialist",Textiles:"Textile Industry Trade Consultant"}[e.businessType]||"General Trade Specialist",priority:"primary",estimatedFee:Math.round(.6*this.calculateSpecialistFee(i.totalFinancialBenefit))}),i.canadaRoute&&t.push({type:"Canada Customs & Logistics Specialist",priority:"geographic",estimatedFee:Math.round(.25*this.calculateSpecialistFee(i.totalFinancialBenefit))}),i.mexicoRoute&&t.push({type:"Mexico Maquiladora Specialist",priority:"geographic",estimatedFee:Math.round(.25*this.calculateSpecialistFee(i.totalFinancialBenefit))}),["Medical","Automotive"].includes(e.businessType)&&t.push({type:"USMCA Regulatory Compliance Expert",priority:"regulatory",estimatedFee:Math.round(.15*this.calculateSpecialistFee(i.totalFinancialBenefit))}),t}static classifyRevenueTier(e){return e>=1e7?"PLATINUM":e>=5e6?"GOLD":e>=1e6?"SILVER":e>=5e5?"BRONZE":e>=1e5?"QUALIFIED":"BASIC"}static async saveQualifiedLead(e,i,t){try{let a={company_name:e.companyName,business_type:e.businessType,import_volume:e.importVolume,supplier_country:e.primarySupplierCountry,timeline_priority:e.timelinePriority,lead_score:t.leadScore,urgency_score:t.urgencyScore,complexity_level:t.complexityLevel,revenue_tier:t.revenueTier,total_savings_potential:i.totalFinancialBenefit,specialist_fee_estimate:t.specialistFeeEstimate,required_specialists:t.requiredSpecialists,geographic_needs:t.geographicNeeds,lead_status:"qualified",created_at:new Date().toISOString(),qualification_date:new Date().toISOString(),source:"CANADA_MEXICO_USMCA_CALCULATOR",qualification_method:"AUTOMATED_SAVINGS_ANALYSIS"},{data:s,error:o}=await r.from("qualified_leads").insert(a).select();if(o)throw o;return console.log(`💰 QUALIFIED LEAD SAVED: ${t.revenueTier} tier`),console.log(`💎 SPECIALIST OPPORTUNITY: $${t.specialistFeeEstimate.toLocaleString()}`),{success:!0,leadId:s[0]?.id,qualification:t}}catch(e){return console.error("❌ Failed to save qualified lead:",e),{success:!1,error:e.message}}}static getSpecialistRecommendations(e){return{primary:e.requiredSpecialists.find(e=>"primary"===e.priority),geographic:e.requiredSpecialists.filter(e=>"geographic"===e.priority),regulatory:e.requiredSpecialists.find(e=>"regulatory"===e.priority),totalFeePool:e.specialistFeeEstimate,revenueTier:e.revenueTier,leadScore:e.leadScore,recommendedAction:e.leadScore>=80?"IMMEDIATE_SPECIALIST_CONTACT":e.leadScore>=60?"QUALIFIED_SPECIALIST_OUTREACH":"NURTURE_AND_QUALIFY_FURTHER"}}}}};